class t{constructor(){this.color='#efeee3'}}class i{constructor(){this.runningStartTimeTS=null,this.interval=null,this.msPerFrame=20}start(t){return 1!=this.isRunning()&&(this.stop(),this.runningStartTimeTS=(new Date).getTime(),this.interval=window.setInterval((()=>{t()}),this.msPerFrame),!0)}isRunning(){return null!=this.runningStartTimeTS}stop(){return this.runningStartTimeTS=null,null!==this.interval&&clearInterval(this.interval),!0}getMsDelta(){if(null==this.runningStartTimeTS)return 0;return(new Date).getTime()-this.runningStartTimeTS}}class e{constructor(){this.debugMode=!0,this.fixBugWarning=!0}fixBugWarn(t){this.fixBugWarning}}class s{constructor(){this.compArray=[]}push(t){return this.compArray.push(t),t}init(t){for(let i=0;i<this.compArray.length;i++)this.compArray[i].init(t);return!0}drawByDrawLayer(t,i,e){for(let s=0;s<this.compArray.length;s++){let h=this.compArray[s];h.drawLayer==i&&this.qualifyForDraw(h,t)&&(e.save(),h.update(t,e),h.draw(e),e.restore())}return!0}qualifyForDraw(t,i){return 1==t.alwaysOn||t.getStartTime(!0)<=i&&t.getEndTime(!0)>i}len(){return this.compArray.length}}class h{constructor(t,i,e){this.comps=t,this.duration=i,this.charsWidth=e}append(t,i){if(t.charsWidth=this.charsWidth,i<1||void 0===i)throw new Error('for Insert operation to succeed you need component duration greater than 0');return t.duration=i,t.setStartTime(this.duration.len(!1)),this.duration.extend(t.duration),this.comps.push(t)}add(t,i,e){if(t.charsWidth=this.charsWidth,e<1||void 0===e)throw new Error('for Add operation to succeed you need component duration greater than 0');if(t.duration=e,t.setStartTime(i),t.getStartTime(!1)>this.duration.len(!1)&&this.duration.set(t.getStartTime(!1)),t.getEndTime(!1)>this.duration.len(!1)){let i=t.getEndTime(!1)-this.duration.len(!1);this.duration.extend(i)}return this.comps.push(t)}alwaysOn(t){return t.charsWidth=this.charsWidth,t.alwaysOn=!0,this.comps.push(t)}}class n{constructor(){this._pvt_duration_val=0}len(t=!0){return t?1e3*this._pvt_duration_val:this._pvt_duration_val}extend(t){return this._pvt_duration_val+=t,this._pvt_duration_val}set(t){return this._pvt_duration_val=t,this._pvt_duration_val}}class r{constructor(r='bilza',a=80){this.pack=new J(r,a),this.comps=new s,this.duration=new n,this.lastMsDelta=0,this.soundTrackElement=null,this.soundTrack=null,this.insert=new h(this.comps,this.duration,this.pack.charsWidth.bind(this.pack)),this.stopWatch=new i,this.set=new e,this.background=new t}init(){return null!==this.soundTrack&&(this.soundTrackElement=new Audio(this.soundTrack)),this.comps.init(this.pack),!0}drawInit(){return this.comps.init(this.pack),this.draw(),!0}draw(){let t=this.stopWatch.getMsDelta();return this.lastMsDelta=t,this.drawFrame(t),this.drawEvent(t),!0}drawFrame(t=0){if(null==this.pack)throw new Error('bilzaa is not initialized');t>=this.len(!0)&&this.stopWatch.stop(),this.pack.clearCanvas(),this.pack.drawBackground(this.background.color),this.comps.drawByDrawLayer(t,g.BackGround,this.pack),this.comps.drawByDrawLayer(t,g.MiddleGround,this.pack),this.comps.drawByDrawLayer(t,g.ForeGround,this.pack)}len(t=!0){return this.duration.len(t)}drawEvent(t){return!0}dynamicCanvas(t=95,i=null){return this.pack.dynamicCanvas(t,i),!0}start(){return this.init(),null!==this.soundTrackElement&&this.soundTrackElement.play(),this.stopWatch.start(this.draw.bind(this)),!0}stop(){return null!==this.soundTrackElement&&(this.soundTrackElement.pause(),this.soundTrackElement.currentTime=0),this.stopWatch.stop(),!0}resizeCanvas(t,i){this.pack.resizeCanvas(t,i)}lastMeDelta(){return this.lastMsDelta}isRunning(){return this.stopWatch.isRunning()}}var a,o,l,c,d,u,m,g;(t=>{t.Round='round',t.Butt='butt',t.Square='square'})(a||(a={})),(t=>{t.Arial='Arial',t.ArialBlack='Arial Black',t.Verdana='Verdana',t.Tahoma='Tahoma',t.Impact='Impact',t.Times='Times',t.Helvetica='Helvetica',t.TimesNewRoman='Times New Roman',t.Didot='Didot',t.Calibri='Calibri',t.Georgia='Georgia',t.AmericanTypewriter='American Typewriter',t.Courier='Courier',t.CourierNew='Courier New',t.LucidaConsole='Lucida Console',t.Monaco='Monaco',t.BradleyHand='Bradley Hand',t.BrushScriptMT='Brush Script MT',t.BrushScript='Brush Script',t.Luminari='Luminari'})(o||(o={}));class w{constructor(){this.fontSize=25,this.fontFamily=o.Luminari,this.fillStyle='green',this.strokeStyle='red',this.lineWidth=2,this.shadowColor='black',this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0,this.globalAlpha=1,this.lineCap=a.Round,this.lineDash=[]}merge(t){null!==t.lineCap&&(this.lineCap=t.lineCap),null!==t.globalAlpha&&(this.globalAlpha=t.globalAlpha),null!==t.shadowBlur&&(this.shadowBlur=t.shadowBlur),null!==t.shadowOffsetY&&(this.shadowOffsetY=t.shadowOffsetY),null!==t.shadowOffsetX&&(this.shadowOffsetX=t.shadowOffsetX),null!==t.lineWidth&&(this.lineWidth=t.lineWidth),null!==t.shadowColor&&(this.shadowColor=t.shadowColor),null!==t.strokeStyle&&(this.strokeStyle=t.strokeStyle),null!==t.fillStyle&&(this.fillStyle=t.fillStyle),null!==t.fontSize&&(this.fontSize=t.fontSize),null!==t.fontFamily&&(this.fontFamily=t.fontFamily),null!==t.lineDash&&(this.lineDash=t.lineDash)}}(t=>{t.XLeft='XLEFT',t.XRight='XRIGHT'})(l||(l={})),(t=>{t.YTop='YTOP',t.YBot='YBOT'})(c||(c={})),(t=>{t.Left='LEFT',t.Right='RIGHT',t.Mid='MID',t.Off='OFF'})(d||(d={})),(t=>{t.Top='TOP',t.Mid='MID',t.Bot='BOT'})(u||(u={})),(t=>{t.Waiting='WAITING',t.Running='RUNNING',t.Exhausted='EXHAUSTED'})(m||(m={}));class p{constructor(t,i,e,s){if(t<0||i<0)throw new Error('time can not be negative');if(i<=t)throw new Error('end Time can not be equal or smaller than start time');if(e>=s)throw new Error('start value can not be equal to or larger than end value in an increment operation');this.startTime=1e3*t,this.endTime=1e3*i,this.startValue=e,this.endValue=s,this.timeDiff=Math.abs(this.endTime-this.startTime),this.Xdiff=Math.abs(this.startValue-this.endValue),this._ret_val=null,this.filterState=m.Waiting}update(t){if(this.setState(t),this.filterState==m.Running){const i=Math.ceil(t-this.startTime)/this.timeDiff*100,e=this.Xdiff/100*i;this._ret_val=this.startValue+e}else this._ret_val=null;return this.filterState}setState(t){return t<this.startTime?this.filterState=m.Waiting:t>=this.startTime&&t<=this.endTime?this.filterState=m.Running:t>this.endTime&&(this.filterState=m.Exhausted),this.filterState}value(){return this._ret_val}}class f{constructor(t,i,e,s){if(t<0||i<0)throw new Error('time can not be negative');if(i<=t)throw new Error('end Time can not be equal or smaller than start time');if(e<=s)throw new Error('end value can not be equal to or larger than start value in an decrement operation');if(e<0)throw new Error('start value can not be less than zero in decrement operation');this.startTime=1e3*t,this.endTime=1e3*i,this.startValue=e,this.endValue=s,this.timeDiff=Math.abs(this.startTime-this.endTime),this.Xdiff=Math.abs(this.startValue-this.endValue),this._ret_val=null,this.filterState=m.Waiting}update(t){if(this.setState(t),this.filterState==m.Running){const i=Math.ceil(t-this.startTime)/this.timeDiff*100,e=Math.abs(100-i),s=this.Xdiff/100*e;this._ret_val=Math.ceil(this.endValue+s)}else this._ret_val=null;return this.filterState}setState(t){return t<this.startTime?this.filterState=m.Waiting:t>=this.startTime&&t<=this.endTime?this.filterState=m.Running:t>this.endTime&&(this.filterState=m.Exhausted),this.filterState}value(){return this._ret_val}}class y extends class{constructor(t,i){if(t<0||i<0)throw new Error('time can not be negative');if(i<=t)throw new Error('end Time can not be equal or smaller than start time');this.startTime=1e3*t,this.endTime=1e3*i,this._ret_val=null,this.filterState=m.Waiting}update(t){return this.setState(t),this.filterState}setState(t){return t<this.startTime?this.filterState=m.Waiting:t>=this.startTime&&t<=this.endTime?this.filterState=m.Running:t>this.endTime&&(this.filterState=m.Exhausted),this.filterState}value(){return this._ret_val}}{constructor(t,i,e){super(t,i),this.constantValue=e,this._ret_val=null}update(t){return super.update(t),this.filterState==m.Running?this._ret_val=this.constantValue:this._ret_val=null,this.filterState}}class v{constructor(t,i,e=d.Left,s=u.Top,h=0,n=0){this.x=t,this.y=i,this.xAlign=e,this.yAlign=s,this.xExtra=h,this.yExtra=n}}function x(){throw new Error('module is not initialized yet')}function T(t){return t>100?100:t<0?0:t}function S(t,i=null,e=null){if(null==e)throw new Error('canvasWidth = null');let s=0;if('number'!=typeof t.x){const h=function(t,i,e){if(null==i||null==e)throw new Error('module is not initialized');let s=0;switch(t){case l.XLeft:s=-1*i;break;case l.XRight:s=W(100,e)+i}return Math.ceil(s)}(t.x,i,e);b(h,t.xAlign,i),s=h+t.xExtra}else{s=b(W(t.x,e),t.xAlign,i)+t.xExtra}return s}function W(t,i){let e=0;if(null==i)x();else{let s=T(t);e=Math.ceil(i/100*s)}return e}function b(t,i,e){if(null==e)throw new Error('init error');let s=t;switch(i){case d.Left:break;case d.Mid:s=Math.floor(s-e/2);break;case d.Right:s=Math.floor(s-e)}return s}function H(t,i=null,e=null){if(null==e)throw new Error('canvasWidth = null');let s=0;if('number'!=typeof t.y){const h=function(t,i,e){if(null==i||null==e)throw new Error('module is not initialized');let s=0;switch(t){case c.YTop:s=-1*e;break;case c.YBot:s=D(100,e)+e}return Math.ceil(s)}(t.y,i,e);_(h,t.yAlign,i),s=h+t.yExtra}else{s=_(D(t.y,e),t.yAlign,i)+t.yExtra}return s}function D(t,i){let e=0;if(null==i)x();else{let s=T(t);e=Math.ceil(i/100*s)}return e}function _(t,i,e){if(null==e)throw new Error('init error');let s=t;switch(i){case u.Top:break;case u.Mid:s=Math.floor(s-e/2);break;case u.Bot:s=Math.floor(s-e)}return s}class B{constructor(t,i,e,s){this.fromLocItem=e,this.toLocItem=s,this.timeFrom=t,this.timeTo=i}}class M{constructor(t,i){this.gotoLocItem=i,this.atFrame=t}}class k{constructor(){this._x=0,this._y=0,this.preInitArray=[],this.animationsX=[],this.animationsY=[],this.gotoArray=[],this.compWidth=null,this.compHeight=null,this.canvasWidth=null,this.canvasHeight=null,this.yAlignOpt=u,this.xAlignOpt=d}init(t,i,e,s){return this.compWidth=t,this.compHeight=i,this.canvasWidth=e,this.canvasHeight=s,this.initIncDec(this.compWidth(),this.compHeight()),!0}update(t){if(null==this.compWidth)throw new Error('init error');return this.runGoto(t),this.runAnimationsX(t),this.runAnimationsY(t),!0}goto(t,i,e,s=d.Left,h=u.Top,n=0,r=0){let a=new v(i,e,s,h,n,r),o=new M(t,a);return this.gotoArray.push(o),!0}animate(t,i,e,s,h,n,r=d.Left,a=d.Left,o=u.Top,l=u.Top,c=0,m=0,g=0,w=0){const p=new v(e,h,r,o,c,g),f=new v(s,n,a,l,m,w),y=new B(t,i,p,f);return this.preInitArray.push(y),!0}x(){if(null!==this._x)return this._x;throw new Error('init error')}y(){if(null!==this._y)return this._y;throw new Error('init error')}initIncDec(t,i){for(let e=0;e<this.preInitArray.length;e++){const s=this.preInitArray[e];this.initIncDecX(s,t),this.initIncDecY(s,i)}}initIncDecX(t,i){const e=S(t.fromLocItem,i,this.canvasWidth),s=S(t.toLocItem,i,this.canvasWidth);if(e<s){let i=this.newIncrement(t.timeFrom,t.timeTo,e,s);this.animationsX.push(i)}else if(s<e){let i=this.newDecrement(t.timeFrom,t.timeTo,e,s);this.animationsX.push(i)}else if(s==e){let i=new y(t.timeFrom,t.timeTo,e);this.animationsX.push(i)}}initIncDecY(t,i){const e=H(t.fromLocItem,i,this.canvasHeight),s=H(t.toLocItem,i,this.canvasHeight);if(e<s){let i=this.newIncrement(t.timeFrom,t.timeTo,e,s);this.animationsY.push(i)}else if(s<e){let i=this.newDecrement(t.timeFrom,t.timeTo,e,s);this.animationsY.push(i)}else if(s==e){let i=new y(t.timeFrom,t.timeTo,e);this.animationsY.push(i)}}runAnimationsX(t){for(let i=0;i<this.animationsX.length;i++){const e=this.animationsX[i];e.update(t);let s=e.value();null!=s&&(this._x=s)}}runGoto(t){if(null==this.compWidth)throw new Error('init error');if(null==this.compHeight)throw new Error('init error');for(let i=0;i<this.gotoArray.length;i++){const e=this.gotoArray[i];1e3*e.atFrame<=t&&(this._x=S(e.gotoLocItem,this.compWidth(),this.canvasWidth),this._y=H(e.gotoLocItem,this.compHeight(),this.canvasHeight),this.gotoArray.splice(i,1))}}runAnimationsY(t){for(let i=0;i<this.animationsY.length;i++){const e=this.animationsY[i];e.update(t);let s=e.value();null!=s&&(this._y=s)}}newIncrement(t,i,e,s){return new p(t,i,e,s)}newDecrement(t,i,e,s){return new f(t,i,e,s)}wobble(){}}class A{constructor(t){this.comp=t}TinStop(t=0,i=4,e=0,s=90,h=d.Mid,n=u.Top){this.comp.goto(0,e,c.YTop,h,n),this.comp.animate(t,i,e,e,c.YTop,s,h,h,n,n)}TinBout(t=0,i=4,e=50){this.comp.goto(t,e,c.YTop,d.Mid,u.Top),this.comp.animate(t,i,e,e,c.YTop,c.YBot,d.Mid,d.Mid)}RinStop(t=0,i=4,e,s=50){this.comp.goto(0,this.comp.offScreenXOpt.XRight,s),this.comp.animate(t,i,l.XRight,e,s,s,d.Right,d.Mid)}RinLout(t=0,i=4,e=50){this.comp.goto(0,this.comp.offScreenXOpt.XRight,e),this.comp.animate(t,i,l.XRight,l.XLeft,e,e,d.Left,d.Right,u.Top,u.Top,0,-100)}LinStop(t=0,i=4,e,s=50){this.comp.goto(0,this.comp.offScreenXOpt.XLeft,s),this.comp.animate(t,i,this.comp.offScreenXOpt.XLeft,e,s,s,d.Right,d.Mid)}LinRout(t=0,i=4,e=50){this.comp.goto(0,this.comp.offScreenXOpt.XLeft,e),this.comp.animate(t,i,this.comp.offScreenXOpt.XLeft,this.comp.offScreenXOpt.XRight,e,e,d.Right,d.Mid)}BinTout(t=0,i=4,e=50){this.comp.goto(0,e,this.comp.offScreenYOpt.YBot,d.Mid,u.Top),this.comp.animate(t,i,e,e,this.comp.offScreenYOpt.YBot,this.comp.offScreenYOpt.YTop,d.Mid,d.Mid,u.Top,u.Top)}BinStop(t=0,i=4,e=50,s=50){this.comp.goto(0,e,this.comp.offScreenYOpt.YBot,d.Mid,u.Top),this.comp.animate(t,i,e,e,this.comp.offScreenYOpt.YBot,s,d.Mid,d.Mid,u.Top,u.Top)}}class L extends class{constructor(){this.version='0_0_16',this.alwaysOn=!1,this.xAlign=d,this.yAlign=u,this.offScreenXOpt=l,this.offScreenYOpt=c,this.duration=0,this.insertTimeInVid=0,this.drawLayer=g.MiddleGround,this.id=Math.random().toString(36).slice(2),this.style=new w,this.loc=new k,this.canvasWidth=null,this.canvasHeight=null,this.selected=!1,this.visible=!0,this.shadowColor='grey',this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0,this.colorBoundingRectangle='black'}}{constructor(){super(),this.charsWidth=null,this.aniPreset=new A(this)}init(t){return this.canvasWidth=t.canvasWidth(),this.canvasHeight=t.canvasHeight(),this.loc.init(this.width.bind(this),this.height.bind(this),t.canvasWidth(),t.canvasHeight()),!0}width(){return 0}height(){return 0}update(t,i){return this.loc.update(t),!0}draw(t){return!0}checkCollision(t,i,e){return!1}shadowsOff(){this.style.shadowBlur=0,this.style.shadowOffsetX=0,this.style.shadowOffsetY=0}setShadow(t=8,i=10,e=10,s='grey'){this.style.shadowBlur=t,this.style.shadowOffsetX=i,this.style.shadowOffsetY=e,this.style.shadowColor=s}shadowsOn(){this.style.shadowBlur=8,this.style.shadowOffsetX=10,this.style.shadowOffsetY=10,this.style.shadowColor='grey'}getEndTime(t=!0){let i=this.insertTimeInVid+this.duration;return t?1e3*i:i}getStartTime(t=!0){return t?1e3*this.insertTimeInVid:this.insertTimeInVid}setStartTime(t){return this.insertTimeInVid=t,this.insertTimeInVid}goto(t,i,e,s=d.Left,h=u.Top,n=0,r=0){return this.loc.goto(t,i,e,s,h,n,r)}animate(t,i,e,s,h,n,r=d.Left,a=d.Left,o=u.Top,l=u.Top,c=0,m=0,g=0,w=0){return this.loc.animate(t,i,e,s,h,n,r,a,o,l,c,m,g,w)}x(){return this.loc.x()}y(){return this.loc.y()}}class C extends L{constructor(t='grey',i=10,e=10){super(),this.fontSize=12,this.cellWidthPerc=10,this.cellHeightPerc=10,this.colorHorizontalLines='grey',this.colorVerticalLines='grey',this.colorNumbers='black',this.showNumbers=!0,this.showHorizontalLines=!0,this.showVerticalLines=!0,this.lineWidthVertical=1,this.lineWidthHorizontal=1,this.lineDash=[],this.drawLayer=g.BackGround}draw(t){return this.draw_horizontal(t),this.draw_vertical(t),!0}draw_horizontal(t){let i=0,e=t.canvasWidth(),s=t.canvasHeight(),h=0+e;do{this.style.strokeStyle=this.colorHorizontalLines,this.style.lineDash=this.lineDash,this.style.lineWidth=this.lineWidthHorizontal,t.drawLine(0,i,h,i,this.style),1==this.showNumbers&&(this.style.strokeStyle=this.colorNumbers,this.drawText(t,Math.ceil(i),4,i+4)),i+=t.canvasHeight()/100*this.cellHeightPerc}while(s>i)}draw_vertical(t){let i=0,e=t.canvasWidth(),s=0+t.canvasHeight();do{this.style.strokeStyle=this.colorVerticalLines,this.style.lineWidth=this.lineWidthVertical,this.style.lineDash=this.lineDash,t.drawLine(i,0,i,s,this.style),1==this.showNumbers&&(this.style.strokeStyle=this.colorNumbers,this.drawText(t,Math.ceil(i),i+4,2)),i+=t.canvasWidth()/100*this.cellWidthPerc}while(e>i)}drawText(t,i,e,s){this.style.fontSize=this.fontSize,this.style.strokeStyle=this.colorNumbers,this.style.fillStyle=this.colorNumbers,t.drawText(i.toString(),e+this.lineWidthVertical-2,s+this.lineWidthHorizontal,this.style)}}class E extends L{constructor(t='#000000'){super(),this.lineWidth=new V(1),this.dynWidth=new V(10),this.dynHeight=new V(10),this.color=t}init(t){return super.init(t),this.dynWidth.init(this.width.bind(this),this.height.bind(this),t.canvasWidth(),t.canvasHeight()),this.dynHeight.init(this.width.bind(this),this.height.bind(this),t.canvasWidth(),t.canvasHeight()),this.lineWidth.init(this.width.bind(this),this.height.bind(this),t.canvasWidth(),t.canvasHeight()),!0}update(t,i){return super.update(t,i),this.lineWidth.update(t),this.dynWidth.update(t),this.dynHeight.update(t),!0}width(){if(null!==this.canvasWidth)return Math.ceil(this.canvasWidth/100*this.dynWidth.value());throw new Error('the component is not initialized yet')}height(){if(null!==this.canvasHeight)return Math.ceil(this.canvasHeight/100*this.dynHeight.value());throw new Error('the component is not initialized yet')}draw(t){return this.style.fillStyle=this.color,this.style.strokeStyle=this.color,this.style.lineWidth=this.lineWidth.value(),t.drawRect(this.loc.x(),this.loc.y(),this.width(),this.height(),this.style),!0}}class I extends L{constructor(t='#000000'){super(),this.color=t,this.trueWidth=0,this.dynHeight=new V(10),this.dynWidth=new V(10)}init(t){return super.init(t),this.dynWidth.init(this.width.bind(this),this.height.bind(this),t.canvasWidth(),t.canvasHeight()),this.dynHeight.init(this.width.bind(this),this.height.bind(this),t.canvasWidth(),t.canvasHeight()),!0}update(t,i){return super.update(t,i),this.dynWidth.update(t),this.dynHeight.update(t),!0}width(){if(null!==this.canvasWidth)return Math.ceil(this.canvasWidth/100*this.dynWidth.value());throw new Error('the component is not initialized yet')}height(){if(null!==this.canvasHeight)return Math.ceil(this.canvasHeight/100*this.dynHeight.value());throw new Error('the component is not initialized yet')}draw(t){return this.style.fillStyle=this.color,this.style.strokeStyle=this.color,t.drawFillRect(this.loc.x(),this.loc.y(),this.width(),this.height(),this.style),!0}}class z extends L{constructor(t=100,i=100,e){super(),this.cellWidth=t,this.cellHeight=i,this.colorHorizontalLines=e,this.colorVerticalLines=e,this.drawLayer=g.BackGround,this.fontSize=8,this.colorNumbers='grey',this.flagDrawNumbers=!1,this.flagDrawHorizontal=!1,this.flagDrawVertical=!1,this.lineWidthVertical=1,this.lineWidthHorizontal=1,this.lineDash=[]}draw(t){return this.draw_horizontal(t),this.draw_vertical(t),!0}draw_horizontal(t){let i=0,e=t.canvasWidth(),s=t.canvasHeight(),h=0+e;do{this.style.strokeStyle=this.colorHorizontalLines,this.style.lineDash=this.lineDash,this.style.lineWidth=this.lineWidthHorizontal,t.drawLine(0,i,h,i,this.style),1==this.flagDrawNumbers&&(this.style.strokeStyle=this.colorNumbers,this.drawText(t,i,0,i)),i+=this.cellHeight}while(s>i)}draw_vertical(t){let i=0,e=t.canvasWidth(),s=0+t.canvasHeight();do{this.style.strokeStyle=this.colorVerticalLines,this.style.lineWidth=this.lineWidthVertical,this.style.lineDash=this.lineDash,t.drawLine(i,0,i,s,this.style),1==this.flagDrawNumbers&&(this.style.strokeStyle=this.colorNumbers,this.drawText(t,i,i,0)),i+=this.cellWidth}while(e>i)}drawText(t,i,e,s){this.style.fontSize=this.fontSize,this.style.strokeStyle=this.colorNumbers,this.style.fillStyle=this.colorNumbers,t.drawText(i.toString(),e+this.lineWidthVertical-2,s+this.lineWidthHorizontal,this.style)}}class O{constructor(){}static contentWidth(t,i,e,s,h){return t.charsWidth(i.substring(0,e),s,h)}static drawBorder(t,i,e,s,h,n,r){return!(h<=0)&&(i.lineWidth=h,t.drawRect(e-Math.ceil(h/2),s-Math.ceil(h/2),n+h,r+h,i),!0)}static drawBg(t,i,e,s,h,n){return t.drawFillRect(e,s,h,n,i),!0}static drawContent(t,i,e,s,h,n,r,a,o){if(0==o)return!1;t.drawText(e.substring(0,n),s+r,h+a,i)}}class R{constructor(t=0,i=10,e,s){this.from=t,this.to=i,this.startValue=e,this.endValue=s}}class V{constructor(t=0){this._ret_value=t,this._set_value=null,this.preInitIncDecArray=[],this.animations=[],this.compWidth=null,this.compHeight=null,this.canvasWidth=null,this.canvasHeight=null}init(t,i,e,s){return this.compWidth=t,this.compHeight=i,this.canvasWidth=e,this.canvasHeight=s,this.runSetValue(),this.initIncDec(),!0}update(t){return this.runSetValue(),this.runAnimations(t),!0}value(){return this._ret_value}runSetValue(){null!==this._set_value&&(this._ret_value=this._set_value,this._set_value=null)}setValue(t){this._set_value=t}animate(t=0,i=10,e=0,s=100){let h=new R(t,i,e,s);this.preInitIncDecArray.push(h)}initIncDec(){for(let t=0;t<this.preInitIncDecArray.length;t++){const i=this.preInitIncDecArray[t];i.startValue<i.endValue?this.newIncrement(i.from,i.to,i.startValue,i.endValue):this.newDecrement(i.from,i.to,i.startValue,i.endValue)}}runAnimations(t){for(let i=0;i<this.animations.length;i++){const e=this.animations[i];e.update(t);let s=e.value();null!=s&&(this._ret_value=s)}}notInitError(){throw new Error('XAxis is not initialized yet')}checkNonNull(t){let i=0;return null==t?this.notInitError():i=t,i}newIncrement(t,i,e,s){let h=new p(t,i,e,s);this.animations.push(h)}newDecrement(t,i,e,s){let h=new f(t,i,e,s);this.animations.push(h)}}class X extends L{constructor(t='',i='#000000'){super(),this.content=t,this.fontSize=50,this.fontFamily=o.Calibri,this.paddingLeft=new V(0),this.paddingRight=new V(0),this.paddingTop=new V(0),this.paddingBottom=new V(0),this.border=new V(0),this.colorBorder=i,this.colorBg=function(t,i){var e=!1;'#'==t[0]&&(t=t.slice(1),e=!0);var s=parseInt(t,16),h=(s>>16)+i;h>255?h=255:h<0&&(h=0);var n=(s>>8&255)+i;n>255?n=255:n<0&&(n=0);var r=(255&s)+i;return r>255?r=255:r<0&&(r=0),(e?'#':'')+(r|n<<8|h<<16).toString(16)}(i,225),this.color=i,this.showContent=!0,this.showBg=!1,this.showTextShadow=!1,this.showBgShadow=!1,this.showBorderShadow=!1,this.maxDisplayChars=200,this.drawLayer=g.MiddleGround}init(t){return super.init(t),this.paddingBottom.init(this.width.bind(this),this.height.bind(this),t.canvasWidth(),t.canvasHeight()),this.paddingLeft.init(this.width.bind(this),this.height.bind(this),t.canvasWidth(),t.canvasHeight()),this.paddingRight.init(this.width.bind(this),this.height.bind(this),t.canvasWidth(),t.canvasHeight()),this.paddingTop.init(this.width.bind(this),this.height.bind(this),t.canvasWidth(),t.canvasHeight()),this.border.init(this.width.bind(this),this.height.bind(this),t.canvasWidth(),t.canvasHeight()),!0}update(t,i){return super.update(t,i),this.paddingBottom.update(t),this.paddingLeft.update(t),this.paddingRight.update(t),this.paddingTop.update(t),this.border.update(t),!0}height(){if(null==this.charsWidth)throw new Error('init error');return this.charsWidth('W',this.style.fontSize,this.style.fontFamily)+(this.paddingTop.value()+this.paddingBottom.value())}width(){if(null==this.charsWidth)throw new Error('init error');return this.charsWidth(this.content.substring(0,this.maxDisplayChars),this.fontSize,this.fontFamily)+(this.paddingLeft.value()+this.paddingRight.value())}draw(t){return this.style.fillStyle=this.colorBg,this.style.strokeStyle=this.colorBg,O.drawBg(t,this.style,this.loc.x(),this.loc.y(),this.width(),this.height()),this.style.fillStyle=this.colorBorder,this.style.strokeStyle=this.colorBorder,O.drawBorder(t,this.style,this.loc.x(),this.loc.y(),this.border.value(),this.width(),this.height()),this.style.fillStyle=this.color,this.style.strokeStyle=this.color,this.style.fontSize=this.fontSize,this.style.fontFamily=this.fontFamily,O.drawContent(t,this.style,this.content,this.loc.x(),this.loc.y(),this.maxDisplayChars,this.paddingLeft.value(),this.paddingTop.value(),this.showContent),!0}}class F extends X{constructor(t='',i='#000000'){super(t,i),this.maxHeight=20,this.dynWidth=new V(10),this.useDynWidth=!0,this.useMaxHeight=!1}init(t){return super.init(t),this.dynWidth.init(this.width.bind(this),this.height.bind(this),t.canvasWidth(),t.canvasHeight()),!0}update(t,i){return this.dynWidth.update(t),1==this.useDynWidth&&this.dynamicFontSize(i),1==this.useMaxHeight&&this.shrinkToFitMaxHeight(i),super.update(t,i),!0}dynamicFontSize(t){const i=this.reqWdInPixForFontSize(t);this.style.fontSize=this.fontSize;for(let e=1;e<900;e++){if(t.charsWidth(this.content,e,this.style.fontFamily)>=i)return this.fontSize=e,this.style.fontSize=e,this.fontSize}return null}reqWdInPixForFontSize(t){return t.canvasWidth()/100*this.dynWidth.value()-(this.paddingLeft.value()+this.paddingRight.value())}shrinkToFitMaxHeight(t){if(null==this.charsWidth)throw new Error('init error');const i=t.canvasHeight()/100*this.maxHeight-(this.paddingTop.value()+this.paddingBottom.value());if(this.charsWidth('W',this.style.fontSize,this.style.fontFamily)<i)return!0;for(let e=300;e>0;e--){if(t.charsWidth('W',e,this.style.fontFamily)<=i)return this.fontSize=e,this.style.fontSize=e,!0}return!0}}class Y extends F{constructor(t='#008000'){super('',t),this.border.setValue(4)}init(t){return super.init(t),!0}update(t,i){return super.update(t,i),this.content='sec:'+Math.ceil(t/1e3).toString(),!0}}class N{constructor(t=0,i=0){this.x=t,this.y=i}}class G extends L{constructor(t=10,i='#008000',e=1){super(),this.drawLayer=g.BackGround,this.count=t,this.color=i,this.size=20,this.delay=60*e,this.delayCounter=this.delay,this.xy=[]}draw(t){if(this.delayCounter<=this.delay){this.delayCounter+=1,this.style.fillStyle=this.color,this.style.strokeStyle=this.color;for(let i=0;i<this.xy.length;i++)t.drawCircle(this.xy[i].x,this.xy[i].y,this.size,!0,0,2*Math.PI,this.style);return!1}this.xy.length=0;for(let i=0;i<this.count;i++){let i=new N(Math.ceil(Math.random()*t.canvasWidth()),Math.ceil(Math.random()*t.canvasHeight()));this.xy.push(i)}return this.delayCounter=0,!0}}class P extends L{constructor(t,i=10,e=10){if(super(),this.dynWidth=new V(i),this.dynHeight=new V(e),this.img=new Image,this.img.src=t,null==this.img)throw new Error('image could not be found');document.body.appendChild(this.img),this.orignalWidth=this.img.clientWidth,this.orignalHeight=this.img.clientHeight,this.img.style.display='none',this.drawLayer=g.MiddleGround}init(t){if(super.init(t),this.dynWidth.init(this.width.bind(this),this.height.bind(this),t.canvasWidth(),t.canvasHeight()),this.dynHeight.init(this.width.bind(this),this.height.bind(this),t.canvasWidth(),t.canvasHeight()),null==this.canvasWidth)throw new Error('init error');if(null==this.canvasHeight)throw new Error('init error');const i=(this.dynWidth.value()*(this.canvasWidth/100)).toString();this.img.setAttribute('width',i);const e=(this.dynHeight.value()*(this.canvasHeight/100)).toString();return this.img.setAttribute('height',e),!0}update(t,i){return super.update(t,i),this.dynWidth.update(t),this.dynHeight.update(t),!0}width(){if(null==this.canvasWidth)throw new Error('init error');return this.canvasWidth/100*this.dynWidth.value()}height(){if(null==this.canvasHeight)throw new Error('init error');return this.canvasHeight/100*this.dynHeight.value()}draw(t){return t.drawImage(this.img,this.loc.x(),this.loc.y(),this.width(),this.height()),!0}resize(t,i,e,s,h,n){this.dynWidth.animate(t,i,e,s),this.dynHeight.animate(t,i,h,n)}}class q{static pic(t,i=10,e=10){let s=new P(t,i,e);return s.goto(0,0,0,s.xAlign.Left,s.yAlign.Top),s}static staticGrid(t=100,i=100,e){let s=new z(t,i,e);return s.goto(0,0,0,s.xAlign.Left,s.yAlign.Top),s}static grid(t='grey',i=10,e=10){let s=new C(t,i,e);return s.goto(0,0,0,s.xAlign.Left,s.yAlign.Top),s}static rect(t='#000000'){let i=new E(t);return i.goto(0,0,0,i.xAlign.Left,i.yAlign.Top),i}static fillRect(t='#000000'){let i=new I(t);return i.goto(0,0,0,i.xAlign.Left,i.yAlign.Top),i}static frameCounter(t='#000000'){let i=new Y(t);return i.goto(0,0,0,i.xAlign.Left,i.yAlign.Top),i}static bgCircles(t=10,i='#008000',e=1){let s=new G(t,i,e);return s.goto(0,0,0,s.xAlign.Left,s.yAlign.Top),s}static text(t='',i='#000000'){let e=new F(t,i);return e.goto(0,0,0,e.xAlign.Left,e.yAlign.Top),e}}class U{static jumbotron(t=1,i=2,e='Jumbotron',s='#000000'){return function(t=1,i=2,e='Jumbotron',s='#000000'){const h=q.text(e,s);return h.dynWidth.setValue(90),h.goto(0,50,h.offScreenYOpt.YTop,h.xAlign.Mid,h.yAlign.Mid),h.animate(t,i,50,50,h.offScreenYOpt.YTop,50,h.xAlign.Mid,h.xAlign.Mid,h.yAlign.Mid,h.yAlign.Mid),h}(t,i,e,s)}}function Z(t){let i=t/16;return Math.ceil(9*i)}class J{constructor(t,i=80){this.canvasId=t,this.canvas=function(t='bilza'){let i=document.getElementById(t);if(null==i){let i=document.createElement('canvas');if(document.getElementsByTagName('body')[0].appendChild(i),i.id=t,i.style.position='static',null==i)throw new Error('canvas not found');return i}{let e=i;if(e.id=t,e.style.position='static',null==e)throw new Error('canvas not found');return e}}(this.canvasId),this.dynamicCanvas(i,null),this.ctx=this.getNewCtx()}getNewCtx(){let t=this.canvas.getContext('2d');if(null==t)throw new Error('could not obtain drawing context');return t}drawBackground(t='blue'){return this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle}canvasWidth(){return this.canvas.width}canvasHeight(){return this.canvas.height}quadraticCurveTo(t,i,e,s){this.commitCtxData(s),this.beginPath(),this.moveTo(t.x,t.y),this.ctx.quadraticCurveTo(e.x,e.y,i.x,i.y),this.stroke()}restore(){this.ctx.restore()}save(){this.ctx.save()}drawImage(t,i,e,s,h){this.ctx.drawImage(t,i,e,s,h)}clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}charsWidth(t,i,e){this.ctx.save(),this.setFont(i,e);let s=this.ctx.measureText(t).width;return this.ctx.restore(),Math.ceil(s)}textWidth(t,i){this.ctx.save(),this.commitCtxData(i);let e=this.ctx.measureText(t).width;return this.ctx.restore(),Math.ceil(e)}drawLine(t,i,e,s,h){this.commitCtxData(h),this.ctx.beginPath(),this.ctx.moveTo(t,i),this.ctx.lineTo(e,s),this.ctx.stroke()}line(t,i,e,s){this.ctx.beginPath(),this.ctx.moveTo(t,i),this.ctx.lineTo(e,s),this.ctx.stroke()}beginPath(){this.ctx.beginPath()}closePath(){this.ctx.closePath()}moveTo(t,i){this.ctx.moveTo(t,i)}lineTo(t,i,e){this.commitCtxData(e),this.ctx.lineTo(t,i)}fill(t){this.commitCtxData(t),this.ctx.fill()}stroke(){this.ctx.stroke()}drawRect(t,i,e,s,h){this.commitCtxData(h),this.ctx.beginPath(),this.ctx.rect(t,i,e,s),this.ctx.stroke()}drawFillRect(t,i,e,s,h){this.commitCtxData(h),this.ctx.fillRect(t,i,e,s)}arcTo(t,i,e,s=20){this.commitCtxData(e),this.ctx.arcTo(t.x,t.y,i.x,i.y,s)}drawCircle(t=0,i=0,e=25,s=!1,h=0,n=2*Math.PI,r){this.commitCtxData(r),this.ctx.beginPath(),this.ctx.arc(t,i,e,h,n,!1),1==s&&this.ctx.fill(),this.ctx.stroke()}textBaseline(t){switch(t){case'top':this.ctx.textBaseline='top';break;case'middle':case'bottom':this.ctx.textBaseline='middle';break;case'alphabetic':this.ctx.textBaseline='alphabetic';break;case'hanging':this.ctx.textBaseline='hanging'}}drawText(t,i,e,s){this.commitCtxData(s),this.ctx.textBaseline='top',this.ctx.fillText(t,i,e)}drawIcon(t,i,e,s){this.commitCtxData(s),this.ctx.textBaseline='top',this.ctx.fillText(String.fromCharCode(t),i,e)}drawTextstroke(t,i,e,s){this.commitCtxData(s),this.ctx.textBaseline='top',this.ctx.strokeText(t,i,e)}commitCtxData(t){null!==t.lineCap&&(this.ctx.lineCap='round'),null!==t.globalAlpha&&(this.ctx.globalAlpha=t.globalAlpha),null!==t.shadowBlur&&(this.ctx.shadowBlur=t.shadowBlur),null!==t.shadowOffsetY&&(this.ctx.shadowOffsetY=t.shadowOffsetY),null!==t.shadowOffsetX&&(this.ctx.shadowOffsetX=t.shadowOffsetX),null!==t.lineWidth&&(this.ctx.lineWidth=t.lineWidth),null!==t.shadowColor&&(this.ctx.shadowColor=t.shadowColor),null!==t.strokeStyle&&(this.ctx.strokeStyle=t.strokeStyle),null!==t.fillStyle&&(this.ctx.fillStyle=t.fillStyle),null!==t.lineDash&&this.ctx.setLineDash(t.lineDash),this.setFont(t.fontSize,t.fontFamily)}setFont(t,i){let e=`${t}px ${i}`;this.ctx.font=e}xPerc(t){let i=this.setBwZeroNhundred(t);return Math.ceil(this.canvas.width/100*i)}yPerc(t){let i=this.setBwZeroNhundred(t);return this.canvas.height/100*i}setBwZeroNhundred(t){return t<0?0:t>100?100:t}dynCanvasWidth(t=80){return window.innerWidth/100*T(t)}dynCanvasHeight(t,i=null){return null!==i?window.innerHeight/100*T(i):Z(t)}resizeCanvas(t,i){this.canvas.width=t,this.canvas.height=i??Z(t)}dynamicCanvas(t=95,i=null){let e=this.dynCanvasWidth(t);return this.resizeCanvas(e,this.dynCanvasHeight(e,i)),!0}}(t=>{t.BackGround='BACKGROUND',t.MiddleGround='MIDDLEGROUND',t.ForeGround='FOREGROUND'})(g||(g={}));class ${static hdg(t='',i='#008000',e=30,s=20,h=12){let n=new F(t,i);return n.useDynWidth=!0,n.useMaxHeight=!0,n.paddingLeft.setValue(h),n.paddingRight.setValue(h),n.paddingTop.setValue(h),n.paddingBottom.setValue(h),n.maxHeight=s,n.dynWidth.setValue(e),n.showBg=!0,n.border.setValue(2),n}}export{V as AnimatedNoBase,L as BaseComponent,r as Bilza,q as CompFactory,g as DrawLayer,o as FontFamily,l as OffScreenXOpt,c as OffScreenYOpt,J as Pack,U as PresetComps,w as Style,$ as TextTempl,d as XAlignment,u as YAlignment,r as default};
