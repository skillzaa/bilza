var t,i,e,s,r,h;(t=>{t.SystemBackGround='SYSTEMBACKGROUND',t.BackGround='BACKGROUND',t.MiddleGround='MIDDLEGROUND',t.ForeGround='FOREGROUND'})(t||(t={})),(t=>{t.Round='round',t.Butt='butt',t.Square='square'})(i||(i={})),(t=>{t.Arial='Arial',t.ArialBlack='Arial Black',t.Verdana='Verdana',t.Tahoma='Tahoma',t.Impact='Impact',t.Times='Times',t.Helvetica='Helvetica',t.TimesNewRoman='Times New Roman',t.Didot='Didot',t.Calibri='Calibri',t.Georgia='Georgia',t.AmericanTypewriter='American Typewriter',t.Courier='Courier',t.CourierNew='Courier New',t.LucidaConsole='Lucida Console',t.Monaco='Monaco',t.BradleyHand='Bradley Hand',t.BrushScriptMT='Brush Script MT',t.BrushScript='Brush Script',t.Luminari='Luminari'})(e||(e={}));class n{constructor(){this.fontSize=25,this.fontFamily=e.Luminari,this.fillStyle='green',this.strokeStyle='red',this.lineWidth=2,this.shadowColor='black',this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0,this.opacity=1,this.lineCap=i.Round,this.lineDash=[]}merge(t){null!==t.lineCap&&(this.lineCap=t.lineCap),null!==t.opacity&&(this.opacity=t.opacity),null!==t.shadowBlur&&(this.shadowBlur=t.shadowBlur),null!==t.shadowOffsetY&&(this.shadowOffsetY=t.shadowOffsetY),null!==t.shadowOffsetX&&(this.shadowOffsetX=t.shadowOffsetX),null!==t.lineWidth&&(this.lineWidth=t.lineWidth),null!==t.shadowColor&&(this.shadowColor=t.shadowColor),null!==t.strokeStyle&&(this.strokeStyle=t.strokeStyle),null!==t.fillStyle&&(this.fillStyle=t.fillStyle),null!==t.fontSize&&(this.fontSize=t.fontSize),null!==t.fontFamily&&(this.fontFamily=t.fontFamily),null!==t.lineDash&&(this.lineDash=t.lineDash)}}(t=>{t.Left='LEFT',t.Right='RIGHT',t.Mid='MID'})(s||(s={})),(t=>{t.Top='TOP',t.Mid='MID',t.Bot='BOT'})(r||(r={}));class a{constructor(t){this._value=t,this.filters=[]}update(t){return this.runFilters(t),!0}value(){return this._value}set(t){return this._value=t,this._value}runFilters(t){for(let i=0;i<this.filters.length;i++){const e=this.filters[i];e.update(t);let s=e.value();null!=s&&(this._value=s)}}}(t=>{t.Waiting='WAITING',t.Running='RUNNING',t.Exhausted='EXHAUSTED'})(h||(h={}));class l{constructor(t,i,e,s){if(t<0||i<0)throw new Error('time can not be negative');if(i<=t)throw new Error('end Time can not be equal or smaller than start time');if(e>=s)throw new Error('start value can not be equal to or larger than end value in an increment operation');this.startTime=1e3*t,this.endTime=1e3*i,this.startValue=e,this.endValue=s,this.timeDiff=Math.abs(this.endTime-this.startTime),this.Xdiff=Math.abs(this.startValue-this.endValue),this._ret_val=null,this.filterState=h.Waiting}update(t){if(this.setState(t),this.filterState==h.Running){const i=Math.ceil(t-this.startTime)/this.timeDiff*100,e=this.Xdiff/100*i;this._ret_val=this.startValue+e}else this._ret_val=null;return this.filterState}setState(t){return t<this.startTime?this.filterState=h.Waiting:t>=this.startTime&&t<=this.endTime?this.filterState=h.Running:t>this.endTime&&(this.filterState=h.Exhausted),this.filterState}value(){return this._ret_val}}class o{constructor(t,i,e,s){if(t<0||i<0)throw new Error('time can not be negative');if(i<=t)throw new Error('end Time can not be equal or smaller than start time');if(e<=s)throw new Error('end value can not be equal to or larger than start value in an decrement operation');if(e<0)throw new Error('start value can not be less than zero in decrement operation');this.startTime=1e3*t,this.endTime=1e3*i,this.startValue=e,this.endValue=s,this.timeDiff=Math.abs(this.startTime-this.endTime),this.Xdiff=Math.abs(this.startValue-this.endValue),this._ret_val=null,this.filterState=h.Waiting}update(t){if(this.setState(t),this.filterState==h.Running){const i=Math.ceil(t-this.startTime)/this.timeDiff*100,e=Math.abs(100-i),s=this.Xdiff/100*e;this._ret_val=Math.ceil(this.endValue+s)}else this._ret_val=null;return this.filterState}setState(t){return t<this.startTime?this.filterState=h.Waiting:t>=this.startTime&&t<=this.endTime?this.filterState=h.Running:t>this.endTime&&(this.filterState=h.Exhausted),this.filterState}value(){return this._ret_val}}class u{constructor(t,i,e=0){if(t<0||i<0)throw new Error('time can not be negative');if(i<=t)throw new Error('end Time can not be equal or smaller than start time');this.skipXframes=e,this.skipframesCounter=0,this.startTime=1e3*t,this.endTime=1e3*i,this._ret_val=null,this.filterState=h.Waiting}update(t){return t<this.startTime?this.filterState=h.Waiting:t>=this.startTime&&t<=this.endTime?this.filterState=h.Running:t>this.endTime&&(this.filterState=h.Exhausted),this.filterState}value(){return this._ret_val}okToGo(){return this.filterState==h.Running&&(this.skipframesCounter<this.skipXframes?(this.skipframesCounter+=1,!1):(this.skipframesCounter=0,!0))}xFramesSkipped(){return this.skipframesCounter<this.skipXframes?(this.skipframesCounter+=1,!1):(this.skipframesCounter=0,!0)}isRunning(){return this.filterState==h.Running}}class d extends u{constructor(t,i,e=1,s=10,r=0){super(t,i),this.offset=s,this.seed=e,this.delay=r,this.delayCounter=0,this._ret_val=null}update(t){return super.update(t),this.filterState==h.Running?this.delayCounter>=this.delay?(this.delayCounter=0,Math.random()>.5?this._ret_val=this.seed+this.offset:this._ret_val=this.seed-this.offset):this.delayCounter+=1:this._ret_val=null,this.filterState}}class c extends u{constructor(t,i,e=1,s=10,r=0){super(t,i),this.pointOne=e,this.pointTwo=s,this.skipFrames=r,this.delayCounter=0,this._ret_val=null}update(t){return this.filterState==h.Running?this.delayCounter>=this.skipFrames?(this.delayCounter=0,this._ret_val!==this.pointOne?this._ret_val=this.pointOne:this._ret_val=this.pointTwo):this.delayCounter+=1:this._ret_val=null,this.filterState}}class w extends u{constructor(t,i=10){super(t,t+3e3),this.theValue=i,this.usedOnce=!1,this._ret_val=null}update(t){return super.update(t),this.filterState==h.Running&&0==this.usedOnce?(this._ret_val=this.theValue,this.usedOnce=!0):this._ret_val=null,this.filterState}}class p extends u{constructor(t,i,e=1,s=10,r=0){super(t,i),this.min=e,this.max=s,this.everyXFrame=r,this.delayCounter=0,this._ret_val=null}update(t){return super.update(t),this.filterState==h.Running?this.delayCounter>=this.everyXFrame?(this.delayCounter=0,this._ret_val=Math.floor(Math.random()*(this.max-this.min+1)+this.min)):this.delayCounter+=1:this._ret_val=null,this.filterState}}class y extends u{constructor(t,i,e){super(t,i),this.constantValue=e,this._ret_val=null}update(t){return this.update(t)==h.Running?this._ret_val=this.constantValue:this._ret_val=null,this.filterState}}class g extends u{constructor(t,i,e=1,s=10,r=1){super(t,i),this.startValue=e,this.endValue=s,this.addSub=!0,this.speed=r,this._ret_val=null}update(t){if(super.update(t),this.filterState==h.Running){if(null==this._ret_val)return this._ret_val=this.startValue,this.filterState;this._ret_val<this.startValue?this.addSub=!0:this._ret_val>this.endValue&&(this.addSub=!1),1==this.addSub?this._ret_val+=this.speed:this._ret_val-=this.speed}return this.filterState}}class m extends a{constructor(t){super(t)}animate(t,i,e,s){if(e<s){let r=new l(t,i,e,s);this.filters.push(r)}else if(e>s){let r=new o(t,i,e,s);this.filters.push(r)}else if(e==s){let s=new y(t,i,e);this.filters.push(s)}}vibrate(t,i,e=10,s=10,r=0){const h=new d(t,i,e,s,r);this.filters.push(h)}jumpBetween(t,i,e=1,s=10,r=0){const h=new c(t,i,e,s,r);this.filters.push(h)}random(t,i,e=0,s=100,r=0){const h=new p(t,i,e,s,r);this.filters.push(h)}goto(t,i=0){const e=new w(t,i);this.filters.push(e)}oscillate(t,i,e=1,s=10,r=1){const h=new g(t,i,e,s,r);this.filters.push(h)}}class f{constructor(t,i){this.frame=t,this.theValue=i}}class v{constructor(t,i,e,s){this.startTime=t,this.endTime=i,this.startValue=e,this.endValue=s}}class x{constructor(t,i,e,s,r){this.from=t,this.to=i,this.seed=e,this.offset=s,this.delay=r}}class S{constructor(t,i,e=1,s=10,r=0){this.min=1,this.max=10,this.skipFrames=0,this.startTimeSec=t,this.endTimeSec=i,this.min=e,this.max=s,this.skipFrames=r}}class T{constructor(t,i,e=1,s=10,r=0){this.startTimeSec=t,this.endTimeSec=i,this.pointOne=e,this.pointTwo=s,this.skipFrames=r}}class _ extends class{constructor(t=0){this._XorY=new m(t),this.usePercentages=!0,this._initValue=t,this.preInitRandoms=[],this.preInitGotos=[],this.preInitAnimates=[],this.preInitVibrates=[],this.preInitJumpBetweens=[]}setInitValue(t){this._initValue=t}update(t){this._XorY.update(t)}value(){return this._XorY.value()}override(t){return this._XorY.set(t),this._XorY.value()}jumpBetween(t,i,e=1,s=10,r=0){const h=new T(t,i,e,s,r);this.preInitJumpBetweens.push(h)}baseJumpBetween(t,i,e=1,s=10,r=0){this._XorY.jumpBetween(t,i,e,s,r)}goto(t,i){const e=new f(t,i);this.preInitGotos.push(e)}baseGoto(t,i){this._XorY.goto(t,i)}vibrate(t,i,e,s,r){const h=new x(t,i,e,s,r);this.preInitVibrates.push(h)}baseVibrate(t,i,e,s,r){this._XorY.vibrate(t,i,e,s,r)}random(t,i,e=1,s=10,r=0){const h=new S(t,i,e,s,r);this.preInitRandoms.push(h)}baseRandom(t,i,e=1,s=10,r=0){this._XorY.random(t,i,e,s,r)}animate(t,i,e,s){const r=new v(t,i,e,s);this.preInitAnimates.push(r)}baseAnimate(t,i,e,s){this._XorY.animate(t,i,e,s)}}{constructor(t=0){super(t),this.canvasWidthHeight=null}init(t,i){this.usePercentages=t,this.canvasWidthHeight=i,this.initSetInitValue(),this.initVibrate(),this.initGoto(),this.initAnimate(),this.initRandom(),this.initJumpBetween()}set(t){if(null==this.canvasWidthHeight)throw new Error('init error : set value can not be used at compile time for properties which need canvas width or height. For such values you should use setInitValue at compile time and use "set" only at run time when the protety has been initialized');if(1==this.usePercentages){const i=this.percToPix(t);this._XorY.set(i)}else this._XorY.set(t)}initSetInitValue(){if(null==this.canvasWidthHeight)throw new Error('init error');if(1==this.usePercentages){const t=this.percToPix(this._initValue);this._XorY.set(t)}else this._XorY.set(this._initValue)}initVibrate(){if(null==this.canvasWidthHeight)throw new Error('init error');for(let t=0;t<this.preInitVibrates.length;t++){const i=this.preInitVibrates[t];let e=i.seed;1==this.usePercentages&&(e=this.percToPix(i.seed)),this.baseVibrate(i.from,i.to,e,i.offset,i.delay)}}initRandom(){if(null==this.canvasWidthHeight)throw new Error('init error');for(let t=0;t<this.preInitRandoms.length;t++){const i=this.preInitRandoms[t];let e=i.min,s=i.max;1==this.usePercentages&&(e=this.percToPix(i.min),s=this.percToPix(i.max)),this.baseRandom(i.startTimeSec,i.endTimeSec,e,s,i.skipFrames)}}initJumpBetween(){if(null==this.canvasWidthHeight)throw new Error('init error');for(let t=0;t<this.preInitJumpBetweens.length;t++){const i=this.preInitJumpBetweens[t];let e=i.pointOne,s=i.pointTwo;1==this.usePercentages&&(e=this.percToPix(i.pointOne),s=this.percToPix(i.pointTwo)),this.baseJumpBetween(i.startTimeSec,i.endTimeSec,e,s,i.skipFrames)}}initGoto(){if(null==this.canvasWidthHeight)throw new Error('init error');for(let t=0;t<this.preInitGotos.length;t++){const i=this.preInitGotos[t];let e=i.theValue;1==this.usePercentages&&(e=this.percToPix(i.theValue)),this.baseGoto(i.frame,e)}}initAnimate(){if(null==this.canvasWidthHeight)throw new Error('init error');for(let t=0;t<this.preInitAnimates.length;t++){const i=this.preInitAnimates[t];1==this.usePercentages?this.baseAnimate(i.startTime,i.endTime,this.percToPix(i.startValue),this.percToPix(i.endValue)):this.baseAnimate(i.startTime,i.endTime,i.startValue,i.endValue)}}percToPix(t){if(null==this.canvasWidthHeight)throw'init error';return this.canvasWidthHeight/100*t}}class W extends class extends class extends class extends class extends class extends class{constructor(){this.version='0.0.1',this.alwaysOn=!1,this.XAlignOpt=s,this.YAlignOpt=r,this.xAlign=this.XAlignOpt.Left,this.yAlign=this.YAlignOpt.Top,this.xRotate=this.XAlignOpt.Left,this.yRotate=this.YAlignOpt.Top,this.usePercentages=!0,this.width=new m(10),this.rotation=new m(0),this.opacity=new m(100),this.height=new m(10),this.color=new et('#000000'),this.drawLayer=t.MiddleGround,this.id=Math.random().toString(36).slice(2),this.style=new n,this.canvasWidth=null,this.canvasHeight=null,this.selected=!1,this.visible=new Q(!0)}}{constructor(){super(),this.duration=0,this.insertTimeInVid=0}getEndTime(t=!0){let i=this.insertTimeInVid+this.duration;return t?1e3*i:i}getStartTime(t=!0){return t?1e3*this.insertTimeInVid:this.insertTimeInVid}setStartTime(t){return this.insertTimeInVid=t,this.insertTimeInVid}}{constructor(){super(),this.shadowColor='grey',this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0}shadowsOff(){this.style.shadowBlur=0,this.style.shadowOffsetX=0,this.style.shadowOffsetY=0}setShadow(t=8,i=10,e=10,s='grey'){this.style.shadowBlur=t,this.style.shadowOffsetX=i,this.style.shadowOffsetY=e,this.style.shadowColor=s}shadowsOn(){this.style.shadowBlur=8,this.style.shadowOffsetX=10,this.style.shadowOffsetY=10,this.style.shadowColor='grey'}}{constructor(){super()}widthInPix(){if(null!==this.canvasWidth)return Math.ceil(this.canvasWidth/100*this.width.value());throw new Error('the component is not initialized yet')}heightInPix(){if(null!==this.canvasHeight)return Math.ceil(this.canvasHeight/100*this.height.value());throw new Error('the component is not initialized yet')}}{constructor(){super(),this.x=new _(0),this.y=new _(0),this.charsWidth=null}draw(t){return!0}random(t,i,e=1,s=100,r=1,h=100,n=60){this.x.random(t,i,e,s,n),this.y.random(t,i,r,h,n)}vibrate(t,i,e,s,r,h){this.x.vibrate(t,i,e,r,h),this.y.vibrate(t,i,s,r,h)}goto(t,i,e){return this.x.goto(t,i),this.y.goto(t,e),!0}animate(t,i,e,s,r,h){return this.x.animate(t,i,e,s),this.y.animate(t,i,r,h),!0}xAligned(){let t=this.x.value();switch(this.xAlign){case this.XAlignOpt.Left:break;case this.XAlignOpt.Mid:t-=this.widthInPix()/2;break;case this.XAlignOpt.Right:t-=this.widthInPix()}return t}yAligned(){let t=this.y.value();switch(this.yAlign){case this.YAlignOpt.Top:break;case this.YAlignOpt.Mid:t-=this.heightInPix()/2;break;case this.YAlignOpt.Bot:t-=this.heightInPix()}return t}xRotateAligned(){let t=this.xAligned();switch(this.xRotate){case this.XAlignOpt.Left:break;case this.XAlignOpt.Mid:t+=this.widthInPix()/2;break;case this.XAlignOpt.Right:t+=this.widthInPix()}return t}yRotateAligned(){let t=this.yAligned();switch(this.yRotate){case this.YAlignOpt.Top:break;case this.YAlignOpt.Mid:t+=this.heightInPix()/2;break;case this.YAlignOpt.Bot:t+=this.heightInPix()}return t}}{constructor(){super()}applyRotation(t){t.save(),t.translate(this.xRotateAligned(),this.yRotateAligned()),t.rotate(this.rotation.value()),t.translate(-this.xRotateAligned(),-this.yRotateAligned())}removeRotation(t){t.restore()}}{constructor(){super()}init(t){return this.canvasWidth=t.canvasWidth(),this.canvasHeight=t.canvasHeight(),this.x.init(this.usePercentages,this.canvasWidth),this.y.init(this.usePercentages,this.canvasHeight),!0}update(t,i){return this.x.update(t),this.y.update(t),this.visible.update(t),this.rotation.update(t),this.opacity.update(t),this.width.update(t),this.height.update(t),!0}}class k extends W{constructor(i='#efeee3'){super(),this.drawLayer=t.SystemBackGround,this.color.set(i)}init(t){return super.init(t),!0}update(t,i){return super.update(t,i),this.color.update(t),!0}widthInPix(){if(null!==this.canvasWidth)return this.canvasWidth;throw new Error('the component is not initialized yet')}heightInPix(){if(null!==this.canvasHeight)return this.canvasHeight;throw new Error('the component is not initialized yet')}draw(t){return t.drawBackground(this.color.value()),!0}}class A{constructor(){this.runningStartTimeTS=null,this._stopFlag=!0}isRunning(){return null!=this.runningStartTimeTS}shouldStop(){return this._stopFlag}stop(){return this.runningStartTimeTS=null,this._stopFlag=!0,!0}start(){return this._stopFlag=!1,this.runningStartTimeTS=(new Date).getTime(),!0}getMsDelta(){if(null==this.runningStartTimeTS)return 0;return(new Date).getTime()-this.runningStartTimeTS}}class b{constructor(){this.clearCanvasBwFrames=!0,this.loadSystemBackground=!0}}class I{constructor(){this.compArray=[]}push(t){return this.compArray.push(t),t}init(t){for(let i=0;i<this.compArray.length;i++)this.compArray[i].init(t);return!0}drawByDrawLayer(t,i,e){for(let s=0;s<this.compArray.length;s++){let r=this.compArray[s];r.drawLayer==i&&this.qualifyForDraw(r,t)&&(e.save(),r.update(t,e),r.draw(e),e.restore())}return!0}qualifyForDraw(t,i){return 0!=t.visible.value()&&(1==t.alwaysOn||t.getStartTime(!0)<=i&&t.getEndTime(!0)>i)}len(){return this.compArray.length}}class P{constructor(t,i,e){this.comps=t,this.duration=i,this.charsWidth=e}insertScene(t){const i=t.getComps();for(let e=0;e<i.length;e++){const s=i[e];if(s.getStartTime(!1)<t.getStartTime())throw new Error('The start time of a contained component in a scene can not be smaller than the start time of the scene');if(s.getEndTime(!1)>t.getEndTime())throw new Error('The end time of a contained component in a scene can not be larger than the end time of the scene');this.add(s,s.getStartTime(!1),s.duration)}}append(t,i){if(t.charsWidth=this.charsWidth,i<1||void 0===i)throw new Error('for Insert operation to succeed you need component duration greater than 0');return t.duration=i,t.setStartTime(this.duration.len(!1)),this.duration.extend(t.duration),this.comps.push(t)}add(t,i,e){if(t.charsWidth=this.charsWidth,e<1||void 0===e)throw new Error('for Add operation to succeed you need component duration greater than 0');if(t.duration=e,t.setStartTime(i),t.getStartTime(!1)>this.duration.len(!1)&&this.duration.set(t.getStartTime(!1)),t.getEndTime(!1)>this.duration.len(!1)){let i=t.getEndTime(!1)-this.duration.len(!1);this.duration.extend(i)}return this.comps.push(t)}alwaysOn(t){return t.charsWidth=this.charsWidth,t.alwaysOn=!0,this.comps.push(t)}}class C{constructor(){this._pvt_duration_val=0}len(t=!0){return t?1e3*this._pvt_duration_val:this._pvt_duration_val}extend(t){return this._pvt_duration_val+=t,this._pvt_duration_val}set(t){return this._pvt_duration_val=t,this._pvt_duration_val}}class B{constructor(t='bilza',i=70){this.pack=new K(t,i),this.comps=new I,this.duration=new C,this.lastMsDelta=0,this.soundTrackElement=null,this.soundTrack=null,this.insert=new P(this.comps,this.duration,this.pack.charsWidth.bind(this.pack)),this.stopWatch=new A,this.set=new b,this.background=new k}init(){return null!==this.soundTrack&&(this.soundTrackElement=new Audio(this.soundTrack)),1==this.set.loadSystemBackground&&this.insert.alwaysOn(this.background),this.comps.init(this.pack),!0}drawForStart(){let t=this.stopWatch.getMsDelta();return 0==this.stopWatch.shouldStop()&&window.requestAnimationFrame(this.drawForStart.bind(this)),this.lastMsDelta=t,this.draw_internal(t),!0}draw(t=0){this.init(),this.draw_internal(t)}draw_internal(i=0){if(null==this.pack)throw new Error('bilzaa is not initialized');i>=this.len(!0)&&this.stopWatch.stop(),1==this.set.clearCanvasBwFrames&&this.pack.clearCanvas(),this.comps.drawByDrawLayer(i,t.SystemBackGround,this.pack),this.comps.drawByDrawLayer(i,t.BackGround,this.pack),this.comps.drawByDrawLayer(i,t.MiddleGround,this.pack),this.comps.drawByDrawLayer(i,t.ForeGround,this.pack),this.drawEvent(i)}len(t=!0){return this.duration.len(t)}drawEvent(t){return!0}dynamicCanvas(t=95,i=null){return this.pack.dynamicCanvas(t,i),!0}start(){return null!==this.soundTrackElement&&this.soundTrackElement.play(),1!=this.stopWatch.isRunning()&&(this.stop(),this.init(),this.stopWatch.start(),window.requestAnimationFrame(this.drawForStart.bind(this)),!0)}stop(){return null!==this.soundTrackElement&&(this.soundTrackElement.pause(),this.soundTrackElement.currentTime=0),this.stopWatch.stop(),!0}resizeCanvas(t,i){this.pack.resizeCanvas(t,i)}getLastMsDelta(){return this.lastMsDelta}isRunning(){return this.stopWatch.isRunning()}}class E extends W{constructor(i='grey',e=10,s=10){super(),this.fontSize=12,this.cellWidthPerc=e,this.cellHeightPerc=s,this.colorHorizontalLines=i,this.colorVerticalLines=i,this.colorNumbers='black',this.showNumbers=!0,this.showHorizontalLines=!0,this.showVerticalLines=!0,this.lineWidthVertical=1,this.lineWidthHorizontal=1,this.lineDash=[],this.drawLayer=t.BackGround}draw(t){return this.draw_horizontal(t),this.draw_vertical(t),!0}draw_horizontal(t){let i=0,e=t.canvasWidth(),s=t.canvasHeight(),r=0+e;do{this.style.strokeStyle=this.colorHorizontalLines,this.style.opacity=this.opacity.value(),this.style.fillStyle=this.colorHorizontalLines,this.style.lineDash=this.lineDash,this.style.lineWidth=this.lineWidthHorizontal,t.drawLine(0,i,r,i,this.style),1==this.showNumbers&&(this.style.strokeStyle=this.colorNumbers,this.drawText(t,Math.ceil(i),4,i+4)),i+=t.canvasHeight()/100*this.cellHeightPerc}while(s>i)}draw_vertical(t){let i=0,e=t.canvasWidth(),s=0+t.canvasHeight();do{this.style.opacity=this.opacity.value(),this.style.strokeStyle=this.colorVerticalLines,this.style.fillStyle=this.colorVerticalLines,this.style.lineWidth=this.lineWidthVertical,this.style.lineDash=this.lineDash,t.drawLine(i,0,i,s,this.style),1==this.showNumbers&&(this.style.strokeStyle=this.colorNumbers,this.drawText(t,Math.ceil(i),i+4,2)),i+=t.canvasWidth()/100*this.cellWidthPerc}while(e>i)}drawText(t,i,e,s){this.style.fontSize=this.fontSize,this.style.strokeStyle=this.colorNumbers,this.style.fillStyle=this.colorNumbers,t.drawText(i.toString(),e+this.lineWidthVertical-2,s+this.lineWidthHorizontal,this.style)}}class R extends W{constructor(t='#000000'){super(),this.color.set(t),this.lineWidth=new m(1)}update(t,i){return super.update(t,i),this.lineWidth.update(t),!0}widthInPix(){if(null!==this.canvasWidth)return Math.ceil(this.canvasWidth/100*this.width.value());throw new Error('the component is not initialized yet')}heightInPix(){if(null!==this.canvasHeight)return Math.ceil(this.canvasHeight/100*this.height.value());throw new Error('the component is not initialized yet')}draw(t){return this.style.fillStyle=this.color.value(),this.style.strokeStyle=this.color.value(),this.style.lineWidth=this.lineWidth.value(),t.drawRect(this.xAligned(),this.yAligned(),this.widthInPix(),this.heightInPix(),this.style),!0}}class z extends W{constructor(t='#000000'){super(),this.color.set(t)}init(t){return super.init(t),!0}update(t,i){return super.update(t,i),!0}widthInPix(){if(null!==this.canvasWidth)return Math.ceil(this.canvasWidth/100*this.width.value());throw new Error('the component is not initialized yet')}heightInPix(){if(null!==this.canvasHeight)return Math.ceil(this.canvasHeight/100*this.height.value());throw new Error('the component is not initialized yet')}draw(t){return this.applyRotation(t),this.style.fillStyle=this.color.value(),this.style.opacity=this.opacity.value(),this.style.strokeStyle=this.color.value(),t.drawFillRect(this.xAligned(),this.yAligned(),this.widthInPix(),this.heightInPix(),this.style),this.removeRotation(t),this.style.opacity=1,!0}}class H extends W{constructor(i=100,e=100,s='#efe1e1'){super(),this.cellWidth=new m(i),this.cellHeight=new m(e),this.lineWidthVertical=new m(1),this.lineWidthHorizontal=new m(1),this.colorHorizontalLines=s,this.colorVerticalLines=s,this.drawLayer=t.BackGround,this.fontSize=8,this.colorNumbers='grey',this.flagDrawNumbers=!1,this.flagDrawHorizontal=!1,this.flagDrawVertical=!1,this.lineDash=[]}update(t,i){return super.update(t,i),this.cellWidth.update(t),this.cellHeight.update(t),this.lineWidthHorizontal.update(t),this.lineWidthVertical.update(t),!0}draw(t){return this.draw_horizontal(t),this.draw_vertical(t),!0}draw_horizontal(t){let i=0,e=t.canvasWidth(),s=t.canvasHeight(),r=0+e;do{this.style.opacity=this.opacity.value(),this.style.strokeStyle=this.colorHorizontalLines,this.style.lineDash=this.lineDash,this.style.lineWidth=this.lineWidthHorizontal.value(),t.drawLine(0,i,r,i,this.style),1==this.flagDrawNumbers&&(this.style.strokeStyle=this.colorNumbers,this.drawText(t,i,0,i)),i+=this.cellHeight.value()}while(s>i)}draw_vertical(t){let i=0,e=t.canvasWidth(),s=0+t.canvasHeight();do{this.style.opacity=this.opacity.value(),this.style.strokeStyle=this.colorVerticalLines,this.style.lineWidth=this.lineWidthVertical.value(),this.style.lineDash=this.lineDash,t.drawLine(i,0,i,s,this.style),1==this.flagDrawNumbers&&(this.style.strokeStyle=this.colorNumbers,this.drawText(t,i,i,0)),i+=this.cellWidth.value()}while(e>i)}drawText(t,i,e,s){this.style.opacity=this.opacity.value(),this.style.fontSize=this.fontSize,this.style.strokeStyle=this.colorNumbers,this.style.fillStyle=this.colorNumbers,t.drawText(i.toString(),e+this.lineWidthVertical.value()-2,s+this.lineWidthHorizontal.value(),this.style)}}class M extends W{constructor(i='',s='#000000'){super(),this.content=new rt(i),this.fontSize=new m(50),this.maxDisplayChars=new m(200),this.fontFamily=e.Calibri,this.color=new et(s),this.drawLayer=t.MiddleGround}update(t,i){return super.update(t,i),this.fontSize.update(t),this.content.update(t),this.color.update(t),this.maxDisplayChars.update(t),!0}heightInPix(){if(null==this.charsWidth)throw new Error('init error');return this.maxDisplayChars.value()<1?0:this.charsWidth('W',this.style.fontSize,this.style.fontFamily)}widthInPix(){if(null==this.charsWidth)throw new Error('init error');return this.charsWidth(this.content.value().substring(0,this.maxDisplayChars.value()),this.fontSize.value(),this.fontFamily)}draw(t){return this.style.opacity=this.opacity.value(),this.style.fillStyle=this.color.value(),this.style.strokeStyle=this.color.value(),this.style.fontSize=this.fontSize.value(),this.style.fontFamily=this.fontFamily,this.applyRotation(t),this.drawContent(t),this.removeRotation(t),!0}drawContent(t){t.drawText(this.content.value().substring(0,this.maxDisplayChars.value()),this.xAligned(),this.yAligned(),this.style)}}class V extends M{constructor(t='',i='#000000'){super(t,i),this.fitTextToWidth=!0,this.maxHeight=500,this.paddingTop=new _(0),this.paddingBottom=new _(0),this.paddingRight=new _(0),this.paddingLeft=new _(0),this.border=new m(0),this.colorBackground=new et('#ffffff'),this.colorBorder=new et('#000000'),this.showBackground=new Q(!1)}init(t){if(super.init(t),null==this.canvasWidth||null==this.canvasHeight)throw new Error('init error');return this.paddingLeft.init(this.usePercentages,this.canvasWidth),this.paddingRight.init(this.usePercentages,this.canvasWidth),this.paddingTop.init(this.usePercentages,this.canvasHeight),this.paddingBottom.init(this.usePercentages,this.canvasHeight),!0}update(t,i){return 1==this.fitTextToWidth&&this.dynamicFontSize(i),this.paddingLeft.update(t),this.paddingLeft.update(t),this.paddingRight.update(t),this.paddingTop.update(t),this.paddingBottom.update(t),super.update(t,i),this.border.update(t),this.colorBackground.update(t),this.colorBorder.update(t),!0}widthInPix(){if(null==this.canvasWidth)throw new Error('init error');if(null==this.charsWidth)throw new Error('init error');Math.floor(this.canvasWidth/100);const t=2*this.border.value(),i=this.paddingLeft.value(),e=this.paddingRight.value(),s=this.charsWidth(this.content.value(),this.fontSize.value(),this.fontFamily);return Math.floor(i+s+e+t)}heightInPix(){if(null==this.canvasHeight)throw new Error('init error');if(null==this.charsWidth)throw new Error('init error');Math.floor(this.canvasHeight/100);const t=2*this.border.value(),i=this.paddingTop.value(),e=this.paddingBottom.value(),s=this.charsWidth('W',this.style.fontSize,this.style.fontFamily);return Math.floor(i+e+s+t)}draw(t){return this.style.opacity=this.opacity.value(),this.style.fontSize=this.fontSize.value(),this.style.fontFamily=this.fontFamily,this.applyRotation(t),1==this.showBackground.value()&&this.drawBackground(t),this.border.value()>0&&this.drawBorder(t),this.drawContent(t),this.removeRotation(t),!0}drawBackground(t){this.style.fillStyle=this.colorBackground.value(),this.style.strokeStyle=this.colorBackground.value(),t.drawFillRect(this.xAligned(),this.yAligned(),this.widthInPix(),this.heightInPix(),this.style)}drawBorder(t){this.style.strokeStyle=this.colorBorder.value(),this.style.fillStyle=this.colorBorder.value(),this.style.lineWidth=this.border.value(),t.drawRect(this.xAligned(),this.yAligned(),this.widthInPix(),this.heightInPix(),this.style)}drawContent(t){this.style.strokeStyle=this.color.value(),this.style.fillStyle=this.color.value(),t.drawText(this.content.value().substring(0,this.maxDisplayChars.value()),this.xAligned()+this.border.value()+this.paddingLeft.value(),this.yAligned()+this.border.value()+this.paddingTop.value(),this.style)}dynamicFontSize(t){const i=t.canvasWidth()/100*this.width.value();this.style.fontSize=this.fontSize.value();for(let e=1;e<900;e++){if(t.charsWidth(this.content.value(),e,this.style.fontFamily)>=i)return this.fontSize.set(e),this.style.fontSize=e,this.fontSize.value()}return null}shrinkToFitMaxHeight(t){if(null==this.charsWidth)throw new Error('init error');const i=t.canvasHeight()/100*this.maxHeight;if(this.charsWidth('W',this.style.fontSize,this.style.fontFamily)<i)return!0;for(let e=300;e>0;e--){if(t.charsWidth('W',e,this.style.fontFamily)<=i)return this.fontSize.set(e),this.style.fontSize=e,!0}return!0}}class D extends V{constructor(t='#008000'){super('',t),this.border.set(0),this.maxHeight=10}init(t){return super.init(t),!0}update(t,i){return super.update(t,i),this.content.set('sec:'+Math.ceil(t/1e3).toString()),!0}}class O{constructor(t=0){this.framesToSkip=t,this.skipframesCounter=0}skipped(){return this.skipframesCounter<this.framesToSkip?(this.skipframesCounter+=1,!1):(this.skipframesCounter=0,!0)}}class F{constructor(t,i){this.x=t,this.y=i}}class L extends W{constructor(i=10,e='#008000',s=50){super(),this.skipXFrames=new O(s),this.xyArray=[],this.drawLayer=t.MiddleGround,this.count=i,this.color.set(e),this.size=10}init(t){return super.init(t),this.getRandomXY(),!0}draw(t){if(1==this.skipXFrames.skipped()&&this.getRandomXY(),null==this.canvasWidth||null==this.canvasHeight)throw new Error('init error');this.style.fillStyle=this.color.value(),this.style.opacity=this.opacity.value(),this.style.strokeStyle=this.color.value();for(let i=0;i<this.count;i++)t.drawCircle(this.xyArray[i].x,this.xyArray[i].y,this.size,!0,0,2*Math.PI,this.style);return!0}getRandomXY(){if(null==this.canvasWidth||null==this.canvasHeight)throw new Error('init error');this.xyArray.length=0;for(let t=0;t<this.count;t++){const t=new F(Math.random()*this.widthInPix()+this.x.value(),Math.random()*this.heightInPix()+this.y.value());this.xyArray.push(t)}}}class X extends W{constructor(i,e=10,s=10){if(super(),this.width.set(e),this.height.set(s),this.img=new Image,this.img.src=i,null==this.img)throw new Error('image could not be found');document.body.appendChild(this.img),this.orignalWidth=this.img.clientWidth,this.orignalHeight=this.img.clientHeight,this.img.style.display='none',this.drawLayer=t.MiddleGround}init(t){if(super.init(t),null==this.canvasWidth)throw new Error('init error');if(null==this.canvasHeight)throw new Error('init error');return this.img.setAttribute('width',this.widthInPix().toString()),this.img.setAttribute('height',this.heightInPix().toString()),!0}widthInPix(){if(null==this.canvasWidth)throw new Error('init error');return this.canvasWidth/100*this.width.value()}heightInPix(){if(null==this.canvasHeight)throw new Error('init error');return this.canvasHeight/100*this.height.value()}draw(t){return t.drawImage(this.img,this.xAligned(),this.yAligned(),this.widthInPix(),this.heightInPix()),!0}}class Y extends W{constructor(i=0,e=0,s=20,r=20,h='#000000'){super(),this.x.setInitValue(i),this.y.setInitValue(e),this.x2=new _(s),this.y2=new _(r),this.lineWidth=new m(2),this.color.set(h),this.drawLayer=t.MiddleGround}init(t){if(super.init(t),null==this.canvasWidth||null==this.canvasHeight)throw new Error('init error');return this.x2.init(this.usePercentages,this.canvasWidth),this.y2.init(this.usePercentages,this.canvasHeight),!0}update(t,i){return super.update(t,i),this.x2.update(t),this.y2.update(t),this.lineWidth.update(t),!0}draw(t){return this.style.fillStyle=this.color.value(),this.style.strokeStyle=this.color.value(),this.style.lineWidth=this.lineWidth.value(),t.drawLine(this.x.value(),this.y.value(),this.x2.value(),this.y2.value(),this.style),!0}}class G extends W{constructor(t='#ffff00'){super(),this.xAlign=this.XAlignOpt.Mid,this.yAlign=this.YAlignOpt.Mid,this.x.setInitValue(50),this.y.setInitValue(50),this.color.set(t)}widthInPix(){return 0}heightInPix(){return 0}draw(t){return this.style.fillStyle=this.color.value(),this.style.strokeStyle=this.color.value(),t.drawFillRect(this.x.value(),this.y.value(),4,4,this.style),!0}}class N extends W{constructor(t='#000000'){super(),this.color=new et(t),this.filled=new Q(!0)}widthInPix(){if(null!==this.canvasWidth)return Math.ceil(this.canvasWidth/100*this.width.value());throw new Error('the component is not initialized yet')}heightInPix(){return this.widthInPix()}draw(t){return this.style.fillStyle=this.color.value(),this.style.opacity=this.opacity.value(),this.style.strokeStyle=this.color.value(),t.beginPath(),t.drawCircle(this.xAligned()+this.widthInPix()/2,this.yAligned()+this.widthInPix()/2,this.widthInPix()/2,this.filled.value(),0,2*Math.PI,this.style),t.stroke(),!0}}class q extends W{constructor(t='one two'){super(),this.x_internal=0,this.incommingTextArray=t.split(' '),this.textArray=[];for(let t=0;t<this.incommingTextArray.length;t++){const i=this.incommingTextArray[t],e=new V(i);e.width.set(10),e.usePercentages=!1,e.fitTextToWidth=!1,e.border.set(0),e.paddingLeft.setInitValue(2),e.paddingRight.setInitValue(2),this.textArray.push(e)}}init(t){super.init(t);for(let i=0;i<this.textArray.length;i++){const e=this.textArray[i];e.charsWidth=this.charsWidth,e.init(t)}return!0}update(t,i){super.update(t,i);for(let e=0;e<this.textArray.length;e++){this.textArray[e].update(t,i)}return!0}widthInPix(){if(null!==this.canvasWidth){let t=0;for(let i=0;i<this.textArray.length;i++){t+=this.textArray[i].widthInPix()}return t}throw new Error('the component is not initialized yet')}heightInPix(){if(null!==this.canvasWidth){let t=0;for(let i=0;i<this.textArray.length;i++){const e=this.textArray[i];t<e.heightInPix()&&(t=e.heightInPix())}return t}throw new Error('the component is not initialized yet')}getCell(t){return this.textArray[t]}draw(t){this.applyRotation(t),this.style.fillStyle=this.color.value(),this.style.opacity=this.opacity.value(),this.style.strokeStyle=this.color.value();const i=this.yAligned();for(let e=0;e<this.textArray.length;e++){const s=this.textArray[e];s.x.override(this.xAligned()+this.x_internal),s.y.override(i),s.draw(t),this.x_internal+=s.widthInPix()}return this.removeRotation(t),this.style.opacity=1,this.x_internal=0,!0}}class J extends W{constructor(){super(),this.y_internal=0,this.showBackground=new Q(!0),this.padding=new m(0),this.rowGap=new m(5),this.border=new m(0),this.opacityBackground=new m(100),this.colorBackground=new et('grey'),this.colorBorder=new et('black'),this.rowArray=[]}init(t){super.init(t);for(let i=0;i<this.rowArray.length;i++){const e=this.rowArray[i];e.charsWidth=this.charsWidth,e.init(t)}return!0}update(t,i){super.update(t,i),this.rowGap.update(t);for(let e=0;e<this.rowArray.length;e++){this.rowArray[e].update(t,i)}return!0}widthInPix(){if(null!==this.canvasWidth){let t=0;for(let i=0;i<this.rowArray.length;i++){const e=this.rowArray[i];e.widthInPix()>t&&(t=e.widthInPix())}return t+2*this.padding.value()}throw new Error('the component is not initialized yet')}heightInPix(){if(null!==this.canvasWidth){let t=0;for(let i=0;i<this.rowArray.length;i++){t+=this.rowArray[i].heightInPix()}return t+=this.rowGap.value()*(this.rowArray.length-1),t+=2*this.padding.value(),t}throw new Error('the component is not initialized yet')}getCell(t,i){return this.rowArray[t].getCell(i)}draw(t){this.applyRotation(t),this.style.opacity=100,this.border.value()>0&&this.drawBorder(t),1==this.showBackground.value()&&(this.style.opacity=this.opacityBackground.value(),this.drawBackground(t),this.style.opacity=100),this.style.fillStyle=this.color.value(),this.style.strokeStyle=this.color.value();const i=this.xAligned();for(let e=0;e<this.rowArray.length;e++){const s=this.rowArray[e];s.x.override(i+this.padding.value()),s.y.override(this.yAligned()+this.padding.value()+this.y_internal),s.draw(t),this.y_internal+=s.heightInPix()+this.rowGap.value()}return this.removeRotation(t),this.style.opacity=1,this.y_internal=0,!0}drawBackground(t){this.style.fillStyle=this.colorBackground.value(),this.style.strokeStyle=this.colorBackground.value(),t.drawFillRect(this.xAligned(),this.yAligned(),this.widthInPix(),this.heightInPix(),this.style)}drawBorder(t){this.style.fillStyle=this.colorBorder.value(),this.style.strokeStyle=this.colorBorder.value(),this.style.lineWidth=this.border.value(),t.drawRect(this.xAligned(),this.yAligned(),this.widthInPix(),this.heightInPix(),this.style)}addRow(t='one two'){const i=new q(t);this.rowArray.push(i)}}class U{static circle(t='red'){return new N(t)}static marker(t='red'){return new G(t)}static pic(t,i=10,e=10){return new X(t,i,e)}static staticGrid(t=100,i=100,e='#efe1e1'){return new H(t,i,e)}static grid(t='grey',i=10,e=10){return new E(t,i,e)}static rect(t='#000000'){return new R(t)}static fillRect(t='#000000'){return new z(t)}static frameCounter(t='#000000'){return new D(t)}static circleParticles(t=10,i='#008000',e=50){return new L(t,i,e)}static rawText(t='',i='#000000'){return new M(t,i)}static text(t='',i='#000000'){return new V(t,i)}static line(t=0,i=0,e=20,s=20,r='#000000'){return new Y(t,i,e,s,r)}static row(t='one two'){return new q(t)}static paragraph(){return new J}}class ${constructor(t){!function(t){const i=document.getElementById('slider');if(null==i)throw new Error('slider error');const e=i;e.min='0',e.max=t.len(!1).toString(),e.value='0',setInterval((()=>{1==t.isRunning()&&(e.value=Math.ceil(t.getLastMsDelta()/1e3))}),500),e.addEventListener('input',(i=>{t.draw(1e3*i.target.value)}))}(t);const i=document.getElementById('start');if(null===i)throw new Error('start button not found');this.start=i,this.start.addEventListener('click',(i=>{t.start()}));const e=document.getElementById('stop');if(null===e)throw new Error('stop button not found');this.stop=e,this.stop.addEventListener('click',(i=>{t.stop(),slider.value=0,t.draw(0)}))}}function j(t){let i=t/16;return Math.ceil(9*i)}function Z(t){return t>100?100:t<0?0:t}class K{constructor(t,i=80){this.canvasId=t,this.canvas=function(t='bilza'){let i=document.getElementById(t);if(null==i){let i=document.createElement('canvas');if(document.getElementsByTagName('body')[0].appendChild(i),i.id=t,i.style.position='static',null==i)throw new Error('canvas not found');return i}{let e=i;if(e.id=t,e.style.position='static',null==e)throw new Error('canvas not found');return e}}(this.canvasId),this.dynamicCanvas(i,null),this.ctx=this.getNewCtx()}getNewCtx(){let t=this.canvas.getContext('2d');if(null==t)throw new Error('could not obtain drawing context');return t}drawBackground(t='blue'){return this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle}canvasWidth(){return this.canvas.width}canvasHeight(){return this.canvas.height}quadraticCurveTo(t,i,e,s){this.commitCtxData(s),this.beginPath(),this.moveTo(t.x,t.y),this.ctx.quadraticCurveTo(e.x,e.y,i.x,i.y),this.stroke()}restore(){this.ctx.restore()}save(){this.ctx.save()}drawImage(t,i,e,s,r){this.ctx.drawImage(t,i,e,s,r)}clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}charsWidth(t,i,e){this.ctx.save(),this.setFont(i,e);let s=this.ctx.measureText(t).width;return this.ctx.restore(),Math.ceil(s)}textWidth(t,i){this.ctx.save(),this.commitCtxData(i);let e=this.ctx.measureText(t).width;return this.ctx.restore(),Math.ceil(e)}drawLine(t,i,e,s,r){this.commitCtxData(r),this.ctx.beginPath(),this.ctx.moveTo(t,i),this.ctx.lineTo(e,s),this.ctx.stroke()}line(t,i,e,s){this.ctx.beginPath(),this.ctx.moveTo(t,i),this.ctx.lineTo(e,s),this.ctx.stroke()}beginPath(){this.ctx.beginPath()}closePath(){this.ctx.closePath()}moveTo(t,i){this.ctx.moveTo(t,i)}lineTo(t,i,e){this.commitCtxData(e),this.ctx.lineTo(t,i)}fill(t){this.commitCtxData(t),this.ctx.fill()}stroke(){this.ctx.stroke()}drawRect(t,i,e,s,r){this.commitCtxData(r),this.ctx.beginPath(),this.ctx.rect(t,i,e,s),this.ctx.stroke()}drawFillRect(t,i,e,s,r){this.commitCtxData(r),this.ctx.fillRect(t,i,e,s)}arcTo(t,i,e,s=20){this.commitCtxData(e),this.ctx.arcTo(t.x,t.y,i.x,i.y,s)}drawCircle(t=0,i=0,e=25,s=!1,r=0,h=2*Math.PI,n){this.commitCtxData(n),this.ctx.beginPath(),this.ctx.arc(t,i,e,r,h,!1),1==s&&this.ctx.fill(),this.ctx.stroke()}textBaseline(t){switch(t){case'top':this.ctx.textBaseline='top';break;case'middle':case'bottom':this.ctx.textBaseline='middle';break;case'alphabetic':this.ctx.textBaseline='alphabetic';break;case'hanging':this.ctx.textBaseline='hanging'}}drawText(t,i,e,s){this.commitCtxData(s),this.ctx.textBaseline='top',this.ctx.fillText(t,i,e)}drawIcon(t,i,e,s){this.commitCtxData(s),this.ctx.textBaseline='top',this.ctx.fillText(String.fromCharCode(t),i,e)}drawTextstroke(t,i,e,s){this.commitCtxData(s),this.ctx.textBaseline='top',this.ctx.strokeText(t,i,e)}commitCtxData(t){null!==t.lineCap&&(this.ctx.lineCap='round'),null!==t.opacity&&(this.ctx.globalAlpha=t.opacity/100),null!==t.shadowBlur&&(this.ctx.shadowBlur=t.shadowBlur),null!==t.shadowOffsetY&&(this.ctx.shadowOffsetY=t.shadowOffsetY),null!==t.shadowOffsetX&&(this.ctx.shadowOffsetX=t.shadowOffsetX),null!==t.lineWidth&&(this.ctx.lineWidth=t.lineWidth),null!==t.shadowColor&&(this.ctx.shadowColor=t.shadowColor),null!==t.strokeStyle&&(this.ctx.strokeStyle=t.strokeStyle),null!==t.fillStyle&&(this.ctx.fillStyle=t.fillStyle),null!==t.lineDash&&this.ctx.setLineDash(t.lineDash),this.setFont(t.fontSize,t.fontFamily)}setFont(t,i){let e=`${t}px ${i}`;this.ctx.font=e}xPerc(t){let i=this.setBwZeroNhundred(t);return Math.ceil(this.canvas.width/100*i)}pixToXPerc(t){const i=t/this.canvasWidth();return Math.ceil(100*i)}pixToYPerc(t){const i=t/this.canvasHeight();return Math.ceil(100*i)}yPerc(t){let i=this.setBwZeroNhundred(t);return this.canvas.height/100*i}setBwZeroNhundred(t){return t<0?0:t>100?100:t}dynCanvasWidth(t=80){return window.innerWidth/100*Z(t)}dynCanvasHeight(t,i=null){return null!==i?window.innerHeight/100*Z(i):j(t)}resizeCanvas(t,i){this.canvas.width=t,this.canvas.height=i??j(t)}dynamicCanvas(t=95,i=null){let e=this.dynCanvasWidth(t);return this.resizeCanvas(e,this.dynCanvasHeight(e,i)),!0}rotate(t,i=!1){const e=t*(Math.PI/180);0==i?this.ctx.rotate(e):this.ctx.rotate(-e)}translate(t,i){this.ctx.translate(t,i)}setTransform(t=1,i=0,e=0,s=1,r=0,h=0){this.ctx.setTransform(t,i,e,s,r,h)}}class Q extends a{}class tt extends u{constructor(t,i){super(t,t+3e3),this.theValue=i,this.usedOnce=!1,this._ret_val=null}update(t){return super.update(t)==h.Running&&0==this.usedOnce?(this._ret_val=this.theValue,this.usedOnce=!0):this._ret_val=null,this.filterState}}class it extends u{constructor(t,i,e=0){super(t,i),this.everyXFrame=e,this.delayCounter=0,this._ret_val=null}update(t){if(super.update(t),this.filterState==h.Running)if(this.delayCounter>=this.everyXFrame){this.delayCounter=0;const t=Math.floor(360*Math.random()),i=Math.floor(101*Math.random()),e=Math.floor(101*Math.random());this._ret_val=`hsl(${t},${i}%,${e}%)`}else this.delayCounter+=1;else this._ret_val=null;return this.filterState}}class et extends a{goto(t,i){const e=new tt(t,i);this.filters.push(e)}random(t,i,e=0){const s=new it(t,i,e);this.filters.push(s)}}class st extends u{constructor(t,i){super(t,t+3e3),this.theValue=i,this.usedOnce=!1,this._ret_val=null}update(t){return super.update(t)==h.Running&&0==this.usedOnce?(this._ret_val=this.theValue,this.usedOnce=!0):this._ret_val=null,this.filterState}}class rt extends a{goto(t,i){const e=new st(t,i);this.filters.push(e)}}class ht extends W{constructor(t=9876,i='#008000'){super(),this.code=t,this.color.set(i),this.fontSize=new m(100)}update(t,i){return super.update(t,i),this.fontSize.update(t),!0}widthInPix(){if(null==this.charsWidth)throw new Error('init error');return this.charsWidth(this.code.toString(),this.fontSize.value(),'Arial')}heightInPix(){if(null==this.charsWidth)throw new Error('init error');return this.charsWidth('X',this.fontSize.value(),'Arial')}draw(t){return this.style.fontSize=this.fontSize.value(),this.style.fillStyle=this.color.value(),this.style.strokeStyle=this.color.value(),this.applyRotation(t),t.drawIcon(this.code,this.xAligned(),this.yAligned(),this.style),this.removeRotation(t),!0}}class nt{static Icon(t=9876,i='#008000'){return new ht(t,i)}}export{Q as AniBoolean,et as AniColor,m as AniNumber,rt as AniString,W as BaseComponent,B as Bilza,U as CompFactory,t as DrawLayer,nt as Experimental,e as FontFamily,K as Pack,n as Style,$ as Ui,s as XAlignOpt,r as YAlignOpt,B as default};
