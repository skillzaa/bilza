class t{constructor(t,i=0,s=Number.MAX_SAFE_INTEGER){this.compData=new J(t),this.d=this.compData.data,this.data=this.compData.data,this.drawLayer=n.MiddleGround,this.id=Math.random().toString(36).slice(2),this.style=new l,this.msStart=i,this.msEnd=s,this.setStartTime(i),this.setEndTime(s)}getStartTime(){return this.msStart}setStartTime(t=0){return this.msStart=t,t}getEndTime(){return this.msEnd}setEndTime(t=Number.MAX_SAFE_INTEGER){return this.msEnd=t,t}width(t){return 0}height(t){return 0}init(t){return!0}draw(t){return!0}update(t,i){return!0}log(t){}addTransition(t){return this.compData.add(t)}checkCollision(t,i,s){return!1}shadowsOff(){this.style.shadowBlur=0,this.style.shadowOffsetX=0,this.style.shadowOffsetY=0}setShadow(t=8,i=10,s=10,e='#ada6a6'){this.style.shadowBlur=t,this.style.shadowOffsetX=i,this.style.shadowOffsetY=s,this.style.shadowColor=e}shadowsOn(){this.style.shadowBlur=8,this.style.shadowOffsetX=10,this.style.shadowOffsetY=10,this.style.shadowColor='#ada6a6'}resize(t,i){return 0}drawBoundingRectangle(t){return this.style.strokeStyle='black',t.drawRect(t.xPerc(this.d.x),t.yPerc(this.d.y),this.width(t),this.height(t),this.style),!0}applyTransition(t){this.compData.apply(t)}}class i{constructor(t='bilza',i=0,s=0){let e=document.getElementById(t);if(null==e){this.canvas=document.createElement('canvas'),document.getElementsByTagName('body')[0].appendChild(this.canvas)}else this.canvas=e;if(this.canvas.id=t,this.canvas.width=i,this.canvas.height=s,this.canvas.style.position='static',this.canvas.style.border='1px solid blue',null==this.canvas)throw new Error('canvas not found');if(this.canvas.width=0==i?window.innerWidth:i,this.canvas.height=0==s?window.innerHeight:s,this.ctx=this.canvas.getContext('2d'),null==this.ctx)throw new Error('could not obtain drawing context')}drawBackground(t='blue'){return this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle}canvasWidth(){return this.canvas.width}canvasHeight(){return this.canvas.height}quadraticCurveTo(t,i,s,e){this.commitCtxData(e),this.beginPath(),this.moveTo(t),this.ctx.quadraticCurveTo(s.x,s.y,i.x,i.y),this.stroke()}restore(){this.ctx.restore()}save(){this.ctx.save()}clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}charsWidth(t='',i,s){this.ctx.save(),this.setFont(i,s);let e=this.ctx.measureText(t).width;return this.ctx.restore(),Math.ceil(e)}textWidth(t,i){this.ctx.save(),this.commitCtxData(i);let s=this.ctx.measureText(t).width;return this.ctx.restore(),Math.ceil(s)}drawLine(t,i,s,e,h){this.commitCtxData(h),this.ctx.beginPath(),this.ctx.moveTo(t,i),this.ctx.lineTo(s,e),this.ctx.stroke()}line(t,i,s,e){this.ctx.beginPath(),this.ctx.moveTo(t,i),this.ctx.lineTo(s,e),this.ctx.stroke()}beginPath(){this.ctx.beginPath()}closePath(){this.ctx.closePath()}moveTo(t){this.ctx.moveTo(t.x,t.y)}lineTo(t,i,s){this.commitCtxData(s),this.ctx.lineTo(t,i)}fill(t){this.commitCtxData(t),this.ctx.fill()}stroke(){this.ctx.stroke()}drawRect(t,i,s,e,h){this.commitCtxData(h),this.ctx.beginPath(),this.ctx.rect(t,i,s,e),this.ctx.stroke()}drawFillRect(t,i,s,e,h){this.commitCtxData(h),this.ctx.fillRect(t,i,s,e)}arcTo(t,i,s,e=20){this.commitCtxData(s),this.ctx.arcTo(t.x,t.y,i.x,i.y,e)}drawCircle(t,i,s,e,h,r=0,n=2*Math.PI){this.commitCtxData(h),this.ctx.beginPath(),this.ctx.arc(t+s,i+s,s,r,n,!1),1==e&&this.ctx.fill(),this.ctx.stroke()}drawText(t,i,s,e){this.commitCtxData(e),this.ctx.textBaseline='top',this.ctx.fillText(t,i,s)}drawIcon(t,i,s,e){this.commitCtxData(e),this.ctx.textBaseline='top',this.ctx.fillText(String.fromCharCode(t),i,s)}drawTextstroke(t,i,s,e){this.commitCtxData(e),this.ctx.textBaseline='top',this.ctx.strokeText(t,i,s)}commitCtxData(t){null!==t.lineCap&&(this.ctx.lineCap='round'),null!==t.globalAlpha&&(this.ctx.globalAlpha=t.globalAlpha),null!==t.shadowBlur&&(this.ctx.shadowBlur=t.shadowBlur),null!==t.shadowOffsetY&&(this.ctx.shadowOffsetY=t.shadowOffsetY),null!==t.shadowOffsetX&&(this.ctx.shadowOffsetX=t.shadowOffsetX),null!==t.lineWidth&&(this.ctx.lineWidth=t.lineWidth),null!==t.shadowColor&&(this.ctx.shadowColor=t.shadowColor),null!==t.strokeStyle&&(this.ctx.strokeStyle=t.strokeStyle),null!==t.fillStyle&&(this.ctx.fillStyle=t.fillStyle),null!==t.lineDash&&this.ctx.setLineDash(t.lineDash),this.setFont(t.fontSize,t.fontName)}setFont(t,i){let s=`${t}px ${i}`;this.ctx.font=s}xPerc(t){let i=this.setBwZeroNhundred(t);return this.canvas.width/100*i}yPerc(t){let i=this.setBwZeroNhundred(t);return this.canvas.height/100*i}setBwZeroNhundred(t){return t<0?0:t>100?100:t}}var s,e,h,r,n;(t=>{t.Round='round',t.Butt='butt',t.Square='square'})(s||(s={})),(t=>{t.Arial='Arial',t.ArialBlack='Arial Black',t.Verdana='Verdana',t.Tahoma='Tahoma',t.Impact='Impact',t.Times='Times',t.Helvetica='Helvetica',t.TimesNewRoman='Times New Roman',t.Didot='Didot',t.Calibri='Calibri',t.Georgia='Georgia',t.AmericanTypewriter='American Typewriter',t.Courier='Courier',t.CourierNew='Courier New',t.LucidaConsole='Lucida Console',t.Monaco='Monaco',t.BradleyHand='Bradley Hand',t.BrushScriptMT='Brush Script MT',t.BrushScript='Brush Script',t.Luminari='Luminari'})(e||(e={}));class l{constructor(t=0){this.msStart=t,this.fontSize=25,this.fontName=e.Luminari,this.fillStyle='green',this.strokeStyle='red',this.lineWidth=2,this.shadowColor='black',this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0,this.globalAlpha=1,this.lineCap=s.Round,this.lineDash=[]}merge(t){null!==t.lineCap&&(this.lineCap=t.lineCap),null!==t.globalAlpha&&(this.globalAlpha=t.globalAlpha),null!==t.shadowBlur&&(this.shadowBlur=t.shadowBlur),null!==t.shadowOffsetY&&(this.shadowOffsetY=t.shadowOffsetY),null!==t.shadowOffsetX&&(this.shadowOffsetX=t.shadowOffsetX),null!==t.lineWidth&&(this.lineWidth=t.lineWidth),null!==t.shadowColor&&(this.shadowColor=t.shadowColor),null!==t.strokeStyle&&(this.strokeStyle=t.strokeStyle),null!==t.fillStyle&&(this.fillStyle=t.fillStyle),null!==t.fontSize&&(this.fontSize=t.fontSize),null!==t.fontName&&(this.fontName=t.fontName),null!==t.lineDash&&(this.lineDash=t.lineDash)}}class d{constructor(){this.msStart=0,this.x=0,this.y=0,this.selected=!1,this.visible=!0,this.shadowColor='grey',this.shadowDisplay=!1,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0,this.colorBoundingRectangle='black'}}(t=>{t.Left='LEFT',t.Right='RIGHT',t.Mid='MID',t.Off='OFF'})(h||(h={})),(t=>{t.Top='TOP',t.Mid='MID',t.Bot='BOT'})(r||(r={}));class a extends d{constructor(){super(),this.xAlignment=h.Left,this.yAlignment=r.Top,this.content='Text',this.padding=2,this.margin=2,this.border=2,this.dynWidth=80,this.dynHeight=30,this.colorBorder='black',this.colorBg='#e1f4e1',this.color='black',this.fontSize=25,this.flagDrawContent=!0,this.flagDrawBorder=!1,this.flagDrawBg=!1,this.maxDisplayChars=200,this.flagTextShadow=!1,this.flagBgShadow=!1,this.flagUseDynResize=!1,this.flagShrinkHeightToFit=!1,this.flagUseRelativeXY=!0}}function o(){return new a}function c(t,i){var s=!1;'#'==t[0]&&(t=t.slice(1),s=!0);var e=parseInt(t,16),h=(e>>16)+i;h>255?h=255:h<0&&(h=0);var r=(e>>8&255)+i;r>255?r=255:r<0&&(r=0);var n=(255&e)+i;return n>255?n=255:n<0&&(n=0),(s?'#':'')+(n|r<<8|h<<16).toString(16)}class u extends t{constructor(t=0,i=Number.MAX_SAFE_INTEGER,s='',e='#000000',l=0,d=0){super(o),this.xAlignmentOptions=h,this.yAlignmentOptions=r,this.setStartTime(1e3*t),this.setEndTime(1e3*i),this.d.content=s,this.d.x=l,this.d.y=d,this.d.color=e,this.d.colorBorder=e,this.d.colorBg=c(e,10),this.drawLayer=n.MiddleGround}width(t){return t.textWidth(this.d.content.substring(0,this.d.maxDisplayChars),this.style)+2*this.d.padding+2*this.d.margin+2*this.d.border}height(t){return t.charsWidth('W',this.d.fontSize,this.style.fontName)+2*this.d.padding+2*this.d.margin+2*this.d.border}init(t){return!0}update(t,i){return 1==this.d.flagUseDynResize&&this.dynamicFontSize(i),1==this.d.flagShrinkHeightToFit&&this.shrinkHeightToFit(i),!0}draw(t){return 1==this.d.flagDrawBg&&this.drawBg(t),1==this.d.flagDrawBorder&&this.drawBorder(t),1==this.d.flagDrawContent&&this.drawContent(t),!0}drawBorder(t){return this.shadowsOff(),this.style.fillStyle=this.d.colorBorder,this.style.strokeStyle=this.d.colorBorder,this.style.lineWidth=this.d.border,this.style.fontSize=this.d.fontSize,t.drawRect(this.getX(t)+this.d.margin,this.getY(t)+this.d.margin,this.width(t),this.height(t),this.style),!0}drawBg(t){return 1==this.d.flagBgShadow?this.shadowsOn():this.shadowsOff(),this.style.fillStyle=this.d.colorBg,this.style.strokeStyle=this.d.colorBg,this.style.fontSize=this.d.fontSize,t.drawFillRect(this.getX(t)+this.d.margin,this.getY(t)+this.d.margin,this.width(t),this.height(t),this.style),!0}drawContent(t){1==this.d.flagTextShadow?(this.style.shadowBlur=this.d.shadowBlur,this.style.shadowOffsetX=this.d.shadowOffsetX,this.style.shadowOffsetY=this.d.shadowOffsetY,this.style.shadowColor=this.d.shadowColor):this.shadowsOff(),this.style.fillStyle=this.d.color,this.style.strokeStyle=this.d.color,this.style.fontSize=this.d.fontSize,t.drawText(this.d.content.substring(0,this.d.maxDisplayChars),this.getX(t)+(this.d.margin+this.d.border+this.d.padding),this.getY(t)+(this.d.margin+this.d.border+this.d.padding),this.style)}getX(t){let i=this.d.x;switch(1==this.d.flagUseRelativeXY&&(i=t.xPerc(this.d.x)),this.d.xAlignment){case this.xAlignmentOptions.Left:break;case this.xAlignmentOptions.Mid:i-=this.width(t)/2;break;case this.xAlignmentOptions.Right:i-=this.width(t)}return i}getY(t){let i=this.d.y;switch(1==this.d.flagUseRelativeXY&&(i=t.yPerc(this.d.y)),this.d.yAlignment){case this.yAlignmentOptions.Top:break;case this.yAlignmentOptions.Mid:i-=this.height(t)/2;break;case this.yAlignmentOptions.Bot:i-=this.height(t)}return i}dynamicFontSize(t){let i=t.canvasWidth()/100*this.d.dynWidth;this.style.fontSize=this.d.fontSize;let s=0;for(let e=1;e<900;e++)if(this.style.fontSize=e,s=this.width(t),s>=i)return this.d.fontSize=e,this.style.fontSize=e,this.d.fontSize;return null}shrinkHeightToFit(t){let i=t.canvasHeight()/100*this.d.dynHeight;if(this.height(t)<i)return!0;this.style.fontSize=this.d.fontSize,this.style.fontSize;for(let s=this.style.fontSize;s>5;s--)if(this.style.fontSize-=1,this.d.fontSize=this.style.fontSize,this.height(t)<i)return!0;return!1}}function g(){return new w}class w extends d{constructor(){super(),this.fontSize=8,this.cellWidth=50,this.cellHeight=50,this.colorHorizontalLines='grey',this.colorVerticalLines='grey',this.colorNumbers='grey',this.flagDrawNumbers=!1,this.flagDrawHorizontal=!1,this.flagDrawVertical=!1,this.lineWidthVertical=1,this.lineWidthHorizontal=1,this.lineDash=[]}}class m extends t{constructor(t=0,i=Number.MAX_SAFE_INTEGER){super(g,t,i),this.drawLayer=n.BackGround}draw(t){return this.draw_horizontal(t),this.draw_vertical(t),!0}draw_horizontal(t){let i=0,s=t.canvasWidth(),e=t.canvasHeight(),h=0+s;do{this.style.strokeStyle=this.d.colorHorizontalLines,this.style.lineDash=this.d.lineDash,this.style.lineWidth=this.d.lineWidthHorizontal,t.drawLine(0,i,h,i,this.style),1==this.d.flagDrawNumbers&&(this.style.strokeStyle=this.d.colorNumbers,this.drawText(t,i,0,i)),i+=this.d.cellHeight}while(e>i)}draw_vertical(t){let i=0,s=t.canvasWidth(),e=0+t.canvasHeight();do{this.style.strokeStyle=this.d.colorVerticalLines,this.style.lineWidth=this.d.lineWidthVertical,this.style.lineDash=this.d.lineDash,t.drawLine(i,0,i,e,this.style),1==this.d.flagDrawNumbers&&(this.style.strokeStyle=this.d.colorNumbers,this.drawText(t,i,i,0)),i+=this.d.cellWidth}while(s>i)}drawText(t,i,s,e){this.style.fontSize=this.d.fontSize,this.style.strokeStyle=this.d.colorNumbers,this.style.fillStyle=this.d.colorNumbers,t.drawText(i.toString(),s+this.d.lineWidthVertical-2,e+this.d.lineWidthHorizontal,this.style)}}function y(){return new f}class f extends d{constructor(){super(),this.msStart=0,this.fontSize=8,this.cellWidthPerc=10,this.cellHeightPerc=10,this.colorHorizontalLines='grey',this.colorVerticalLines='grey',this.colorNumbers='grey',this.flagDrawNumbers=!1,this.flagDrawHorizontal=!1,this.flagDrawVertical=!1,this.lineWidthVertical=1,this.lineWidthHorizontal=1,this.lineDash=[]}}class S extends t{constructor(t=0,i=Number.MAX_SAFE_INTEGER){super(y,t,i),this.drawLayer=n.BackGround}draw(t){return this.draw_horizontal(t),this.draw_vertical(t),!0}draw_horizontal(t){let i=0,s=t.canvasWidth(),e=t.canvasHeight(),h=0+s;do{this.style.strokeStyle=this.d.colorHorizontalLines,this.style.lineDash=this.d.lineDash,this.style.lineWidth=this.d.lineWidthHorizontal,t.drawLine(0,i,h,i,this.style),1==this.d.flagDrawNumbers&&(this.style.strokeStyle=this.d.colorNumbers,this.drawText(t,i,0,i)),i+=t.canvasHeight()/100*this.d.cellHeightPerc}while(e>i)}draw_vertical(t){let i=0,s=t.canvasWidth(),e=0+t.canvasHeight();do{this.style.strokeStyle=this.d.colorVerticalLines,this.style.lineWidth=this.d.lineWidthVertical,this.style.lineDash=this.d.lineDash,t.drawLine(i,0,i,e,this.style),1==this.d.flagDrawNumbers&&(this.style.strokeStyle=this.d.colorNumbers,this.drawText(t,i,i,0)),i+=t.canvasWidth()/100*this.d.cellWidthPerc}while(s>i)}drawText(t,i,s,e){this.style.fontSize=this.d.fontSize,this.style.strokeStyle=this.d.colorNumbers,this.style.fillStyle=this.d.colorNumbers,t.drawText(i.toString(),s+this.d.lineWidthVertical-2,e+this.d.lineWidthHorizontal,this.style)}}class x extends d{constructor(){super(),this.msStart=0,this.x=10,this.y=10,this.widthPercent=200,this.heightPercent=50,this.color='red',this.widthPercent=10,this.heightPercent=10}}function p(){return new x}class B extends t{constructor(t=10,i=10){super(p),this.d.widthPercent=t,this.d.heightPercent=i,this.drawLayer=n.MiddleGround}width(t){return t.canvasWidth()/100*this.d.widthPercent}height(t){return t.canvasHeight()/100*this.d.heightPercent}draw(t){this.style.fillStyle=this.d.color,this.style.strokeStyle=this.d.color;let i=t.xPerc(this.d.x),s=t.yPerc(this.d.y);return t.drawFillRect(i,s,this.width(t),this.height(t),this.style),!0}resize(t,i){return 0}}class b extends d{constructor(){super(),this.msStart=0,this.x=0,this.y=0,this.fontSize=30,this.content='sec: ',this.frame=0,this.padding=4,this.colorRectangle='black',this.colorNumbers='yellow'}}function T(){return new b}class z extends t{constructor(t=0,i=Number.MAX_SAFE_INTEGER){super(T,t,i),this.drawLayer=n.MiddleGround}width(t){this.style.fontSize=this.d.fontSize;const i=`   ${this.d.content}   ${parseInt(this.d.frame.toString())} `;return t.textWidth(i,this.style)+2*this.d.padding+10}height(t){return this.style.fontSize=this.d.fontSize,t.textWidth('Xi',this.style)}update(t,i){return this.d.frame=t/1e3,!0}draw(t){let i='Frame:'+parseInt(this.d.frame.toString());return this.style.fillStyle=this.d.colorRectangle,t.drawFillRect(this.d.x,this.d.y,this.width(t)+this.d.padding,this.height(t)+this.d.padding,this.style),this.style.fillStyle=this.d.colorNumbers,t.drawText(i,this.d.x+this.d.padding,this.d.y+this.d.padding,this.style),!0}}class v extends d{constructor(){super(),this.msStart=0,this.x=0,this.y=0,this.startAngle=0,this.endAngle=2*Math.PI,this.radius=100,this.fill=!0}}function D(){return new v}class k extends t{constructor(){super(D)}width(t){return 2*this.d.radius}height(t){return 2*this.d.radius}draw(t){return this.d.startAngle>=7?this.d.startAngle=0:this.d.startAngle++,t.drawCircle(this.d.x,this.d.y,this.d.radius,this.d.fill,this.style,this.d.startAngle),!0}}class A extends d{constructor(){super(),this.count=200}}function E(){return new A}class C extends t{constructor(t=100){super(E),this.d.count=t,this.drawLayer=n.BackGround}width(t){return 0}height(t){return 0}draw(t){this.style.fillStyle='#f2edba',this.style.strokeStyle='#efeee3';for(let i=0;i<this.d.count;i++)t.drawCircle(Math.ceil(Math.random()*t.canvasWidth()),Math.ceil(Math.random()*t.canvasHeight()),15,!0,this.style);return!0}}class N extends d{constructor(){super(),this.msStart=0,this.align='centre',this.x=10,this.y=10,this.widthBorder=3,this.dynWidth=80,this.colorBg='blue',this.paddingX=4,this.paddingY=4,this.gap=10,this.colorFont='black',this.colorBorder='#10c910',this.colorItemBorder='blue',this.colorBg='green',this.items=[],this.flagShowBorder=!0,this.flagShowBg=!0,this.flagShrinkTofitVertically=!1,this.dimList=[],this.dimFontColor='grey',this.dimBgColor='#6B726D',this.dimBorderColor='grey',this.highlightList=[],this.highlightFontColor='red',this.highlightBgColor='blue',this.highlightBorderColor='red'}}function W(){return new N}class F{constructor(t){this.d=t}initAllItems(t){for(let i=0;i<this.d.items.length;i++)this.d.items[i].init(t)}getSmallestFontSize(t){if(0==this.d.items.length)return 5;let i=this.d.items[0].d.fontSize;for(let t=0;t<this.d.items.length;t++){const s=this.d.items[t];s.d.fontSize<i&&(i=s.d.fontSize)}return i}assignFontSizeToAll(t){for(let i=0;i<this.d.items.length;i++)this.d.items[i].d.fontSize=t,this.d.items[i].style.fontSize=t}applyDim(t){for(let t=0;t<this.d.dimList.length;t++)this.d.items[this.d.dimList[t]].d.color=this.d.dimFontColor,this.d.items[this.d.dimList[t]].d.colorBg=this.d.dimBgColor,this.d.items[this.d.dimList[t]].d.colorBorder=this.d.dimBorderColor}applyHighlight(t){for(let t=0;t<this.d.highlightList.length;t++)this.d.items[this.d.highlightList[t]].d.color=this.d.highlightFontColor,this.d.items[this.d.highlightList[t]].d.colorBg=this.d.highlightBgColor,this.d.items[this.d.highlightList[t]].d.colorBorder=this.d.highlightBorderColor}}class H{constructor(t){this.d=t}drawBg(t,i,s,e){e.fillStyle=this.d.colorBg,e.strokeStyle=this.d.colorBg,t.drawFillRect(t.xPerc(this.d.x),t.yPerc(this.d.y),i,s,e)}drawBorder(t,i,s,e){e.fillStyle=this.d.colorBorder,e.strokeStyle=this.d.colorBorder,t.drawFillRect(t.xPerc(this.d.x)-this.d.widthBorder,t.yPerc(this.d.y)-this.d.widthBorder,i+2*this.d.widthBorder,s+2*this.d.widthBorder,e)}}class O extends t{constructor(t=0,i=Number.MAX_SAFE_INTEGER,s=10,e=10,h=80){super(W,t,i),this.pvtFontSize=20,this.d.x=s,this.d.y=e,this.d.dynWidth=h,this.util=new F(this.d),this.drawUtil=new H(this.d)}init(t){this.util.initAllItems(t),this.pvtFontSize=this.util.getSmallestFontSize(t),this.util.assignFontSizeToAll(this.pvtFontSize),0==this.initXY(t)&&1==this.d.flagShrinkTofitVertically&&this.shrinkToFitVertically(t);for(let t=0;t<this.d.items.length;t++)this.d.items[t].d.color=this.d.colorFont;for(let t=0;t<this.d.items.length;t++)this.d.items[t].d.colorBorder=this.d.colorItemBorder;return!0}update(t,i){return this.util.applyDim(i),this.util.applyHighlight(i),!0}initXY(t){let i=t.yPerc(this.d.y),s=!0;for(let e=0;e<this.d.items.length;e++){const h=this.d.items[e];h.d.x=this.getItemX(t),h.d.y=i+this.d.paddingY,i+=h.height(t),i+=this.d.gap,i>t.canvasHeight()&&(s=!1)}return s}getItemX(t){let i=t.xPerc(this.d.x);switch(this.d.align){case'left':break;case'right':i+=this.width(t)-(this.d.paddingX+this.d.paddingX+this.d.widthBorder);for(let t=0;t<this.d.items.length;t++){const i=this.d.items[t];i.d.xAlignment=i.xAlignmentOptions.Right}break;case'centre':i+=this.width(t)/2;for(let t=0;t<this.d.items.length;t++){const i=this.d.items[t];i.d.xAlignment=i.xAlignmentOptions.Mid}}return i+this.d.paddingX}shrinkToFitVertically(t){this.pvtFontSize;for(let i=0;i<300;i++){if(this.pvtFontSize-=1,this.util.assignFontSizeToAll(this.pvtFontSize),1==this.initXY(t))return!0}return!1}draw(t){this.drawUtil.drawBorder(t,this.width(t),this.height(t),this.style),this.drawUtil.drawBg(t,this.width(t),this.height(t),this.style);for(let i=0;i<this.d.items.length;i++)this.d.items[i].draw(t);return!0}addItem(t=''){let i=new u(this.getStartTime(),this.getEndTime(),t);i.d.flagDrawBorder=!0,i.d.flagUseRelativeXY=!1,i.d.flagUseDynResize=!0,i.d.dynWidth=this.d.dynWidth,this.d.items.push(i)}width(t){let i=0;for(let s=0;s<this.d.items.length;s++){const e=this.d.items[s];e.width(t)>i&&(i=e.width(t))}return i+4*this.d.paddingX}height(t,i=0){let s=this.d.paddingY;for(let i=0;i<this.d.items.length;i++){s+=this.d.items[i].height(t),s+=this.d.gap}return s+this.d.paddingY}}class L extends d{constructor(){super(),this.msStart=0,this.x1=0,this.y1=0,this.x2=800,this.y2=100,this.lineWidth=2,this.color='red'}}function R(){return new L}class M extends t{constructor(t=0,i=0,s=100,e=100,h='black',r=2){super(R),this.d.x1=t,this.d.y1=i,this.d.x2=s,this.d.y2=e,this.d.color=h,this.d.lineWidth=r,this.drawLayer=n.MiddleGround}width(t){return Math.abs(this.d.x1-this.d.x2)}height(t){return Math.abs(this.d.y1-this.d.y2)}draw(t){return this.style.fillStyle=this.d.color,this.style.strokeStyle=this.d.color,this.style.lineWidth=this.d.lineWidth,t.drawLine(t.xPerc(this.d.x1),t.yPerc(this.d.y1),t.xPerc(this.d.x2),t.yPerc(this.d.y2),this.style),!0}}class P extends d{constructor(){super(),this.msStart=0,this.x=10,this.y=10,this.color='grey',this.widthPercent=10,this.heightPercent=10}}function X(){return new P}class I extends t{constructor(t=10,i=10){super(X),this.d.widthPercent=t,this.d.heightPercent=i,this.drawLayer=n.MiddleGround}width(t){return t.canvasWidth()/100*this.d.widthPercent}height(t){return t.canvasHeight()/100*this.d.heightPercent}draw(t){this.style.fillStyle=this.d.color,this.style.strokeStyle=this.d.color;let i=t.xPerc(this.d.x),s=t.yPerc(this.d.y);return t.drawRect(i,s,this.width(t),this.height(t),this.style),!0}}class _ extends d{constructor(){super(),this.listStartY=30,this.listGapFactor=10,this.applyWdHtPerc=!1,this.maxLiChars=50}}function G(){return new _}class Y extends t{constructor(t=0,i=Number.MAX_SAFE_INTEGER,s='The Title',e='#00ff37'){super(G),this.setStartTime(1e3*t),this.setEndTime(1e3*i),this.hdg=this.getHdg(),this.list=this.getList(),this.drawLayer=n.MiddleGround}init(t){return this.hdg.init(t),this.list.init(t),!0}addItem(t,i=!0,s=2){this.list.addItem(t)}width(t){return 0}height(t){return 0}update(t,i){return this.hdg.update(t,i),this.list.update(t,i),!0}draw(t){return this.hdg.draw(t),this.list.draw(t),!0}getList(){let t=new O(0,6e3,8,30,80);return t.d.colorBg='#e0e5e0',t.d.colorBorder='#008000',t.d.colorItemBorder='white',t.d.colorFont='#015901',t}getHdg(t='The Title',i='#00ff37'){let s=new u(this.getStartTime(),this.getEndTime(),t,i,50,1);return s.d.border=2,s.d.xAlignment=s.xAlignmentOptions.Mid,s.d.yAlignment=s.yAlignmentOptions.Top,s.d.flagDrawBorder=!0,s.d.flagDrawBg=!0,s.d.dynWidth=80,s.d.color='#008000',s.d.dynHeight=25,s.d.flagUseDynResize=!0,s.d.flagShrinkHeightToFit=!0,s}}class V{constructor(t){this.insert=t}slideHL(t=0,i=Number.MAX_SAFE_INTEGER,s='The Title',e='#00ff37'){let h=new Y(t,i,s,e);return this.insert(h),h}bgShapes(t=100){let i=new C;return this.insert(i),i}text(t=0,i=Number.MAX_SAFE_INTEGER,s='',e='black',h=0,r=0){let n=new u(t,i,s,e,h,r);return this.insert(n),n}rect(){let t=new I;return this.insert(t),t}fillRect(){let t=new B;return this.insert(t),t}line(t=0,i=0,s=100,e=100,h='black',r=2){let n=new M(t,i,s,e,h,r);return this.insert(n),n}list(t=0,i=Number.MAX_SAFE_INTEGER,s=10,e=10,h=80){let r=new O(t,i,s,e,h);return this.insert(r),r}grid(t=0,i=Number.MAX_SAFE_INTEGER){let s=new m(t,i);return this.insert(s),s}rGrid(t=0,i=Number.MAX_SAFE_INTEGER){let s=new S(t,i);return this.insert(s),s}counter(t=100,i=100,s=Number.MAX_SAFE_INTEGER){let e=new z;return e.d.x=t,e.d.y=i,this.insert(e),e}circle(t=100,i=100){let s=new k;return s.d.x=t,s.d.y=i,this.insert(s),s}}class U{constructor(){this.color='#efeee3'}}function q(t){return t>100?100:t<0?0:t}function j(t){let i=t/16;return Math.ceil(9*i)}class ${constructor(){this.setBWzeroNhundred=q,this.lightenDarkenColor=c,this.aspectRatioHeight=j}}class Z{constructor(t){this.insert=t,this.util=new $}h1(t=0,i=Number.MAX_SAFE_INTEGER,s='',e='008000',h=50,r=3,n=80,l=30){let d=new u(t,i,s,e,h,r);return this.insert(d),d.d.border=2,d.d.xAlignment=d.xAlignmentOptions.Mid,d.d.yAlignment=d.yAlignmentOptions.Top,d.d.flagDrawBorder=!0,d.d.flagDrawBg=!0,d.d.dynWidth=n,d.d.dynHeight=l,d.d.flagUseDynResize=!0,d.d.flagShrinkHeightToFit=!0,d}hdg(t=0,i=Number.MAX_SAFE_INTEGER,s='',e='black',h=10,r=10){let n=new u(t,i,s,e,h,r);return this.insert(n),n.d.flagDrawBg=!0,n.d.colorBg=c('#0ab513',175),n.d.border=20,n.d.flagDrawBorder=!0,n.d.colorBorder=c('#0ab513',20),n.d.fontSize=75,n}jt(t=0,i=Number.MAX_SAFE_INTEGER,s='',e='#008000'){let h=new u(t,i,s,e,50,50);return h.d.xAlignment=h.xAlignmentOptions.Mid,h.d.yAlignment=h.yAlignmentOptions.Mid,this.insert(h),h.d.flagDrawBg=!0,h.d.colorBg=c('#0ab513',175),h.d.border=2,h.d.flagDrawBorder=!0,h.d.colorBorder=c('#0ab513',20),h}}class K{constructor(t){this.insert=t}dashed(t='#dee1e2'){let i=new m;return i.shadowsOff(),this.insert(i),i.d.flagDrawNumbers=!1,i.d.colorNumbers='red',i.d.lineWidthHorizontal=1,i.d.lineWidthVertical=1,i.d.fontSize=15,i.d.colorHorizontalLines=t,i.d.colorVerticalLines=t,i.d.lineDash=[15,5],i}demo(){let t=new m;return this.insert(t),t.d.flagDrawNumbers=!0,t.data.colorNumbers='red',t.d.fontSize=12,t.d.cellWidth=100,t.d.cellHeight=20,t.d.colorHorizontalLines='blue',t.d.colorVerticalLines='brown',t.d.lineWidthVertical=10,t.d.lineWidthHorizontal=2,t}simple(t='#dee1e2'){let i=new m;return this.insert(i),i.d.colorHorizontalLines=t,i.d.colorVerticalLines=t,i}}(t=>{t.BackGround='BACKGROUND',t.MiddleGround='MIDDLEGROUND',t.ForeGround='FOREGROUND'})(n||(n={}));class J{constructor(t){this.newDataObjFn=t,this.data=this.newDataObjFn(),this.transitions=[]}add(t){let i=this.newDataObjFn();for(const t in i)i[t]=null;return i.msStart=t,this.transitions.push(i),i}insert(t){return this.transitions.push(t),t}apply(t){for(let i=this.transitions.length-1;i>=0;i--){const s=this.transitions[i];s.msStart<=t&&(this.merge(s),this.transitions.splice(i,1))}}merge(t){for(const i in this.data)t.hasOwnProperty(i)&&null!==t[i]&&(this.data[i]=t[i]);return!0}}let Q=new class extends class extends class extends class{constructor(){this.comps=[],this.util=new $}drawByDrawLayer(t,i,s){for(let e=0;e<this.comps.length;e++){let h=this.comps[e];h.drawLayer==i&&h.getStartTime()<=t&&h.getEndTime()>t&&(s.save(),h.update(t,s),h.draw(s),s.restore())}return!0}chqCollision(t,i){return null}resize(t=800,i=400){for(let s=0;s<this.comps.length;s++){this.comps[s].resize(t,i)}}}{constructor(t){super(),this.timeStart=null,this.timeEnd=1e3*t,this.interval=null,this.msPerFrame=1e3}getTimeEnd(){return this.timeEnd}setTimeEnd(t){return this.timeEnd=t,this.timeEnd}getMsDelta(){if(null==this.timeStart)return 0;return(new Date).getTime()-this.timeStart}setMsDelta(t){return null==this.timeStart||t>this.getTimeEnd()||t<0?0:(this.timeStart=(new Date).getTime()-t,this.timeStart)}stop(){return this.timeStart=null,null!==this.interval&&clearInterval(this.interval),!0}}{constructor(t,s,e=null,h){super(h),this.canvasId=t,null==e&&(e=this.util.aspectRatioHeight(s)),this.pack=new i(this.canvasId,s,e)}insert(t){return this.comps.push(t),t}setCanvas(t=800,s=null){null==s&&(s=this.util.aspectRatioHeight(t)),this.pack=new i(this.canvasId,t,s),this.resize(t,s)}getCanvasHeight(){return this.pack.canvasHeight()}getCanvasWidth(){return this.pack.canvasWidth()}}{constructor(t='bilza',i=800,s=null,e=60){super(t,i,s,e),this.background=new U,this.add=new V(this.insert.bind(this)),this.textTempl=new Z(this.insert.bind(this)),this.gridTempl=new K(this.insert.bind(this))}start(){return null===this.timeStart&&(this.stop(),this.init(),this.timeStart=(new Date).getTime(),this.interval=window.setInterval((()=>{this.draw()}),this.msPerFrame),!0)}drawInit(){this.init(),this.draw()}draw(){if(null==this.pack)throw new Error('bilzaa is not initialized');let t=this.getMsDelta();return t>=this.timeEnd&&this.stop(),this.pack.clearCanvas(),this.pack.drawBackground(this.background.color),this.drawByDrawLayer(t,n.BackGround,this.pack),this.drawByDrawLayer(t,n.MiddleGround,this.pack),this.drawByDrawLayer(t,n.ForeGround,this.pack),this.drawEvent(t),!0}drawEvent(t){return!0}mergeClip(t){for(let i=0;i<t.length;i++)this.comps.push(t[i]);return!0}dynamicCanvas(t=100,i=100){let s=window.innerWidth/100*q(t),e=window.innerHeight/100*q(i);return!(s<100||e<100)&&(this.setCanvas(s,e),!0)}dynamicFontSize(t,i=10,s=null,e=!0){null==s&&(s=i);let h=this.pack.canvasWidth()/100*i,r=this.pack.canvasWidth()/100*s;t.style.fontSize=t.d.fontSize;let n=t.d.fontSize,l=0,d=0;for(let i=1;i<900;i++)if(t.style.fontSize=i,l=t.width(this.pack),d=t.height(this.pack),l>=h||d>=r)return 0==e?(t.d.fontSize=n,t.style.fontSize=n,i):(t.d.fontSize=i,t.style.fontSize=i,t.d.fontSize);return null}init(){for(let t=0;t<this.comps.length;t++)this.comps[t].init(this.pack)}}('bilza',800,null,60);Q.gridTempl.dashed(),Q.add.counter(),Q.start();
