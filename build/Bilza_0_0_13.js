class t{constructor(t,s=0,i=Number.MAX_SAFE_INTEGER){this.compData=new o(t),this.d=this.compData.data,this.data=this.compData.data,this.drawLayer=r.MiddleGround,this.id=Math.random().toString(36).slice(2),this.style=new a,this.display=!0,this.selected=!1,this.msStart=s,this.msEnd=i,this.setStart(s),this.setEnd(i)}getSelected(){return this.selected}setSelected(t){return this.selected=t,this.selected}getDisplay(){return this.display}setDisplay(t){return this.display=t,this.display}getStart(){return this.msStart}setStart(t=0){return this.msStart=t,t}getEnd(){return this.msEnd}setEnd(t=Number.MAX_SAFE_INTEGER){return this.msEnd=t,t}width(t){return 0}height(t){return 0}draw(t){return!0}update(t,s){return!0}addTransition(t){return this.compData.add(t)}checkCollision(t,s,i){return!1}shadowsOff(){this.style.shadowBlur=0,this.style.shadowOffsetX=0,this.style.shadowOffsetY=0}shadowsOn(){this.style.shadowBlur=6,this.style.shadowOffsetX=10,this.style.shadowOffsetY=10,this.style.shadowColor='grey'}resize(t,s){return 0}drawBoundingRectangle(t){return this.style.strokeStyle=this.d.colorBoundingRectangle,t.drawRect(t.xPerc(this.d.x),t.yPerc(this.d.y),this.width(t),this.height(t),this.style),!0}}class s{constructor(t='bilza',s=0,i=0){let e=document.getElementById(t);if(null==e){this.canvas=document.createElement('canvas'),document.getElementsByTagName('body')[0].appendChild(this.canvas)}else this.canvas=e;if(this.canvas.id=t,this.canvas.width=s,this.canvas.height=i,this.canvas.style.position='static',this.canvas.style.border='1px solid blue',null==this.canvas)throw new Error('canvas not found');if(this.canvas.width=0==s?window.innerWidth:s,this.canvas.height=0==i?window.innerHeight:i,this.ctx=this.canvas.getContext('2d'),null==this.ctx)throw new Error('could not obtain drawing context')}drawBackground(t='blue'){return this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle}canvasWidth(){return this.canvas.width}canvasHeight(){return this.canvas.height}quadraticCurveTo(t,s,i,e){this.commitCtxData(e),this.beginPath(),this.moveTo(t),this.ctx.quadraticCurveTo(i.x,i.y,s.x,s.y),this.stroke()}restore(){this.ctx.restore()}save(){this.ctx.save()}clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}charsWidth(t='',s,i){this.ctx.save(),this.setFont(s,i);let e=this.ctx.measureText(t).width;return this.ctx.restore(),Math.ceil(e)}textWidth(t,s){this.ctx.save(),this.commitCtxData(s);let i=this.ctx.measureText(t).width;return this.ctx.restore(),Math.ceil(i)}drawLine(t,s,i,e,r){this.commitCtxData(r),this.ctx.beginPath(),this.ctx.moveTo(t,s),this.ctx.lineTo(i,e),this.ctx.stroke()}line(t,s,i,e){this.ctx.beginPath(),this.ctx.moveTo(t,s),this.ctx.lineTo(i,e),this.ctx.stroke()}beginPath(){this.ctx.beginPath()}closePath(){this.ctx.closePath()}moveTo(t){this.ctx.moveTo(t.x,t.y)}lineTo(t,s,i){this.commitCtxData(i),this.ctx.lineTo(t,s)}fill(t){this.commitCtxData(t),this.ctx.fill()}stroke(){this.ctx.stroke()}drawRect(t,s,i,e,r){this.commitCtxData(r),this.ctx.beginPath(),this.ctx.rect(t,s,i,e),this.ctx.stroke()}drawFillRect(t,s,i,e,r){this.commitCtxData(r),this.ctx.fillRect(t,s,i,e)}arcTo(t,s,i,e=20){this.commitCtxData(i),this.ctx.arcTo(t.x,t.y,s.x,s.y,e)}drawCircle(t,s,i,e,r,h=0,a=2*Math.PI){this.commitCtxData(r),this.ctx.beginPath(),this.ctx.arc(t+i,s+i,i,h,a,!1),1==e&&this.ctx.fill(),this.ctx.stroke()}drawText(t,s,i,e){this.commitCtxData(e),this.ctx.textBaseline='top',this.ctx.fillText(t,s,i)}drawIcon(t,s,i,e){this.commitCtxData(e),this.ctx.textBaseline='top',this.ctx.fillText(String.fromCharCode(t),s,i)}drawTextstroke(t,s,i,e){this.commitCtxData(e),this.ctx.textBaseline='top',this.ctx.strokeText(t,s,i)}commitCtxData(t){null!==t.lineCap&&(this.ctx.lineCap='round'),null!==t.globalAlpha&&(this.ctx.globalAlpha=t.globalAlpha),null!==t.shadowBlur&&(this.ctx.shadowBlur=t.shadowBlur),null!==t.shadowOffsetY&&(this.ctx.shadowOffsetY=t.shadowOffsetY),null!==t.shadowOffsetX&&(this.ctx.shadowOffsetX=t.shadowOffsetX),null!==t.lineWidth&&(this.ctx.lineWidth=t.lineWidth),null!==t.shadowColor&&(this.ctx.shadowColor=t.shadowColor),null!==t.strokeStyle&&(this.ctx.strokeStyle=t.strokeStyle),null!==t.fillStyle&&(this.ctx.fillStyle=t.fillStyle),null!==t.lineDash&&this.ctx.setLineDash(t.lineDash),this.setFont(t.fontSize,t.fontName)}setFont(t,s){let i=`${t}px ${s}`;this.ctx.font=i}xPerc(t){let s=this.setBwZeroNhundred(t);return this.canvas.width/100*s}yPerc(t){let s=this.setBwZeroNhundred(t);return this.canvas.height/100*s}setBwZeroNhundred(t){return t<0?0:t>100?100:t}}var i,e,r,h;(t=>{t.Round='round',t.Butt='butt',t.Square='square'})(i||(i={})),(t=>{t.Arial='Arial',t.ArialBlack='Arial Black',t.Verdana='Verdana',t.Tahoma='Tahoma',t.Impact='Impact',t.Times='Times',t.Helvetica='Helvetica',t.TimesNewRoman='Times New Roman',t.Didot='Didot',t.Calibri='Calibri',t.Georgia='Georgia',t.AmericanTypewriter='American Typewriter',t.Courier='Courier',t.CourierNew='Courier New',t.LucidaConsole='Lucida Console',t.Monaco='Monaco',t.BradleyHand='Bradley Hand',t.BrushScriptMT='Brush Script MT',t.BrushScript='Brush Script',t.Luminari='Luminari'})(e||(e={}));class a{constructor(t=0){this.msStart=t,this.fontSize=25,this.fontName=e.Luminari,this.fillStyle='green',this.strokeStyle='red',this.lineWidth=2,this.shadowColor='black',this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0,this.globalAlpha=1,this.lineCap=i.Round,this.lineDash=[]}merge(t){null!==t.lineCap&&(this.lineCap=t.lineCap),null!==t.globalAlpha&&(this.globalAlpha=t.globalAlpha),null!==t.shadowBlur&&(this.shadowBlur=t.shadowBlur),null!==t.shadowOffsetY&&(this.shadowOffsetY=t.shadowOffsetY),null!==t.shadowOffsetX&&(this.shadowOffsetX=t.shadowOffsetX),null!==t.lineWidth&&(this.lineWidth=t.lineWidth),null!==t.shadowColor&&(this.shadowColor=t.shadowColor),null!==t.strokeStyle&&(this.strokeStyle=t.strokeStyle),null!==t.fillStyle&&(this.fillStyle=t.fillStyle),null!==t.fontSize&&(this.fontSize=t.fontSize),null!==t.fontName&&(this.fontName=t.fontName),null!==t.lineDash&&(this.lineDash=t.lineDash)}}class n{constructor(){this.color='#efeee3'}}function l(t){return t>100?100:t<0?0:t}class d extends class extends class extends class{constructor(){this.comps=[]}drawByDrawLayer(t,s,i){for(let e=0;e<this.comps.length;e++){let r=this.comps[e];r.drawLayer==s&&r.getStart()<=t&&r.getEnd()>t&&(i.save(),r.update(t,i),r.draw(i),i.restore())}return!0}chqCollision(t,s){return null}insert(t){return this.comps.push(t),t}resize(t=800,s=400){for(let i=0;i<this.comps.length;i++){this.comps[i].resize(t,s)}}}{constructor(t){super(),this.timeStart=null,this.timeEnd=1e3*t,this.interval=null,this.msPerFrame=1e3}getTimeEnd(){return this.timeEnd}setTimeEnd(t){return this.timeEnd=t,this.timeEnd}getMsDelta(){if(null==this.timeStart)return 0;return(new Date).getTime()-this.timeStart}stop(){return this.timeStart=null,null!==this.interval&&clearInterval(this.interval),!0}}{constructor(t,i,e,r){super(r),this.canvasId=t,this.pack=new s(this.canvasId,i,e)}setCanvas(t=800,i=400){this.pack=new s(this.canvasId,t,i),this.resize(t,i)}getCanvasHeight(){return this.pack.canvasHeight()}getCanvasWidth(){return this.pack.canvasWidth()}}{constructor(t='bilza',s=800,i=350,e=60){super(t,s,i,e),this.background=new n,this.add=new X(this.comps)}start(){return null===this.timeStart&&(this.stop(),this.timeStart=(new Date).getTime(),this.interval=window.setInterval((()=>{this.draw()}),this.msPerFrame),!0)}draw(){if(null==this.pack)throw new Error('bilzaa is not initialized');let t=this.getMsDelta();return t>=this.timeEnd&&this.stop(),this.pack.clearCanvas(),this.pack.drawBackground(this.background.color),this.drawByDrawLayer(t,r.BackGround,this.pack),this.drawByDrawLayer(t,r.ForeGround,this.pack),this.drawByDrawLayer(t,r.MiddleGround,this.pack),!0}chqCollision(t,s){return null}mergeClip(t){for(let s=0;s<t.length;s++)this.comps.push(t[s]);return!0}dynamicCanvas(t=100,s=100){let i=window.innerWidth/100*l(t),e=window.innerHeight/100*l(s);return!(i<100||e<100)&&(this.setCanvas(i,e),!0)}}(t=>{t.BackGround='BACKGROUND',t.MiddleGround='MIDDLEGROUND',t.ForeGround='FOREGROUND'})(r||(r={}));class o{constructor(t){this.newDataObjFn=t,this.data=this.newDataObjFn(),this.transitions=[]}add(t){let s=this.newDataObjFn();for(const t in s)s[t]=null;return s.msStart=t,this.transitions.push(s),s}insert(t){return this.transitions.push(t),t}apply(t){for(let s=this.transitions.length-1;s>=0;s--){const i=this.transitions[s];i.msStart<=t&&(this.merge(i),this.transitions.splice(s,1))}}merge(t){for(const s in this.data)t.hasOwnProperty(s)&&null!==t[s]&&(this.data[s]=t[s]);return!0}}class c{constructor(){this.msStart=0,this.x=0,this.y=0,this.positioned=!0,this.responsive=!0,this.visible=!0,this.colorShadow='grey',this.displayShadow=!1,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0,this.colorBoundingRectangle='black'}}(t=>{t.Left='LEFT',t.Right='RIGHT',t.Mid='MID',t.Off='OFF'})(h||(h={}));class u extends c{constructor(){super(),this.xAlignment=h.Left,this.content='Text',this.padding=2,this.margin=2,this.colorMargin='black',this.colorBg='#e1f4e1',this.color='black',this.widthPercent=10,this.heightPercent=10,this.flagDrawMargin=!1,this.flagDrawBg=!1,this.flagDim=!1}}function w(){return new u}class y extends t{constructor(t='',s='black',i=0,e=0,a=10,n=10){super(w),this.xAlignmentOptions=h,this.d.content=t,this.d.x=i,this.d.y=e,this.d.color=s,this.d.colorMargin=s,this.d.colorBg='#e1f4e1',this.d.widthPercent=a,this.d.heightPercent=n,this.drawLayer=r.MiddleGround}width(t){return t.textWidth(this.d.content,this.style)+this.factorsWOFontSize()}height(t){return t.textWidth('Wi',this.style)+this.factorsWOFontSize()}update(t,s){return this.setFontSize(s),!0}draw(t){return 1==this.d.flagDrawBg&&this.drawBg(t),1==this.d.flagDrawMargin&&this.drawMargin(t),this.style.fillStyle=this.d.color,this.style.strokeStyle=this.d.color,t.drawText(this.d.content,this.getX(t)+(this.d.padding+this.d.margin),t.yPerc(this.d.y)+(this.d.padding+this.d.margin),this.style),!0}setFontSize(t){let s=t.canvasWidth()/100*this.d.widthPercent,i=t.canvasWidth()/100*this.d.heightPercent;for(let e=1;e<300;e++){this.style.fontSize=e;let r=this.width(t),h=this.height(t);if(r>=s||h>=i)return this.style.fontSize}return this.style.fontSize}drawMargin(t){return this.style.strokeStyle=this.d.colorMargin,this.style.lineWidth=this.d.margin,t.drawRect(this.getX(t),t.yPerc(this.d.y),this.width(t),this.height(t),this.style),!0}drawBg(t){return this.style.fillStyle=this.d.colorBg,t.drawFillRect(this.getX(t),t.yPerc(this.d.y),this.width(t),this.height(t),this.style),!0}factorsWOFontSize(){return 2*this.d.padding+2*this.d.margin}getX(t){let s=t.xPerc(this.d.x);switch(this.d.xAlignment){case this.xAlignmentOptions.Left:break;case this.xAlignmentOptions.Mid:s-=this.width(t)/2;break;case this.xAlignmentOptions.Right:break;default:return s}return s}}function g(){return new x}class x extends c{constructor(){super(),this.msStart=0,this.fontSize=8,this.cellWidth=50,this.cellHeight=50,this.colorHorizontalLines='grey',this.colorVerticalLines='grey',this.colorNumbers='grey',this.flagDrawNumbers=!1,this.flagDrawHorizontal=!1,this.flagDrawVertical=!1,this.lineWidthVertical=1,this.lineWidthHorizontal=1,this.lineDash=[]}}class m extends t{constructor(t=0,s=Number.MAX_SAFE_INTEGER){super(g,t,s),this.drawLayer=r.BackGround}draw(t){return this.draw_horizontal(t),this.draw_vertical(t),!0}draw_horizontal(t){let s=0,i=t.canvasWidth(),e=t.canvasHeight(),r=0+i;do{this.style.strokeStyle=this.d.colorHorizontalLines,this.style.lineDash=this.d.lineDash,this.style.lineWidth=this.d.lineWidthHorizontal,t.drawLine(0,s,r,s,this.style),1==this.d.flagDrawNumbers&&(this.style.strokeStyle=this.d.colorNumbers,this.drawText(t,s,0,s)),s+=this.d.cellHeight}while(e>s)}draw_vertical(t){let s=0,i=t.canvasWidth(),e=0+t.canvasHeight();do{this.style.strokeStyle=this.d.colorVerticalLines,this.style.lineWidth=this.d.lineWidthVertical,this.style.lineDash=this.d.lineDash,t.drawLine(s,0,s,e,this.style),1==this.d.flagDrawNumbers&&(this.style.strokeStyle=this.d.colorNumbers,this.drawText(t,s,s,0)),s+=this.d.cellWidth}while(i>s)}drawText(t,s,i,e){this.style.fontSize=this.d.fontSize,this.style.strokeStyle=this.d.colorNumbers,this.style.fillStyle=this.d.colorNumbers,t.drawText(s.toString(),i+this.d.lineWidthVertical-2,e+this.d.lineWidthHorizontal,this.style)}}class f extends c{constructor(){super(),this.msStart=0,this.x=10,this.y=10,this.widthPercent=200,this.heightPercent=50,this.color='red',this.widthPercent=10,this.heightPercent=10}}function p(){return new f}class S extends t{constructor(t=10,s=10){super(p),this.d.widthPercent=t,this.d.heightPercent=s,this.drawLayer=r.MiddleGround}width(t){return t.canvasWidth()/100*this.d.widthPercent}height(t){return t.canvasHeight()/100*this.d.heightPercent}draw(t){this.style.fillStyle=this.d.color,this.style.strokeStyle=this.d.color;let s=t.xPerc(this.d.x),i=t.yPerc(this.d.y);return t.drawFillRect(s,i,this.width(t),this.height(t),this.style),!0}resize(t,s){return 0}}class v extends c{constructor(){super(),this.msStart=0,this.x=0,this.y=0,this.fontSize=30,this.content='sec: ',this.frame=0,this.padding=4,this.colorRectangle='black',this.colorNumbers='yellow'}}function T(){return new v}class b extends t{constructor(t=0,s=Number.MAX_SAFE_INTEGER){super(T,t,s),this.drawLayer=r.MiddleGround}width(t){this.style.fontSize=this.d.fontSize;const s=`   ${this.d.content}   ${parseInt(this.d.frame.toString())} `;return t.textWidth(s,this.style)+2*this.d.padding+10}height(t){return this.style.fontSize=this.d.fontSize,t.textWidth('Xi',this.style)}update(t,s){return this.d.frame=t/1e3,!0}draw(t){let s='Frame:'+parseInt(this.d.frame.toString());return this.style.fillStyle=this.d.colorRectangle,t.drawFillRect(this.d.x,this.d.y,this.width(t)+this.d.padding,this.height(t)+this.d.padding,this.style),this.style.fillStyle=this.d.colorNumbers,t.drawText(s,this.d.x+this.d.padding,this.d.y+this.d.padding,this.style),!0}}class D extends c{constructor(){super(),this.msStart=0,this.x=0,this.y=0,this.startAngle=0,this.endAngle=2*Math.PI,this.radius=100,this.fill=!0}}function k(){return new D}class A extends t{constructor(){super(k)}width(t){return 2*this.d.radius}height(t){return 2*this.d.radius}draw(t){return this.d.startAngle>=7?this.d.startAngle=0:this.d.startAngle++,t.drawCircle(this.d.x,this.d.y,this.d.radius,this.d.fill,this.style,this.d.startAngle),!0}}class C extends c{constructor(){super(),this.count=200}}function P(){return new C}class B extends t{constructor(t=100){super(P),this.d.count=t,this.drawLayer=r.BackGround}width(t){return 0}height(t){return 0}draw(t){this.style.fillStyle='#f2edba',this.style.strokeStyle='#efeee3';for(let s=0;s<this.d.count;s++)t.drawCircle(Math.ceil(Math.random()*t.canvasWidth()),Math.ceil(Math.random()*t.canvasHeight()),15,!0,this.style);return!0}}class W extends c{constructor(){super(),this.msStart=0,this.x1=0,this.y1=0,this.x2=800,this.y2=100,this.lineWidth=2,this.color='red',this.colorShadow='grey'}}function z(){return new W}class M extends t{constructor(t=0,s=0,i=100,e=100,h='black',a=2){super(z),this.d.x1=t,this.d.y1=s,this.d.x2=i,this.d.y2=e,this.d.color=h,this.d.lineWidth=a,this.drawLayer=r.MiddleGround}width(t){return Math.abs(this.d.x1-this.d.x2)}height(t){return Math.abs(this.d.y1-this.d.y2)}draw(t){return this.style.fillStyle=this.d.color,this.style.strokeStyle=this.d.color,this.style.lineWidth=this.d.lineWidth,t.drawLine(t.xPerc(this.d.x1),t.yPerc(this.d.y1),t.xPerc(this.d.x2),t.yPerc(this.d.y2),this.style),!0}}class N extends c{constructor(){super(),this.lineWidth=5,this.flagFilled=!0,this.color='red'}}function E(){return new N}class O{constructor(t=0,s=0){this.x=t,this.y=s}}class L extends t{constructor(t=0,s=0){super(E),this.moveTo=new O(t,s),this.vertices=[]}draw(t){if(this.vertices.length<2)return!1;t.commitCtxData(this.style),t.ctx.beginPath(),1==this.d.responsive?t.ctx.moveTo(t.xPerc(this.moveTo.x),t.yPerc(this.moveTo.y)):t.ctx.moveTo(this.moveTo.x,this.moveTo.y);for(let s=0;s<this.vertices.length;s++){const i=this.vertices[s];1==this.d.responsive?t.ctx.lineTo(t.xPerc(i.x),t.yPerc(i.y)):t.ctx.lineTo(i.x,i.y)}return t.ctx.closePath(),1==this.d.flagFilled?t.ctx.fill():t.ctx.stroke(),!0}add(t=0,s=0){let i=new O(t,s);this.vertices.push(i)}}class R extends c{constructor(){super(),this.msStart=0,this.x=10,this.y=10,this.color='grey',this.widthPercent=10,this.heightPercent=10}}function F(){return new R}class H extends t{constructor(t=10,s=10){super(F),this.d.widthPercent=t,this.d.heightPercent=s,this.drawLayer=r.MiddleGround}width(t){return t.canvasWidth()/100*this.d.widthPercent}height(t){return t.canvasHeight()/100*this.d.heightPercent}draw(t){this.style.fillStyle=this.d.color,this.style.strokeStyle=this.d.color;let s=t.xPerc(this.d.x),i=t.yPerc(this.d.y);return t.drawRect(s,i,this.width(t),this.height(t),this.style),!0}}class G{constructor(t){this.addToArray=t}hdg(t='H1',s='#008000',i=null,e=50,r=5,h=10,a=10){let n=new y(t,s,e,r,h,a);return this.addToArray.push(n),n.d.padding=5,n.d.margin=5,n.d.xAlignment=n.xAlignmentOptions.Mid,n.d.colorBg=function(t,s){var i=!1;'#'==t[0]&&(t=t.slice(1),i=!0);var e=parseInt(t,16),r=(e>>16)+s;r>255?r=255:r<0&&(r=0);var h=(e>>8&255)+s;h>255?h=255:h<0&&(h=0);var a=(255&e)+s;return a>255?a=255:a<0&&(a=0),(i?'#':'')+(a|h<<8|r<<16).toString(16)}(s,200),n.d.flagDrawMargin=!0,n.d.flagDrawBg=!0,null!==i&&(n.d.color=i),n}}class I{constructor(t){this.addToArray=t}dashed(t='#dee1e2'){let s=new m;return s.shadowsOff(),this.addToArray.push(s),s.d.flagDrawNumbers=!1,s.d.colorNumbers='red',s.d.lineWidthHorizontal=1,s.d.lineWidthVertical=1,s.d.fontSize=15,s.d.colorHorizontalLines=t,s.d.colorVerticalLines=t,s.d.lineDash=[15,5],s}demo(){let t=new m;return this.addToArray.push(t),t.d.flagDrawNumbers=!0,t.data.colorNumbers='red',t.d.fontSize=12,t.d.cellWidth=100,t.d.cellHeight=20,t.d.colorHorizontalLines='blue',t.d.colorVerticalLines='brown',t.d.lineWidthVertical=10,t.d.lineWidthHorizontal=2,t}simple(t='#dee1e2'){let s=new m;return this.addToArray.push(s),s.d.colorHorizontalLines=t,s.d.colorVerticalLines=t,s}}class X{constructor(t=[]){this.addToArray=t,this.textTempl=new G(t),this.gridTempl=new I(t)}bgShapes(t=100){let s=new B;return this.addToArray.push(s),s}text(t='',s='black',i=0,e=0,r=10){let h=new y(t,s,i,e,r);return this.addToArray.push(h),h}rect(){let t=new H;return this.addToArray.push(t),t}fillRect(){let t=new S;return this.addToArray.push(t),t}lines(t=0,s=0){let i=new L(t,s);return this.addToArray.push(i),i}line(t=0,s=0,i=100,e=100,r='black',h=2){let a=new M(t,s,i,e,r,h);return this.addToArray.push(a),a}grid(t=0,s=Number.MAX_SAFE_INTEGER){let i=new m(t,s);return this.addToArray.push(i),i}counter(t=100,s=100,i=Number.MAX_SAFE_INTEGER){let e=new b;return e.d.x=t,e.d.y=s,this.addToArray.push(e),e}circle(t=100,s=100){let i=new A;return i.d.x=t,i.d.y=s,this.addToArray.push(i),i}spit(){return this.addToArray}}export{X as CompFactory,t as Component,r as DrawLayer,e as FontNames,s as Pack,a as Style,o as Transition,d as default};
