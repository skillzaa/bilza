class t{constructor(t,s=0,i=Number.MAX_SAFE_INTEGER){this.compData=new it(t),this.d=this.compData.data,this.data=this.compData.data,this.drawLayer=a.MiddleGround,this.id=Math.random().toString(36).slice(2),this.style=new n,this.msStart=s,this.msEnd=i,this.setStartTime(s),this.setEndTime(i)}getStartTime(){return this.msStart}setStartTime(t=0){return this.msStart=t,t}getEndTime(){return this.msEnd}setEndTime(t=Number.MAX_SAFE_INTEGER){return this.msEnd=t,t}width(t){return 0}height(t){return 0}draw(t){return!0}update(t,s){return!0}addTransition(t){return this.compData.add(t)}checkCollision(t,s,i){return!1}shadowsOff(){this.style.shadowBlur=0,this.style.shadowOffsetX=0,this.style.shadowOffsetY=0}setShadow(t=8,s=10,i=10,e='#ada6a6'){this.style.shadowBlur=t,this.style.shadowOffsetX=s,this.style.shadowOffsetY=i,this.style.shadowColor=e}shadowsOn(){this.style.shadowBlur=8,this.style.shadowOffsetX=10,this.style.shadowOffsetY=10,this.style.shadowColor='#ada6a6'}resize(t,s){return 0}drawBoundingRectangle(t){return this.style.strokeStyle='black',t.drawRect(t.xPerc(this.d.x),t.yPerc(this.d.y),this.width(t),this.height(t),this.style),!0}applyTransition(t){this.compData.apply(t)}}class s{constructor(t='bilza',s=0,i=0){let e=document.getElementById(t);if(null==e){this.canvas=document.createElement('canvas'),document.getElementsByTagName('body')[0].appendChild(this.canvas)}else this.canvas=e;if(this.canvas.id=t,this.canvas.width=s,this.canvas.height=i,this.canvas.style.position='static',this.canvas.style.border='1px solid blue',null==this.canvas)throw new Error('canvas not found');if(this.canvas.width=0==s?window.innerWidth:s,this.canvas.height=0==i?window.innerHeight:i,this.ctx=this.canvas.getContext('2d'),null==this.ctx)throw new Error('could not obtain drawing context')}drawBackground(t='blue'){return this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle}canvasWidth(){return this.canvas.width}canvasHeight(){return this.canvas.height}quadraticCurveTo(t,s,i,e){this.commitCtxData(e),this.beginPath(),this.moveTo(t),this.ctx.quadraticCurveTo(i.x,i.y,s.x,s.y),this.stroke()}restore(){this.ctx.restore()}save(){this.ctx.save()}clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}charsWidth(t='',s,i){this.ctx.save(),this.setFont(s,i);let e=this.ctx.measureText(t).width;return this.ctx.restore(),Math.ceil(e)}textWidth(t,s){this.ctx.save(),this.commitCtxData(s);let i=this.ctx.measureText(t).width;return this.ctx.restore(),Math.ceil(i)}drawLine(t,s,i,e,r){this.commitCtxData(r),this.ctx.beginPath(),this.ctx.moveTo(t,s),this.ctx.lineTo(i,e),this.ctx.stroke()}line(t,s,i,e){this.ctx.beginPath(),this.ctx.moveTo(t,s),this.ctx.lineTo(i,e),this.ctx.stroke()}beginPath(){this.ctx.beginPath()}closePath(){this.ctx.closePath()}moveTo(t){this.ctx.moveTo(t.x,t.y)}lineTo(t,s,i){this.commitCtxData(i),this.ctx.lineTo(t,s)}fill(t){this.commitCtxData(t),this.ctx.fill()}stroke(){this.ctx.stroke()}drawRect(t,s,i,e,r){this.commitCtxData(r),this.ctx.beginPath(),this.ctx.rect(t,s,i,e),this.ctx.stroke()}drawFillRect(t,s,i,e,r){this.commitCtxData(r),this.ctx.fillRect(t,s,i,e)}arcTo(t,s,i,e=20){this.commitCtxData(i),this.ctx.arcTo(t.x,t.y,s.x,s.y,e)}drawCircle(t,s,i,e,r,h=0,a=2*Math.PI){this.commitCtxData(r),this.ctx.beginPath(),this.ctx.arc(t+i,s+i,i,h,a,!1),1==e&&this.ctx.fill(),this.ctx.stroke()}drawText(t,s,i,e){this.commitCtxData(e),this.ctx.textBaseline='top',this.ctx.fillText(t,s,i)}drawIcon(t,s,i,e){this.commitCtxData(e),this.ctx.textBaseline='top',this.ctx.fillText(String.fromCharCode(t),s,i)}drawTextstroke(t,s,i,e){this.commitCtxData(e),this.ctx.textBaseline='top',this.ctx.strokeText(t,s,i)}commitCtxData(t){null!==t.lineCap&&(this.ctx.lineCap='round'),null!==t.globalAlpha&&(this.ctx.globalAlpha=t.globalAlpha),null!==t.shadowBlur&&(this.ctx.shadowBlur=t.shadowBlur),null!==t.shadowOffsetY&&(this.ctx.shadowOffsetY=t.shadowOffsetY),null!==t.shadowOffsetX&&(this.ctx.shadowOffsetX=t.shadowOffsetX),null!==t.lineWidth&&(this.ctx.lineWidth=t.lineWidth),null!==t.shadowColor&&(this.ctx.shadowColor=t.shadowColor),null!==t.strokeStyle&&(this.ctx.strokeStyle=t.strokeStyle),null!==t.fillStyle&&(this.ctx.fillStyle=t.fillStyle),null!==t.lineDash&&this.ctx.setLineDash(t.lineDash),this.setFont(t.fontSize,t.fontName)}setFont(t,s){let i=`${t}px ${s}`;this.ctx.font=i}xPerc(t){let s=this.setBwZeroNhundred(t);return this.canvas.width/100*s}yPerc(t){let s=this.setBwZeroNhundred(t);return this.canvas.height/100*s}setBwZeroNhundred(t){return t<0?0:t>100?100:t}}var i,e,r,h,a;(t=>{t.Round='round',t.Butt='butt',t.Square='square'})(i||(i={})),(t=>{t.Arial='Arial',t.ArialBlack='Arial Black',t.Verdana='Verdana',t.Tahoma='Tahoma',t.Impact='Impact',t.Times='Times',t.Helvetica='Helvetica',t.TimesNewRoman='Times New Roman',t.Didot='Didot',t.Calibri='Calibri',t.Georgia='Georgia',t.AmericanTypewriter='American Typewriter',t.Courier='Courier',t.CourierNew='Courier New',t.LucidaConsole='Lucida Console',t.Monaco='Monaco',t.BradleyHand='Bradley Hand',t.BrushScriptMT='Brush Script MT',t.BrushScript='Brush Script',t.Luminari='Luminari'})(e||(e={}));class n{constructor(t=0){this.msStart=t,this.fontSize=25,this.fontName=e.Luminari,this.fillStyle='green',this.strokeStyle='red',this.lineWidth=2,this.shadowColor='black',this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0,this.globalAlpha=1,this.lineCap=i.Round,this.lineDash=[]}merge(t){null!==t.lineCap&&(this.lineCap=t.lineCap),null!==t.globalAlpha&&(this.globalAlpha=t.globalAlpha),null!==t.shadowBlur&&(this.shadowBlur=t.shadowBlur),null!==t.shadowOffsetY&&(this.shadowOffsetY=t.shadowOffsetY),null!==t.shadowOffsetX&&(this.shadowOffsetX=t.shadowOffsetX),null!==t.lineWidth&&(this.lineWidth=t.lineWidth),null!==t.shadowColor&&(this.shadowColor=t.shadowColor),null!==t.strokeStyle&&(this.strokeStyle=t.strokeStyle),null!==t.fillStyle&&(this.fillStyle=t.fillStyle),null!==t.fontSize&&(this.fontSize=t.fontSize),null!==t.fontName&&(this.fontName=t.fontName),null!==t.lineDash&&(this.lineDash=t.lineDash)}}class l{constructor(){this.msStart=0,this.x=0,this.y=0,this.selected=!1,this.positioned=!0,this.responsive=!0,this.visible=!0,this.colorShadow='grey',this.displayShadow=!1,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0,this.colorBoundingRectangle='black'}}(t=>{t.Left='LEFT',t.Right='RIGHT',t.Mid='MID',t.Off='OFF'})(r||(r={})),(t=>{t.Top='TOP',t.Mid='MID',t.Bot='BOT'})(h||(h={}));class d extends l{constructor(){super(),this.xAlignment=r.Left,this.yAlignment=h.Top,this.content='Text',this.padding=2,this.margin=2,this.border=2,this.colorBorder='black',this.colorBg='#e1f4e1',this.color='black',this.widthPercent=10,this.heightPercent=10,this.fontSize=25,this.flagDrawContent=!0,this.flagDrawBorder=!1,this.dynamicFontSize=!0,this.flagDrawBg=!1,this.maxDisplayChars=200,this.flagTextShadow=!1,this.flagBgShadow=!1}}function o(){return new d}function c(t,s){var i=!1;'#'==t[0]&&(t=t.slice(1),i=!0);var e=parseInt(t,16),r=(e>>16)+s;r>255?r=255:r<0&&(r=0);var h=(e>>8&255)+s;h>255?h=255:h<0&&(h=0);var a=(255&e)+s;return a>255?a=255:a<0&&(a=0),(i?'#':'')+(a|h<<8|r<<16).toString(16)}class u extends t{constructor(t=0,s=Number.MAX_SAFE_INTEGER,i='',e='black',n=0,l=0,d=10,u=10){super(o),this.xAlignmentOptions=r,this.yAlignmentOptions=h,this.setStartTime(1e3*t),this.setEndTime(1e3*s),this.d.content=i,this.d.x=n,this.d.y=l,this.d.color=e,this.d.colorBorder=e,this.d.colorBg=c(e,10),this.d.widthPercent=d,this.d.heightPercent=u,this.drawLayer=a.MiddleGround}width(t){return t.textWidth(this.d.content.substring(0,this.d.maxDisplayChars),this.style)+2*this.d.padding+2*this.d.margin+2*this.d.border}height(t){return t.textWidth('W',this.style)+2*this.d.padding+2*this.d.margin+2*this.d.border}draw(t){return 1==this.d.dynamicFontSize&&this.setDynamicFontSize(t),1==this.d.flagDrawBg&&this.drawBg(t),1==this.d.flagDrawBorder&&this.drawBorder(t),1==this.d.flagDrawContent&&this.drawContent(t),!0}setDynamicFontSize(t){let s=t.canvasWidth()/100*this.d.widthPercent,i=t.canvasWidth()/100*this.d.heightPercent;for(let e=1;e<300;e++){this.d.fontSize=e;let r=this.width(t),h=this.height(t);if(r>=s||h>=i)return this.d.fontSize}return this.style.fontSize}drawBorder(t){return this.shadowsOff(),this.style.fillStyle=this.d.colorBorder,this.style.strokeStyle=this.d.colorBorder,this.style.lineWidth=this.d.border,this.style.fontSize=this.d.fontSize,t.drawRect(this.getX(t)+this.d.margin,this.getY(t)+this.d.margin,this.width(t),this.height(t),this.style),!0}drawBg(t){return 1==this.d.flagBgShadow?this.shadowsOn():this.shadowsOff(),this.style.fillStyle=this.d.colorBg,this.style.strokeStyle=this.d.colorBg,this.style.fontSize=this.d.fontSize,t.drawFillRect(this.getX(t)+this.d.margin,this.getY(t)+this.d.margin,this.width(t),this.height(t),this.style),!0}drawContent(t){1==this.d.flagTextShadow?(this.style.shadowBlur=this.d.shadowBlur,this.style.shadowOffsetX=this.d.shadowOffsetX,this.style.shadowOffsetY=this.d.shadowOffsetY,this.style.shadowColor=this.d.colorShadow):this.shadowsOff(),this.style.fillStyle=this.d.color,this.style.strokeStyle=this.d.color,this.style.fontSize=this.d.fontSize,t.drawText(this.d.content.substring(0,this.d.maxDisplayChars),this.getX(t)+(this.d.margin+this.d.border+this.d.padding),this.getY(t)+(this.d.margin+this.d.border+this.d.padding),this.style)}getX(t){let s=t.xPerc(this.d.x);switch(this.d.xAlignment){case this.xAlignmentOptions.Left:break;case this.xAlignmentOptions.Mid:s-=this.width(t)/2;break;case this.xAlignmentOptions.Right:s-=this.width(t)}return s}getY(t){let s=t.yPerc(this.d.y);switch(this.d.yAlignment){case this.yAlignmentOptions.Top:break;case this.yAlignmentOptions.Mid:s-=this.height(t)/2;break;case this.yAlignmentOptions.Bot:s-=this.height(t)}return s}}function w(){return new g}class g extends l{constructor(){super(),this.fontSize=8,this.cellWidth=50,this.cellHeight=50,this.colorHorizontalLines='grey',this.colorVerticalLines='grey',this.colorNumbers='grey',this.flagDrawNumbers=!1,this.flagDrawHorizontal=!1,this.flagDrawVertical=!1,this.lineWidthVertical=1,this.lineWidthHorizontal=1,this.lineDash=[]}}class y extends t{constructor(t=0,s=Number.MAX_SAFE_INTEGER){super(w,t,s),this.drawLayer=a.BackGround}draw(t){return this.draw_horizontal(t),this.draw_vertical(t),!0}draw_horizontal(t){let s=0,i=t.canvasWidth(),e=t.canvasHeight(),r=0+i;do{this.style.strokeStyle=this.d.colorHorizontalLines,this.style.lineDash=this.d.lineDash,this.style.lineWidth=this.d.lineWidthHorizontal,t.drawLine(0,s,r,s,this.style),1==this.d.flagDrawNumbers&&(this.style.strokeStyle=this.d.colorNumbers,this.drawText(t,s,0,s)),s+=this.d.cellHeight}while(e>s)}draw_vertical(t){let s=0,i=t.canvasWidth(),e=0+t.canvasHeight();do{this.style.strokeStyle=this.d.colorVerticalLines,this.style.lineWidth=this.d.lineWidthVertical,this.style.lineDash=this.d.lineDash,t.drawLine(s,0,s,e,this.style),1==this.d.flagDrawNumbers&&(this.style.strokeStyle=this.d.colorNumbers,this.drawText(t,s,s,0)),s+=this.d.cellWidth}while(i>s)}drawText(t,s,i,e){this.style.fontSize=this.d.fontSize,this.style.strokeStyle=this.d.colorNumbers,this.style.fillStyle=this.d.colorNumbers,t.drawText(s.toString(),i+this.d.lineWidthVertical-2,e+this.d.lineWidthHorizontal,this.style)}}function m(){return new f}class f extends l{constructor(){super(),this.msStart=0,this.fontSize=8,this.cellWidthPerc=10,this.cellHeightPerc=10,this.colorHorizontalLines='grey',this.colorVerticalLines='grey',this.colorNumbers='grey',this.flagDrawNumbers=!1,this.flagDrawHorizontal=!1,this.flagDrawVertical=!1,this.lineWidthVertical=1,this.lineWidthHorizontal=1,this.lineDash=[]}}class x extends t{constructor(t=0,s=Number.MAX_SAFE_INTEGER){super(m,t,s),this.drawLayer=a.BackGround}draw(t){return this.draw_horizontal(t),this.draw_vertical(t),!0}draw_horizontal(t){let s=0,i=t.canvasWidth(),e=t.canvasHeight(),r=0+i;do{this.style.strokeStyle=this.d.colorHorizontalLines,this.style.lineDash=this.d.lineDash,this.style.lineWidth=this.d.lineWidthHorizontal,t.drawLine(0,s,r,s,this.style),1==this.d.flagDrawNumbers&&(this.style.strokeStyle=this.d.colorNumbers,this.drawText(t,s,0,s)),s+=t.canvasHeight()/100*this.d.cellHeightPerc}while(e>s)}draw_vertical(t){let s=0,i=t.canvasWidth(),e=0+t.canvasHeight();do{this.style.strokeStyle=this.d.colorVerticalLines,this.style.lineWidth=this.d.lineWidthVertical,this.style.lineDash=this.d.lineDash,t.drawLine(s,0,s,e,this.style),1==this.d.flagDrawNumbers&&(this.style.strokeStyle=this.d.colorNumbers,this.drawText(t,s,s,0)),s+=t.canvasWidth()/100*this.d.cellWidthPerc}while(i>s)}drawText(t,s,i,e){this.style.fontSize=this.d.fontSize,this.style.strokeStyle=this.d.colorNumbers,this.style.fillStyle=this.d.colorNumbers,t.drawText(s.toString(),i+this.d.lineWidthVertical-2,e+this.d.lineWidthHorizontal,this.style)}}class p extends l{constructor(){super(),this.msStart=0,this.x=10,this.y=10,this.widthPercent=200,this.heightPercent=50,this.color='red',this.widthPercent=10,this.heightPercent=10}}function S(){return new p}class T extends t{constructor(t=10,s=10){super(S),this.d.widthPercent=t,this.d.heightPercent=s,this.drawLayer=a.MiddleGround}width(t){return t.canvasWidth()/100*this.d.widthPercent}height(t){return t.canvasHeight()/100*this.d.heightPercent}draw(t){this.style.fillStyle=this.d.color,this.style.strokeStyle=this.d.color;let s=t.xPerc(this.d.x),i=t.yPerc(this.d.y);return t.drawFillRect(s,i,this.width(t),this.height(t),this.style),!0}resize(t,s){return 0}}class b extends l{constructor(){super(),this.msStart=0,this.x=0,this.y=0,this.fontSize=30,this.content='sec: ',this.frame=0,this.padding=4,this.colorRectangle='black',this.colorNumbers='yellow'}}function A(){return new b}class v extends t{constructor(t=0,s=Number.MAX_SAFE_INTEGER){super(A,t,s),this.drawLayer=a.MiddleGround}width(t){this.style.fontSize=this.d.fontSize;const s=`   ${this.d.content}   ${parseInt(this.d.frame.toString())} `;return t.textWidth(s,this.style)+2*this.d.padding+10}height(t){return this.style.fontSize=this.d.fontSize,t.textWidth('Xi',this.style)}update(t,s){return this.d.frame=t/1e3,!0}draw(t){let s='Frame:'+parseInt(this.d.frame.toString());return this.style.fillStyle=this.d.colorRectangle,t.drawFillRect(this.d.x,this.d.y,this.width(t)+this.d.padding,this.height(t)+this.d.padding,this.style),this.style.fillStyle=this.d.colorNumbers,t.drawText(s,this.d.x+this.d.padding,this.d.y+this.d.padding,this.style),!0}}class B extends l{constructor(){super(),this.msStart=0,this.x=0,this.y=0,this.startAngle=0,this.endAngle=2*Math.PI,this.radius=100,this.fill=!0}}function D(){return new B}class E extends t{constructor(){super(D)}width(t){return 2*this.d.radius}height(t){return 2*this.d.radius}draw(t){return this.d.startAngle>=7?this.d.startAngle=0:this.d.startAngle++,t.drawCircle(this.d.x,this.d.y,this.d.radius,this.d.fill,this.style,this.d.startAngle),!0}}class k extends l{constructor(){super(),this.count=200}}function P(){return new k}class N extends t{constructor(t=100){super(P),this.d.count=t,this.drawLayer=a.BackGround}width(t){return 0}height(t){return 0}draw(t){this.style.fillStyle='#f2edba',this.style.strokeStyle='#efeee3';for(let s=0;s<this.d.count;s++)t.drawCircle(Math.ceil(Math.random()*t.canvasWidth()),Math.ceil(Math.random()*t.canvasHeight()),15,!0,this.style);return!0}}class C extends l{constructor(){super(),this.msStart=0,this.x1=0,this.y1=0,this.x2=800,this.y2=100,this.lineWidth=2,this.color='red',this.colorShadow='grey'}}function z(){return new C}class O extends t{constructor(t=0,s=0,i=100,e=100,r='black',h=2){super(z),this.d.x1=t,this.d.y1=s,this.d.x2=i,this.d.y2=e,this.d.color=r,this.d.lineWidth=h,this.drawLayer=a.MiddleGround}width(t){return Math.abs(this.d.x1-this.d.x2)}height(t){return Math.abs(this.d.y1-this.d.y2)}draw(t){return this.style.fillStyle=this.d.color,this.style.strokeStyle=this.d.color,this.style.lineWidth=this.d.lineWidth,t.drawLine(t.xPerc(this.d.x1),t.yPerc(this.d.y1),t.xPerc(this.d.x2),t.yPerc(this.d.y2),this.style),!0}}class W extends l{constructor(){super(),this.lineWidth=5,this.flagFilled=!0,this.color='red'}}function M(){return new W}class L{constructor(t=0,s=0){this.x=t,this.y=s}}class F extends t{constructor(t=0,s=0){super(M),this.moveTo=new L(t,s),this.vertices=[]}draw(t){if(this.vertices.length<2)return!1;t.commitCtxData(this.style),t.ctx.beginPath(),1==this.d.responsive?t.ctx.moveTo(t.xPerc(this.moveTo.x),t.yPerc(this.moveTo.y)):t.ctx.moveTo(this.moveTo.x,this.moveTo.y);for(let s=0;s<this.vertices.length;s++){const i=this.vertices[s];1==this.d.responsive?t.ctx.lineTo(t.xPerc(i.x),t.yPerc(i.y)):t.ctx.lineTo(i.x,i.y)}return t.ctx.closePath(),1==this.d.flagFilled?t.ctx.fill():t.ctx.stroke(),!0}add(t=0,s=0){let i=new L(t,s);this.vertices.push(i)}}class G extends l{constructor(){super(),this.msStart=0,this.x=10,this.y=10,this.color='grey',this.widthPercent=10,this.heightPercent=10}}function H(){return new G}class R extends t{constructor(t=10,s=10){super(H),this.d.widthPercent=t,this.d.heightPercent=s,this.drawLayer=a.MiddleGround}width(t){return t.canvasWidth()/100*this.d.widthPercent}height(t){return t.canvasHeight()/100*this.d.heightPercent}draw(t){this.style.fillStyle=this.d.color,this.style.strokeStyle=this.d.color;let s=t.xPerc(this.d.x),i=t.yPerc(this.d.y);return t.drawRect(s,i,this.width(t),this.height(t),this.style),!0}}class _ extends l{constructor(){super(),this.listStartY=30,this.listGapFactor=10,this.applyWdHtPerc=!1,this.maxLiChars=50}}function X(){return new _}class I extends t{constructor(t=0,s=Number.MAX_SAFE_INTEGER,i='The Title',e='#00ff37'){super(X),this.hdg=new u(t,s,i,e,50,2,90,12),this.hdg.d.padding=5,this.hdg.d.margin=5,this.hdg.d.xAlignment=this.hdg.xAlignmentOptions.Mid,this.hdg.d.yAlignment=this.hdg.yAlignmentOptions.Top,this.hdg.d.colorBg=c(e,200),this.hdg.d.flagDrawBorder=!0,this.hdg.d.flagDrawBg=!0,this.hdg.d.dynamicFontSize=!0,this.lis=[],this.drawLayer=a.MiddleGround,this.setStartTime(1e3*t),this.setEndTime(1e3*s)}addItem(t,s=!0,i=2){let e=new u(this.getStartTime(),this.getEndTime(),t,'#0000ff');return 1==s&&e.addTransition(1e3*i+this.getStartTime()),this.lis.push(e),e}width(t){return 0}height(t){return 0}update(t,s){for(let s=0;s<this.lis.length;s++){this.lis[s].applyTransition(t)}return!0}draw(t){return this.hdg.draw(t),this.drawLis(t),!0}drawLis(t){let s=this.d.listStartY;for(let i=0;i<this.lis.length;i++)this.lis[i].d.y=s,1==this.d.applyWdHtPerc&&this.lis[i].setDynamicFontSize(t),this.lis[i].d.maxDisplayChars=this.d.maxLiChars,this.lis[i].draw(t),this.lis[i].height(t),s+=this.lis[i].d.heightPercent+this.d.listGapFactor}}class Y extends l{constructor(){super(),this.listStartY=30,this.listGapFactor=10,this.applyWdHtPerc=!1,this.maxLiChars=50}}function V(){return new Y}class q{constructor(t=[]){this.addToArray=t}jt(t=0,s=Number.MAX_SAFE_INTEGER,i='',e='black',r=null,h=50,a=45,n=80,l=25){let d=new u(t,s,i,e,h,a,n,l);return this.addToArray.push(d),d.d.margin=0,d.d.xAlignment=d.xAlignmentOptions.Mid,d.d.yAlignment=d.yAlignmentOptions.Mid,d.d.dynamicFontSize=!0,d.d.flagDrawBg=!0,d.d.flagDrawBorder=!0,d.d.flagBgShadow=!0,d.d.border=4,null!==r&&(d.d.colorBg=r),d}h1(t=0,s=Number.MAX_SAFE_INTEGER,i='',e='black',r=null,h=50,a=2,n=60,l=10){let d=new u(t,s,i,e,h,a,n,l);return this.addToArray.push(d),d.d.margin=0,d.d.xAlignment=d.xAlignmentOptions.Mid,d.d.yAlignment=d.yAlignmentOptions.Top,d.d.dynamicFontSize=!0,d.d.flagDrawBg=!0,d.d.flagDrawBorder=!0,d.d.flagBgShadow=!0,d.d.border=2,d.d.shadowBlur=4,d.d.shadowOffsetX=6,d.d.shadowOffsetY=6,d.d.colorShadow='grey',null!==r&&(d.d.colorBg=r),d}li(t=0,s=Number.MAX_SAFE_INTEGER,i='',e='black',r=null,h=50,a=35,n=75,l=8){let d=new u(t,s,i,e,h,a,n,l);return this.addToArray.push(d),d.d.margin=0,d.d.xAlignment=d.xAlignmentOptions.Mid,d.d.yAlignment=d.yAlignmentOptions.Top,d.d.dynamicFontSize=!0,d.d.flagDrawBg=!1,d.d.flagDrawBorder=!1,d.d.flagBgShadow=!1,d.d.border=2,d.d.shadowBlur=4,d.d.shadowOffsetX=6,d.d.shadowOffsetY=6,d.d.colorShadow='grey',null!==r&&(d.d.colorBg=r),d}}class j extends l{constructor(){super(),this.listGapFactor=1,this.maxDisplayCharsPerLine=70,this.border=1,this.colorFont='black',this.colorBorder='black',this.colorBg='white'}}function $(){return new j}class U extends t{constructor(t=0,s=Number.MAX_SAFE_INTEGER,i='',e='#00ff37'){super($),this.lines=[],this.drawLayer=a.MiddleGround,this.setStartTime(1e3*t),this.setEndTime(1e3*s),''!==i&&this.addLine(i)}addLine(t){let s=new u(this.getStartTime(),this.getEndTime(),t,'#0000ff');return this.lines.push(s),s}width(t){let s=0;for(let i=0;i<this.lines.length;i++){let e=this.lines[i].width(t);e>s&&(s=e)}return s}height(t){let s=0;for(let i=0;i<this.lines.length;i++){s+=this.lines[i].height(t)+this.d.listGapFactor}return s}update(t,s){for(let s=0;s<this.lines.length;s++){this.lines[s].applyTransition(t)}return!0}draw(t){this.drawBg(t),this.drawBorder(t);let s=this.d.y;for(let i=0;i<this.lines.length;i++)this.lines[i].d.x=this.d.x,this.lines[i].d.y=s,this.lines[i].d.color=this.d.colorFont,this.lines[i].d.maxDisplayChars=this.d.maxDisplayCharsPerLine,this.lines[i].draw(t),this.lines[i].height(t),s+=this.lines[i].d.heightPercent+this.d.listGapFactor;return!0}drawBorder(t){return this.style.lineWidth=this.d.border,this.style.strokeStyle=this.d.colorBorder,this.style.fillStyle=this.d.colorBorder,t.drawRect(t.xPerc(this.d.x),t.yPerc(this.d.y),this.width(t),this.height(t),this.style),!0}drawBg(t){return this.style.strokeStyle=this.d.colorBg,this.style.fillStyle=this.d.colorBg,t.drawFillRect(t.xPerc(this.d.x),t.yPerc(this.d.y),this.width(t),this.height(t),this.style),!0}}new q;class Z extends t{constructor(t=0,s=Number.MAX_SAFE_INTEGER,i='The Title',e='#00ff37'){super(V),this.hdg=this.getHdg(t,s,i,e),this.para=new U(t,s),this.setPara(),this.drawLayer=a.MiddleGround,this.setStartTime(1e3*t),this.setEndTime(1e3*s)}setPara(){this.para.d.y=50,this.para.d.x=5,this.para.d.border=1,this.para.d.colorBorder='blue',this.para.shadowsOn()}getHdg(t,s,i,e){let r=new u(this.getStartTime(),this.getEndTime(),i,e);return r.d.x=50,r.d.y=25,r.d.border=4,r.d.margin=0,r.d.widthPercent=80,r.d.heightPercent=15,r.d.xAlignment=r.xAlignmentOptions.Mid,r.d.yAlignment=r.yAlignmentOptions.Mid,r.d.dynamicFontSize=!0,r.d.flagDrawBg=!0,r.d.flagDrawBorder=!0,r.d.flagBgShadow=!0,r.d.colorBg=c(e,60),r.d.flagBgShadow=!0,r}addLine(t){this.para.addLine(t)}draw(t){return this.hdg.setDynamicFontSize(t),this.hdg.draw(t),this.para.draw(t),!0}}class K{constructor(t){this.addToArray=t}dashed(t='#dee1e2'){let s=new y;return s.shadowsOff(),this.addToArray.push(s),s.d.flagDrawNumbers=!1,s.d.colorNumbers='red',s.d.lineWidthHorizontal=1,s.d.lineWidthVertical=1,s.d.fontSize=15,s.d.colorHorizontalLines=t,s.d.colorVerticalLines=t,s.d.lineDash=[15,5],s}demo(){let t=new y;return this.addToArray.push(t),t.d.flagDrawNumbers=!0,t.data.colorNumbers='red',t.d.fontSize=12,t.d.cellWidth=100,t.d.cellHeight=20,t.d.colorHorizontalLines='blue',t.d.colorVerticalLines='brown',t.d.lineWidthVertical=10,t.d.lineWidthHorizontal=2,t}simple(t='#dee1e2'){let s=new y;return this.addToArray.push(s),s.d.colorHorizontalLines=t,s.d.colorVerticalLines=t,s}}class J{constructor(t=[]){this.addToArray=t,this.textTempl=new q(t),this.gridTempl=new K(t)}slideHL(t=0,s=Number.MAX_SAFE_INTEGER,i='The Title',e='#00ff37'){let r=new I(t,s,i,e);return this.addToArray.push(r),r}slideHP(t=0,s=Number.MAX_SAFE_INTEGER,i='The Title',e='#00ff37'){let r=new Z(t,s,i,e);return this.addToArray.push(r),r}bgShapes(t=100){let s=new N;return this.addToArray.push(s),s}text(t=0,s=Number.MAX_SAFE_INTEGER,i='',e='black',r=0,h=0,a=10,n=10){let l=new u(t,s,i,e,r,h,a,n);return this.addToArray.push(l),l}rect(){let t=new R;return this.addToArray.push(t),t}fillRect(){let t=new T;return this.addToArray.push(t),t}lines(t=0,s=0){let i=new F(t,s);return this.addToArray.push(i),i}line(t=0,s=0,i=100,e=100,r='black',h=2){let a=new O(t,s,i,e,r,h);return this.addToArray.push(a),a}grid(t=0,s=Number.MAX_SAFE_INTEGER){let i=new y(t,s);return this.addToArray.push(i),i}rGrid(t=0,s=Number.MAX_SAFE_INTEGER){let i=new x(t,s);return this.addToArray.push(i),i}counter(t=100,s=100,i=Number.MAX_SAFE_INTEGER){let e=new v;return e.d.x=t,e.d.y=s,this.addToArray.push(e),e}circle(t=100,s=100){let i=new E;return i.d.x=t,i.d.y=s,this.addToArray.push(i),i}spit(){return this.addToArray}}class Q{constructor(){this.color='#efeee3'}}function tt(t){return t>100?100:t<0?0:t}class st extends class extends class extends class{constructor(){this.comps=[]}drawByDrawLayer(t,s,i){for(let e=0;e<this.comps.length;e++){let r=this.comps[e];r.drawLayer==s&&r.getStartTime()<=t&&r.getEndTime()>t&&(i.save(),r.update(t,i),r.draw(i),i.restore())}return!0}chqCollision(t,s){return null}insert(t){return this.comps.push(t),t}resize(t=800,s=400){for(let i=0;i<this.comps.length;i++){this.comps[i].resize(t,s)}}}{constructor(t){super(),this.timeStart=null,this.timeEnd=1e3*t,this.interval=null,this.msPerFrame=1e3}getTimeEnd(){return this.timeEnd}setTimeEnd(t){return this.timeEnd=t,this.timeEnd}getMsDelta(){if(null==this.timeStart)return 0;return(new Date).getTime()-this.timeStart}setMsDelta(t){return null==this.timeStart||t>this.getTimeEnd()||t<0?0:(this.timeStart=(new Date).getTime()-t,this.timeStart)}stop(){return this.timeStart=null,null!==this.interval&&clearInterval(this.interval),!0}}{constructor(t,i,e,r){super(r),this.canvasId=t,this.pack=new s(this.canvasId,i,e)}setCanvas(t=800,i=400){this.pack=new s(this.canvasId,t,i),this.resize(t,i)}getCanvasHeight(){return this.pack.canvasHeight()}getCanvasWidth(){return this.pack.canvasWidth()}}{constructor(t='bilza',s=800,i=350,e=60){super(t,s,i,e),this.background=new Q,this.add=new J(this.comps)}start(){return null===this.timeStart&&(this.stop(),this.timeStart=(new Date).getTime(),this.interval=window.setInterval((()=>{this.draw()}),this.msPerFrame),!0)}draw(){if(null==this.pack)throw new Error('bilzaa is not initialized');let t=this.getMsDelta();return t>=this.timeEnd&&this.stop(),this.pack.clearCanvas(),this.pack.drawBackground(this.background.color),this.drawByDrawLayer(t,a.BackGround,this.pack),this.drawByDrawLayer(t,a.ForeGround,this.pack),this.drawByDrawLayer(t,a.MiddleGround,this.pack),this.drawEvent(t),!0}drawEvent(t){return!0}mergeClip(t){for(let s=0;s<t.length;s++)this.comps.push(t[s]);return!0}dynamicCanvas(t=100,s=100){let i=window.innerWidth/100*tt(t),e=window.innerHeight/100*tt(s);return!(i<100||e<100)&&(this.setCanvas(i,e),!0)}}(t=>{t.BackGround='BACKGROUND',t.MiddleGround='MIDDLEGROUND',t.ForeGround='FOREGROUND'})(a||(a={}));class it{constructor(t){this.newDataObjFn=t,this.data=this.newDataObjFn(),this.transitions=[]}add(t){let s=this.newDataObjFn();for(const t in s)s[t]=null;return s.msStart=t,this.transitions.push(s),s}insert(t){return this.transitions.push(t),t}apply(t){for(let s=this.transitions.length-1;s>=0;s--){const i=this.transitions[s];i.msStart<=t&&(this.merge(i),this.transitions.splice(s,1))}}merge(t){for(const s in this.data)t.hasOwnProperty(s)&&null!==t[s]&&(this.data[s]=t[s]);return!0}}export{J as CompFactory,t as Component,a as DrawLayer,e as FontNames,s as Pack,n as Style,it as Transition,st as default};
