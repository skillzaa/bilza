var t,i,e,s,r,h,n;(t=>{t.SystemBackGround='SYSTEMBACKGROUND',t.BackGround='BACKGROUND',t.MiddleGround='MIDDLEGROUND',t.ForeGround='FOREGROUND'})(t||(t={})),(t=>{t.Round='round',t.Butt='butt',t.Square='square'})(i||(i={})),(t=>{t.Arial='Arial',t.ArialBlack='Arial Black',t.Verdana='Verdana',t.Tahoma='Tahoma',t.Impact='Impact',t.Times='Times',t.Helvetica='Helvetica',t.TimesNewRoman='Times New Roman',t.Didot='Didot',t.Calibri='Calibri',t.Georgia='Georgia',t.AmericanTypewriter='American Typewriter',t.Courier='Courier',t.CourierNew='Courier New',t.LucidaConsole='Lucida Console',t.Monaco='Monaco',t.BradleyHand='Bradley Hand',t.BrushScriptMT='Brush Script MT',t.BrushScript='Brush Script',t.Luminari='Luminari'})(e||(e={}));class a{constructor(){this.fontSize=25,this.fontFamily=e.Luminari,this.fillStyle='green',this.strokeStyle='red',this.lineWidth=2,this.shadowColor='black',this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0,this.opacity=1,this.lineCap=i.Round,this.lineDash=[]}merge(t){null!==t.lineCap&&(this.lineCap=t.lineCap),null!==t.opacity&&(this.opacity=t.opacity),null!==t.shadowBlur&&(this.shadowBlur=t.shadowBlur),null!==t.shadowOffsetY&&(this.shadowOffsetY=t.shadowOffsetY),null!==t.shadowOffsetX&&(this.shadowOffsetX=t.shadowOffsetX),null!==t.lineWidth&&(this.lineWidth=t.lineWidth),null!==t.shadowColor&&(this.shadowColor=t.shadowColor),null!==t.strokeStyle&&(this.strokeStyle=t.strokeStyle),null!==t.fillStyle&&(this.fillStyle=t.fillStyle),null!==t.fontSize&&(this.fontSize=t.fontSize),null!==t.fontFamily&&(this.fontFamily=t.fontFamily),null!==t.lineDash&&(this.lineDash=t.lineDash)}}(t=>{t.Left='LEFT',t.Right='RIGHT',t.Mid='MID'})(s||(s={})),(t=>{t.Top='TOP',t.Mid='MID',t.Bot='BOT'})(r||(r={}));class o extends class extends class extends class extends class extends class extends class{constructor(){this.version='0.0.1',this.alwaysOn=!1,this.XAlignOpt=s,this.YAlignOpt=r,this.xAlign=this.XAlignOpt.Left,this.yAlign=this.YAlignOpt.Top,this.xRotate=this.XAlignOpt.Left,this.yRotate=this.YAlignOpt.Top,this.responsiveCoordinates=!0,this.responsivePadding=!0,this.responsiveDims=!0,this.interactive=!1,this.border=new F(0),this.width=new F(10),this.rotation=new F(0),this.opacity=new F(100),this.height=new F(10),this.color=new nt('#000000'),this.drawLayer=t.MiddleGround,this.id=Math.random().toString(36).slice(2),this.style=new a,this.canvasWidth=null,this.canvasHeight=null,this.selected=!1,this.visible=new st(!0),this.x=new z(0),this.y=new z(0),this.paddingTop=new z(0),this.paddingBottom=new z(0),this.paddingRight=new z(0),this.paddingLeft=new z(0),this.border=new F(0),this.colorBackground=new nt('#ffffff'),this.colorBorder=new nt('#000000'),this.showBackground=new st(!1)}}{constructor(){super(),this.duration=0,this.insertTimeInVid=0}getEndTime(t=!0){let i=this.insertTimeInVid+this.duration;return t?1e3*i:i}getStartTime(t=!0){return t?1e3*this.insertTimeInVid:this.insertTimeInVid}setStartTime(t){return this.insertTimeInVid=t,this.insertTimeInVid}}{constructor(){super(),this.shadowColor='grey',this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0}shadowsOff(){this.style.shadowBlur=0,this.style.shadowOffsetX=0,this.style.shadowOffsetY=0}setShadow(t=8,i=10,e=10,s='grey'){this.style.shadowBlur=t,this.style.shadowOffsetX=i,this.style.shadowOffsetY=e,this.style.shadowColor=s}shadowsOn(){this.style.shadowBlur=8,this.style.shadowOffsetX=10,this.style.shadowOffsetY=10,this.style.shadowColor='grey'}}{constructor(){super()}contentWidth(){if(0==this.responsiveDims)return this.width.value();if(null!==this.canvasWidth)return this.canvasWidth/100*this.width.value();throw new Error('The component is not initialized yet')}contentHeight(){if(0==this.responsiveDims)return this.width.value();if(null!==this.canvasHeight)return this.canvasHeight/100*this.height.value();throw new Error('The component is not initialized yet')}compWidth(){return this.contentWidth()+this.paddingLeft.value()+this.paddingRight.value()+2*this.border.value()}compHeight(){return this.contentHeight()+this.paddingTop.value()+this.paddingBottom.value()+2*this.border.value()}}{constructor(){super(),this.charsWidth=null}draw(t){return!0}random(t,i,e=1,s=100,r=1,h=100,n=60){this.x.random(t,i,e,s,n),this.y.random(t,i,r,h,n)}vibrate(t,i,e,s,r,h){this.x.vibrate(t,i,e,r,h),this.y.vibrate(t,i,s,r,h)}goto(t,i,e){return this.x.goto(t,i),this.y.goto(t,e),!0}animate(t,i,e,s,r,h){return this.x.animate(t,i,e,s),this.y.animate(t,i,r,h),!0}xAligned(){let t=this.x.value();switch(this.xAlign){case this.XAlignOpt.Left:break;case this.XAlignOpt.Mid:t-=this.compWidth()/2;break;case this.XAlignOpt.Right:t-=this.compWidth()}return t}yAligned(){let t=this.y.value();switch(this.yAlign){case this.YAlignOpt.Top:break;case this.YAlignOpt.Mid:t-=this.compHeight()/2;break;case this.YAlignOpt.Bot:t-=this.compHeight()}return t}xRotateAligned(){let t=this.xAligned();switch(this.xRotate){case this.XAlignOpt.Left:break;case this.XAlignOpt.Mid:t+=this.compWidth()/2;break;case this.XAlignOpt.Right:t+=this.compWidth()}return t}yRotateAligned(){let t=this.yAligned();switch(this.yRotate){case this.YAlignOpt.Top:break;case this.YAlignOpt.Mid:t+=this.compHeight()/2;break;case this.YAlignOpt.Bot:t+=this.compHeight()}return t}}{constructor(){super()}applyRotation(t){t.save(),t.translate(this.xRotateAligned(),this.yRotateAligned()),t.rotate(this.rotation.value()),t.translate(-this.xRotateAligned(),-this.yRotateAligned())}removeRotation(t){t.restore()}}{constructor(){super()}init(t){return this.canvasWidth=t.canvasWidth(),this.canvasHeight=t.canvasHeight(),this.x.init(this.responsiveCoordinates,this.canvasWidth),this.y.init(this.responsiveCoordinates,this.canvasHeight),this.paddingLeft.init(this.responsivePadding,this.canvasWidth),this.paddingRight.init(this.responsivePadding,this.canvasWidth),this.paddingTop.init(this.responsivePadding,this.canvasHeight),this.paddingBottom.init(this.responsivePadding,this.canvasHeight),!0}update(t,i){return this.x.update(t),this.y.update(t),this.visible.update(t),this.rotation.update(t),this.opacity.update(t),this.width.update(t),this.height.update(t),this.paddingLeft.update(t),this.paddingRight.update(t),this.paddingTop.update(t),this.paddingBottom.update(t),this.border.update(t),this.colorBackground.update(t),this.colorBorder.update(t),!0}drawBackground(t){0!=this.showBackground.value()&&(this.style.fillStyle=this.colorBackground.value(),this.style.strokeStyle=this.colorBackground.value(),t.drawFillRect(this.xAligned(),this.yAligned(),this.compWidth(),this.compHeight(),this.style))}drawBorder(t){this.border.value()<1||(this.style.strokeStyle=this.colorBorder.value(),this.style.fillStyle=this.colorBorder.value(),this.style.lineWidth=this.border.value(),t.drawRect(this.xAligned()-Math.floor(this.border.value()/2),this.yAligned()-Math.floor(this.border.value()/2),this.compWidth()+(this.border.value()-1),this.compHeight()+(this.border.value()-1),this.style))}preDraw(t){this.style.opacity=this.opacity.value(),this.applyRotation(t),this.drawBackground(t),this.drawBorder(t)}postDraw(t){this.style.opacity=100,this.removeRotation(t)}contentY(){return this.yAligned()+this.paddingTop.value()}contentX(){return this.xAligned()+this.paddingLeft.value()}}class l extends o{constructor(i='#efeee3'){super(),this.drawLayer=t.SystemBackGround,this.color.set(i)}init(t){return super.init(t),!0}update(t,i){return super.update(t,i),this.color.update(t),!0}widthInPix(){if(null!==this.canvasWidth)return this.canvasWidth;throw new Error('the component is not initialized yet')}heightInPix(){if(null!==this.canvasHeight)return this.canvasHeight;throw new Error('the component is not initialized yet')}draw(t){return t.drawBackground(this.color.value()),!0}}class c{constructor(){this.runningStartTimeTS=null,this._stopFlag=!0}isRunning(){return null!=this.runningStartTimeTS}shouldStop(){return this._stopFlag}stop(){return this.runningStartTimeTS=null,this._stopFlag=!0,!0}start(){return this._stopFlag=!1,this.runningStartTimeTS=(new Date).getTime(),!0}getMsDelta(){if(null==this.runningStartTimeTS)return 0;return(new Date).getTime()-this.runningStartTimeTS}}class d{constructor(t){this.clearCanvasBwFrames=!0,this.loadSystemBackground=!0,this.pack=t}disableOpacity(){this.pack.disableOpacity=!0}enableOpacity(){this.pack.disableOpacity=!1}}class u{constructor(){this.compArray=[]}push(t){return this.compArray.push(t),t}init(t){for(let i=0;i<this.compArray.length;i++)this.compArray[i].init(t);return!0}drawByDrawLayer(t,i,e){for(let s=0;s<this.compArray.length;s++){let r=this.compArray[s];r.drawLayer==i&&this.qualifyForDraw(r,t)&&(e.save(),r.update(t,e),r.draw(e),e.restore())}return!0}qualifyForDraw(t,i){return 0!=t.visible.value()&&(1==t.alwaysOn||t.getStartTime(!0)<=i&&t.getEndTime(!0)>i)}len(){return this.compArray.length}}class _{constructor(t,i,e){this.comps=t,this.duration=i,this.charsWidth=e}insertScene(t){const i=t.getComps();for(let e=0;e<i.length;e++){const s=i[e];if(s.getStartTime(!1)<t.getStartTime())throw new Error('The start time of a contained component in a scene can not be smaller than the start time of the scene');if(s.getEndTime(!1)>t.getEndTime())throw new Error('The end time of a contained component in a scene can not be larger than the end time of the scene');this.add(s,s.getStartTime(!1),s.duration)}}append(t,i){if(t.charsWidth=this.charsWidth,i<1||void 0===i)throw new Error('for Insert operation to succeed you need component duration greater than 0');return t.duration=i,t.setStartTime(this.duration.len(!1)),this.duration.extend(t.duration),this.comps.push(t)}add(t,i,e){if(t.charsWidth=this.charsWidth,e<1||void 0===e)throw new Error('for Add operation to succeed you need component duration greater than 0');if(t.duration=e,t.setStartTime(i),t.getStartTime(!1)>this.duration.len(!1)&&this.duration.set(t.getStartTime(!1)),t.getEndTime(!1)>this.duration.len(!1)){let i=t.getEndTime(!1)-this.duration.len(!1);this.duration.extend(i)}return this.comps.push(t)}alwaysOn(t){return t.charsWidth=this.charsWidth,t.alwaysOn=!0,this.comps.push(t)}}class p{constructor(){this._pvt_duration_val=0}len(t=!0){return t?1e3*this._pvt_duration_val:this._pvt_duration_val}extend(t){return this._pvt_duration_val+=t,this._pvt_duration_val}set(t){return this._pvt_duration_val=t,this._pvt_duration_val}}class T{constructor(t='bilza',i=70){this.pack=new et(t,i),this.comps=new u,this.duration=new p,this.lastMsDelta=0,this.soundTrackElement=document.getElementById('soundTrackElement'),this.soundTrack=null,this.insert=new _(this.comps,this.duration,this.pack.charsWidth.bind(this.pack)),this.stopWatch=new c,this.set=new d(this.pack),this.background=new l}init(){return 1==this.set.loadSystemBackground&&this.insert.alwaysOn(this.background),this.comps.init(this.pack),!0}drawForStart(){let t=this.stopWatch.getMsDelta();return 1==this.stopWatch.shouldStop()?(this.stop(),!1):(window.requestAnimationFrame(this.drawForStart.bind(this)),this.lastMsDelta=t,this.draw_internal(t),!0)}draw(t=0){this.init(),this.draw_internal(t)}draw_internal(i=0){if(null==this.pack)throw new Error('bilzaa is not initialized');i>=this.len(!0)&&this.stopWatch.stop(),1==this.set.clearCanvasBwFrames&&this.pack.clearCanvas(),this.comps.drawByDrawLayer(i,t.SystemBackGround,this.pack),this.comps.drawByDrawLayer(i,t.BackGround,this.pack),this.comps.drawByDrawLayer(i,t.MiddleGround,this.pack),this.comps.drawByDrawLayer(i,t.ForeGround,this.pack),this.drawEvent(i)}len(t=!0){return this.duration.len(t)}drawEvent(t){return!0}dynamicCanvas(t=95,i=null){return this.pack.dynamicCanvas(t,i),!0}start(){return 1!=this.stopWatch.isRunning()&&(this.stop(),null!==this.soundTrackElement&&this.soundTrackElement.play(),this.init(),this.stopWatch.start(),window.requestAnimationFrame(this.drawForStart.bind(this)),!0)}stop(){return null!==this.soundTrackElement&&(this.soundTrackElement.pause(),this.soundTrackElement.currentTime=0),this.stopWatch.stop(),!0}resizeCanvas(t,i){this.pack.resizeCanvas(t,i)}getLastMsDelta(){return this.lastMsDelta}isRunning(){return this.stopWatch.isRunning()}}class I extends o{constructor(i='grey',e=10,s=10){super(),this.fontSize=12,this.width.set(100),this.height.set(100),this.cellWidthPerc=e,this.cellHeightPerc=s,this.colorHorizontalLines=i,this.colorVerticalLines=i,this.colorNumbers='black',this.showNumbers=!0,this.showHorizontalLines=!0,this.showVerticalLines=!0,this.lineWidthVertical=1,this.lineWidthHorizontal=1,this.lineDash=[],this.drawLayer=t.BackGround}draw(t){return this.preDraw(t),this.draw_horizontal(t),this.draw_vertical(t),this.postDraw(t),!0}draw_horizontal(t){let i=0;const e=this.contentHeight()/100*this.cellWidthPerc;let s=this.contentX()+this.contentWidth();do{this.style.strokeStyle=this.colorHorizontalLines,this.style.opacity=this.opacity.value(),this.style.fillStyle=this.colorHorizontalLines,this.style.lineDash=this.lineDash,this.style.lineWidth=this.lineWidthHorizontal,t.drawLine(this.contentX(),this.contentY()+i,s,this.contentY()+i,this.style),1==this.showNumbers&&(this.style.strokeStyle=this.colorNumbers,this.drawText(t,Math.ceil(i),this.contentX(),this.contentY()+i+2)),i+=e}while(this.contentHeight()>i)}draw_vertical(t){let i=0,e=this.contentY()+this.contentHeight();const s=this.contentWidth()/100*this.cellWidthPerc;do{this.style.opacity=this.opacity.value(),this.style.strokeStyle=this.colorVerticalLines,this.style.fillStyle=this.colorVerticalLines,this.style.lineWidth=this.lineWidthVertical,this.style.lineDash=this.lineDash,t.drawLine(this.contentX()+i,this.contentY(),this.contentX()+i,e,this.style),1==this.showNumbers&&(this.style.strokeStyle=this.colorNumbers,this.drawText(t,Math.ceil(i),this.contentX()+i,this.contentY()+2)),i+=s}while(this.contentWidth()>i)}drawText(t,i,e,s){this.style.fontSize=this.fontSize,this.style.strokeStyle=this.colorNumbers,this.style.fillStyle=this.colorNumbers,t.drawText(i.toString(),e+this.lineWidthVertical-2,s+this.lineWidthHorizontal,this.style)}}class A extends o{constructor(t='#000000'){super(),this.color.set(t),this.lineWidth=new F(1)}update(t,i){return super.update(t,i),this.lineWidth.update(t),!0}draw(t){return this.preDraw(t),this.style.fillStyle=this.color.value(),this.style.strokeStyle=this.color.value(),this.style.lineWidth=this.lineWidth.value(),t.drawRect(this.contentX(),this.contentY(),this.contentWidth(),this.contentHeight(),this.style),this.postDraw(t),!0}}class E extends o{constructor(t='#000000'){super(),this.color.set(t)}draw(t){return this.preDraw(t),this.style.fillStyle=this.color.value(),this.style.strokeStyle=this.color.value(),t.drawFillRect(this.contentX(),this.contentY(),this.contentWidth(),this.contentHeight(),this.style),this.postDraw(t),!0}}class L extends o{constructor(i=100,e=100,s='#efe1e1'){super(),this.cellWidth=new F(i),this.cellHeight=new F(e),this.lineWidthVertical=new F(1),this.lineWidthHorizontal=new F(1),this.colorHorizontalLines=new nt(s),this.colorVerticalLines=new nt(s),this.drawLayer=t.BackGround,this.fontSize=8,this.colorNumbers=new nt('grey'),this.flagDrawNumbers=!1,this.flagDrawHorizontal=!1,this.flagDrawVertical=!1,this.lineDash=[]}update(t,i){return super.update(t,i),this.cellWidth.update(t),this.cellHeight.update(t),this.lineWidthHorizontal.update(t),this.lineWidthVertical.update(t),!0}draw(t){return this.draw_horizontal(t),this.draw_vertical(t),!0}draw_horizontal(t){let i=0,e=t.canvasWidth(),s=t.canvasHeight(),r=0+e;do{this.style.opacity=this.opacity.value(),this.style.strokeStyle=this.colorHorizontalLines.value(),this.style.lineDash=this.lineDash,this.style.lineWidth=this.lineWidthHorizontal.value(),t.drawLine(0,i,r,i,this.style),1==this.flagDrawNumbers&&(this.style.strokeStyle=this.colorNumbers.value(),this.drawText(t,i,0,i)),i+=this.cellHeight.value()}while(s>i)}draw_vertical(t){let i=0,e=t.canvasWidth(),s=0+t.canvasHeight();do{this.style.opacity=this.opacity.value(),this.style.strokeStyle=this.colorVerticalLines.value(),this.style.lineWidth=this.lineWidthVertical.value(),this.style.lineDash=this.lineDash,t.drawLine(i,0,i,s,this.style),1==this.flagDrawNumbers&&(this.style.strokeStyle=this.colorNumbers.value(),this.drawText(t,i,i,0)),i+=this.cellWidth.value()}while(e>i)}drawText(t,i,e,s){this.style.opacity=this.opacity.value(),this.style.fontSize=this.fontSize,this.style.strokeStyle=this.colorNumbers.value(),this.style.fillStyle=this.colorNumbers.value(),t.drawText(i.toString(),e+this.lineWidthVertical.value()-2,s+this.lineWidthHorizontal.value(),this.style)}}class w extends o{constructor(i='',s='#000000'){super(),this.content=new ot(i),this.width.set(20),this.maxDisplayChars=new F(200),this.fontFamily=e.Calibri,this.color.set(s),this.drawLayer=t.MiddleGround}update(t,i){return super.update(t,i),this.width.update(t),this.content.update(t),this.maxDisplayChars.update(t),!0}contentHeight(){if(null==this.charsWidth)throw new Error('init error');return this.maxDisplayChars.value()<1?0:this.charsWidth('W',this.width.value(),this.fontFamily)}contentWidth(){if(null==this.charsWidth)throw new Error('init error');return this.charsWidth(this.content.value().substring(0,this.maxDisplayChars.value()),this.width.value(),this.fontFamily)}draw(t){return this.preDraw(t),this.drawContent(t),this.postDraw(t),!0}drawContent(t){this.style.fillStyle=this.color.value(),this.style.strokeStyle=this.color.value(),this.style.fontSize=this.width.value(),this.style.fontFamily=this.fontFamily,t.drawText(this.content.value().substring(0,this.maxDisplayChars.value()),this.contentX(),this.contentY(),this.style)}}class g extends w{constructor(t='#008000'){super('',t),this.convertToSec=!0,this.width.set(35),this.showBackground.set(!0),this.colorBackground.set('blue'),this.colorBorder.set('#101963'),this.color.set('yellow'),this.border.set(1)}update(t,i){return 1==this.convertToSec?this.content.set('sec:'+Math.ceil(t/1e3).toString()):this.content.set('sec:'+Math.ceil(t).toString()),super.update(t,i),!0}}class m{constructor(t=0){this.framesToSkip=t,this.skipframesCounter=0}skipped(){return this.skipframesCounter<this.framesToSkip?(this.skipframesCounter+=1,!1):(this.skipframesCounter=0,!0)}}class R{constructor(t,i){this.x=t,this.y=i}}class y extends o{constructor(t='#ff0000'){super(),this.filled=new st(!0),this.startAngle=new F(0),this.endAngle=new F(360),this.color.set(t)}update(t,i){return this.startAngle.update(t),this.endAngle.update(t),super.update(t,i),!0}contentHeight(){if(0==this.responsiveDims)return this.width.value();if(null!==this.canvasWidth)return this.canvasWidth/100*this.width.value();throw new Error('The component is not initialized yet')}draw(t){return this.preDraw(t),this.style.fillStyle=this.color.value(),this.style.strokeStyle=this.color.value(),t.beginPath(),t.drawCircle(this.contentX()+this.contentWidth()/2,this.contentY()+this.contentWidth()/2,this.contentWidth()/2,this.filled.value(),this.startAngle.value()*(Math.PI/180),this.endAngle.value()*(Math.PI/180),this.style),t.stroke(),this.postDraw(t),!0}}class f extends o{constructor(i=8,e='#008000',s=50){super(),this.circle=new y(this.color.value()),this.circle.responsiveCoordinates=!1,this.circle.responsivePadding=!1,this.circle.responsiveDims=!1,this.particleSize=new F(12),this.circle.width.set(this.particleSize.value()),this.skipXFrames=new m(s),this.xyArray=[],this.drawLayer=t.MiddleGround,this.count=new F(i),this.color.set(e),this.circle.color.set(e)}init(t){return super.init(t),this.circle.init(t),this.getRandomXY(),!0}update(t,i){return this.count.update(t),this.particleSize.update(t),this.circle.width.set(this.particleSize.value()),this.circle.color.set(this.color.value()),this.circle.update(t,i),super.update(t,i),!0}draw(t){if(1==this.skipXFrames.skipped()&&this.getRandomXY(),this.preDraw(t),null==this.canvasWidth||null==this.canvasHeight)throw new Error('init error');for(let i=0;i<this.count.value();i++)this.circle.x.set(this.xyArray[i].x),this.circle.y.set(this.xyArray[i].y),this.circle.draw(t);return this.postDraw(t),!0}getRandomXY(){if(null==this.canvasWidth||null==this.canvasHeight)throw new Error('init error');this.xyArray.length=0;for(let t=0;t<this.count.value();t++){const t=this.contentX()+(this.contentWidth()-this.circle.contentWidth()),i=this.contentY()+(this.contentHeight()-this.circle.contentHeight()),e=this.contentX(),s=this.contentY(),r=new R(Math.floor(Math.random()*(t-e+1)+e),Math.floor(Math.random()*(i-s+1)+s));this.xyArray.push(r)}}}class C extends o{constructor(i='',s='#000000'){super(),this.content=new ot(i),this.maxDisplayChars=new F(200),this.fontFamily=e.Calibri,this.color.set(s),this.drawLayer=t.MiddleGround,this.fontSize=50,this.height.set(500)}update(t,i){return super.update(t,i),this.content.update(t),this.maxDisplayChars.update(t),this.dynamicFontSize(i),this.shrinkToFitMaxHeight(i),super.update(t,i),!0}contentHeight(){if(null==this.charsWidth)throw new Error('init error');return this.maxDisplayChars.value()<1?0:this.charsWidth('W',this.fontSize,this.fontFamily)}contentWidth(){if(null==this.charsWidth)throw new Error('init error');return this.charsWidth(this.content.value().substring(0,this.maxDisplayChars.value()),this.fontSize,this.fontFamily)}draw(t){return this.preDraw(t),this.drawContent(t),this.postDraw(t),!0}drawContent(t){this.style.fillStyle=this.color.value(),this.style.strokeStyle=this.color.value(),this.style.fontSize=this.fontSize,this.style.fontFamily=this.fontFamily,t.drawText(this.content.value().substring(0,this.maxDisplayChars.value()),this.contentX(),this.contentY(),this.style)}dynamicFontSize(t){const i=t.canvasWidth()/100*this.width.value();this.style.fontSize=this.fontSize;for(let e=1;e<900;e++){if(t.charsWidth(this.content.value(),e,this.style.fontFamily)>=i)return this.fontSize=e,this.style.fontSize=e,this.fontSize}return null}shrinkToFitMaxHeight(t){if(null==this.charsWidth)throw new Error('init error');const i=t.canvasHeight()/100*this.height.value();if(this.charsWidth('W',this.style.fontSize,this.style.fontFamily)<i)return!0;for(let e=300;e>0;e--){if(t.charsWidth('W',e,this.style.fontFamily)<=i)return this.fontSize=e,this.style.fontSize=e,!0}return!0}}class v extends o{constructor(i,e=25,s=25){if(super(),this.width.set(e),this.height.set(s),this.img=new Image,this.img.src=i,null==this.img)throw new Error('image could not be found');document.body.appendChild(this.img),this.orignalWidth=this.img.clientWidth,this.orignalHeight=this.img.clientHeight,this.img.style.display='none',this.drawLayer=t.MiddleGround}init(t){if(super.init(t),null==this.canvasWidth)throw new Error('init error');if(null==this.canvasHeight)throw new Error('init error');return this.img.setAttribute('width',this.contentWidth().toString()),this.img.setAttribute('height',this.contentHeight().toString()),!0}draw(t){return this.preDraw(t),t.drawImage(this.img,this.xAligned(),this.yAligned(),this.contentWidth(),this.contentHeight()),this.postDraw(t),!0}}class W{constructor(t){this._value=t,this.filters=[]}update(t){return this.runFilters(t),!0}value(){return this._value}set(t){return this._value=t,this._value}runFilters(t){for(let i=0;i<this.filters.length;i++){const e=this.filters[i];e.update(t);let s=e.value();null!=s&&(this._value=s)}}}(t=>{t.Waiting='WAITING',t.Running='RUNNING',t.Exhausted='EXHAUSTED'})(h||(h={}));class S{constructor(t,i,e,s){if(t<0||i<0)throw new Error('time can not be negative');if(i<=t)throw new Error('end Time can not be equal or smaller than start time');if(e>=s)throw new Error('start value can not be equal to or larger than end value in an increment operation');this.startTime=1e3*t,this.endTime=1e3*i,this.startValue=e,this.endValue=s,this.timeDiff=Math.abs(this.endTime-this.startTime),this.Xdiff=Math.abs(this.startValue-this.endValue),this._ret_val=null,this.filterState=h.Waiting}update(t){if(this.setState(t),this.filterState==h.Running){const i=Math.ceil(t-this.startTime)/this.timeDiff*100,e=this.Xdiff/100*i;this._ret_val=this.startValue+e}else this._ret_val=null;return this.filterState}setState(t){return t<this.startTime?this.filterState=h.Waiting:t>=this.startTime&&t<=this.endTime?this.filterState=h.Running:t>this.endTime&&(this.filterState=h.Exhausted),this.filterState}value(){return this._ret_val}}class H{constructor(t,i,e,s){if(t<0||i<0)throw new Error('time can not be negative');if(i<=t)throw new Error('end Time can not be equal or smaller than start time');if(e<=s)throw new Error('end value can not be equal to or larger than start value in an decrement operation');if(e<0)throw new Error('start value can not be less than zero in decrement operation');this.startTime=1e3*t,this.endTime=1e3*i,this.startValue=e,this.endValue=s,this.timeDiff=Math.abs(this.startTime-this.endTime),this.Xdiff=Math.abs(this.startValue-this.endValue),this._ret_val=null,this.filterState=h.Waiting}update(t){if(this.setState(t),this.filterState==h.Running){const i=Math.ceil(t-this.startTime)/this.timeDiff*100,e=Math.abs(100-i),s=this.Xdiff/100*e;this._ret_val=Math.ceil(this.endValue+s)}else this._ret_val=null;return this.filterState}setState(t){return t<this.startTime?this.filterState=h.Waiting:t>=this.startTime&&t<=this.endTime?this.filterState=h.Running:t>this.endTime&&(this.filterState=h.Exhausted),this.filterState}value(){return this._ret_val}}class x{constructor(t,i,e=0){if(t<0||i<0)throw new Error('time can not be negative');if(i<=t)throw new Error('end Time can not be equal or smaller than start time');this.skipXframes=e,this.skipframesCounter=0,this.startTime=1e3*t,this.endTime=1e3*i,this._ret_val=null,this.filterState=h.Waiting}update(t){return t<this.startTime?this.filterState=h.Waiting:t>=this.startTime&&t<=this.endTime?this.filterState=h.Running:t>this.endTime&&(this.filterState=h.Exhausted),this.filterState}value(){return this._ret_val}okToGo(){return this.filterState==h.Running&&(this.skipframesCounter<this.skipXframes?(this.skipframesCounter+=1,!1):(this.skipframesCounter=0,!0))}xFramesSkipped(){return this.skipframesCounter<this.skipXframes?(this.skipframesCounter+=1,!1):(this.skipframesCounter=0,!0)}isRunning(){return this.filterState==h.Running}}class N extends x{constructor(t,i,e=1,s=10,r=0){super(t,i),this.offset=s,this.seed=e,this.delay=r,this.delayCounter=0,this._ret_val=null}update(t){return super.update(t),this.filterState==h.Running?this.delayCounter>=this.delay?(this.delayCounter=0,Math.random()>.5?this._ret_val=this.seed+this.offset:this._ret_val=this.seed-this.offset):this.delayCounter+=1:this._ret_val=null,this.filterState}}class O extends x{constructor(t,i,e=1,s=10,r=0){super(t,i),this.pointOne=e,this.pointTwo=s,this.skipFrames=r,this.delayCounter=0,this._ret_val=null}update(t){return this.filterState==h.Running?this.delayCounter>=this.skipFrames?(this.delayCounter=0,this._ret_val!==this.pointOne?this._ret_val=this.pointOne:this._ret_val=this.pointTwo):this.delayCounter+=1:this._ret_val=null,this.filterState}}class G extends x{constructor(t,i=10){super(t,t+3e3),this.theValue=i,this.usedOnce=!1,this._ret_val=null}update(t){return super.update(t),this.filterState==h.Running&&0==this.usedOnce?(this._ret_val=this.theValue,this.usedOnce=!0):this._ret_val=null,this.filterState}}class P extends x{constructor(t,i,e=1,s=10,r=0){super(t,i),this.min=e,this.max=s,this.everyXFrame=r,this.delayCounter=0,this._ret_val=null}update(t){return super.update(t),this.filterState==h.Running?this.delayCounter>=this.everyXFrame?(this.delayCounter=0,this._ret_val=Math.floor(Math.random()*(this.max-this.min+1)+this.min)):this.delayCounter+=1:this._ret_val=null,this.filterState}}class B extends x{constructor(t,i,e){super(t,i),this.constantValue=e,this._ret_val=null}update(t){return super.update(t),this.filterState==h.Running?this._ret_val=this.constantValue:this._ret_val=null,this.filterState}}class D extends x{constructor(t,i,e=1,s=10,r=1){super(t,i),this.startValue=e,this.endValue=s,this.addSub=!0,this.speed=r,this._ret_val=null}update(t){if(super.update(t),this.filterState==h.Running){if(null==this._ret_val)return this._ret_val=this.startValue,this.filterState;this._ret_val<this.startValue?this.addSub=!0:this._ret_val>this.endValue&&(this.addSub=!1),1==this.addSub?this._ret_val+=this.speed:this._ret_val-=this.speed}return this.filterState}}class F extends W{constructor(t){super(t)}animate(t,i,e,s){if(e<s){let r=new S(t,i,e,s);this.filters.push(r)}else if(e>s){let r=new H(t,i,e,s);this.filters.push(r)}else if(e==s){let s=new B(t,i,e);this.filters.push(s)}}vibrate(t,i,e=10,s=10,r=0){const h=new N(t,i,e,s,r);this.filters.push(h)}jumpBetween(t,i,e=1,s=10,r=0){const h=new O(t,i,e,s,r);this.filters.push(h)}random(t,i,e=0,s=100,r=0){const h=new P(t,i,e,s,r);this.filters.push(h)}goto(t,i=0){const e=new G(t,i);this.filters.push(e)}oscillate(t,i,e=1,s=10,r=1){const h=new D(t,i,e,s,r);this.filters.push(h)}}class U{constructor(t,i){this.frame=t,this.theValue=i}}class b{constructor(t,i,e,s){this.startTime=t,this.endTime=i,this.startValue=e,this.endValue=s}}class k{constructor(t,i,e,s,r){this.from=t,this.to=i,this.seed=e,this.offset=s,this.delay=r}}class M{constructor(t,i,e=1,s=10,r=0){this.min=1,this.max=10,this.skipFrames=0,this.startTimeSec=t,this.endTimeSec=i,this.min=e,this.max=s,this.skipFrames=r}}class V{constructor(t,i,e=1,s=10,r=0){this.startTimeSec=t,this.endTimeSec=i,this.pointOne=e,this.pointTwo=s,this.skipFrames=r}}class K{constructor(t,i,e=1,s=10,r=0){this.startTimeSec=t,this.endTimeSec=i,this.startValue=e,this.endValue=s,this.speed=r}}class Q extends F{constructor(t=0){super(t),this.usePercentages=!0,this._initValue=t,this.canvasWidthHeight=null,this.preInitRandoms=[],this.preInitGotos=[],this.preInitAnimates=[],this.preInitVibrates=[],this.preInitJumpBetweens=[],this.preInitOscilate=[]}set(t){return 1==this.usePercentages?(this._initValue=t,this._initValue):(super.set(t),t)}initSetInitValue(){if(1==this.usePercentages){if(null==this.canvasWidthHeight)throw new Error('init       error');const t=this.percToPix(this._initValue);super.set(t)}else super.set(this._initValue)}jumpBetween(t,i,e=1,s=10,r=0){const h=new V(t,i,e,s,r);this.preInitJumpBetweens.push(h)}baseJumpBetween(t,i,e=1,s=10,r=0){super.jumpBetween(t,i,e,s,r)}goto(t,i){const e=new U(t,i);this.preInitGotos.push(e)}baseGoto(t,i){super.goto(t,i)}vibrate(t,i,e,s,r){const h=new k(t,i,e,s,r);this.preInitVibrates.push(h)}baseVibrate(t,i,e,s,r){super.vibrate(t,i,e,s,r)}random(t,i,e=1,s=10,r=0){const h=new M(t,i,e,s,r);this.preInitRandoms.push(h)}baseRandom(t,i,e=1,s=10,r=0){super.random(t,i,e,s,r)}animate(t,i,e,s){const r=new b(t,i,e,s);this.preInitAnimates.push(r)}baseAnimate(t,i,e,s){super.animate(t,i,e,s)}oscillate(t,i,e=1,s=10,r=1){const h=new K(t,i,e,s,r);this.preInitOscilate.push(h)}baseOscillate(t,i,e=1,s=10,r=1){super.oscillate(t,i,e,s,r)}percToPix(t){if(null==this.canvasWidthHeight)throw'init error';return this.canvasWidthHeight/100*t}}class z extends Q{constructor(t=0){super(t)}init(t,i){this.usePercentages=t,this.canvasWidthHeight=i,this.initSetInitValue(),this.initVibrate(),this.initGoto(),this.initAnimate(),this.initRandom(),this.initJumpBetween()}initOscilate(){for(let t=0;t<this.preInitOscilate.length;t++){const i=this.preInitOscilate[t];let e=i.startValue,s=i.endValue;1==this.usePercentages&&(e=this.percToPix(i.startValue),s=this.percToPix(i.endValue)),this.baseOscillate(i.startTimeSec,i.endTimeSec,e,s,i.speed)}}initVibrate(){for(let t=0;t<this.preInitVibrates.length;t++){const i=this.preInitVibrates[t];let e=i.seed;1==this.usePercentages&&(e=this.percToPix(i.seed)),this.baseVibrate(i.from,i.to,e,i.offset,i.delay)}}initRandom(){for(let t=0;t<this.preInitRandoms.length;t++){const i=this.preInitRandoms[t];let e=i.min,s=i.max;1==this.usePercentages&&(e=this.percToPix(i.min),s=this.percToPix(i.max)),this.baseRandom(i.startTimeSec,i.endTimeSec,e,s,i.skipFrames)}}initJumpBetween(){for(let t=0;t<this.preInitJumpBetweens.length;t++){const i=this.preInitJumpBetweens[t];let e=i.pointOne,s=i.pointTwo;1==this.usePercentages&&(e=this.percToPix(i.pointOne),s=this.percToPix(i.pointTwo)),this.baseJumpBetween(i.startTimeSec,i.endTimeSec,e,s,i.skipFrames)}}initGoto(){for(let t=0;t<this.preInitGotos.length;t++){const i=this.preInitGotos[t];let e=i.theValue;1==this.usePercentages&&(e=this.percToPix(i.theValue)),this.baseGoto(i.frame,e)}}initAnimate(){for(let t=0;t<this.preInitAnimates.length;t++){const i=this.preInitAnimates[t];1==this.usePercentages?this.baseAnimate(i.startTime,i.endTime,this.percToPix(i.startValue),this.percToPix(i.endValue)):this.baseAnimate(i.startTime,i.endTime,i.startValue,i.endValue)}}}class X extends o{constructor(i=0,e=0,s=20,r=20,h='#000000'){super(),this.x.set(i),this.y.set(e),this.x2=new z(s),this.y2=new z(r),this.lineWidth=new F(2),this.color.set(h),this.drawLayer=t.MiddleGround}init(t){if(super.init(t),null==this.canvasWidth||null==this.canvasHeight)throw new Error('init error');return this.x2.init(this.responsiveCoordinates,this.canvasWidth),this.y2.init(this.responsiveCoordinates,this.canvasHeight),!0}update(t,i){return super.update(t,i),this.x2.update(t),this.y2.update(t),this.lineWidth.update(t),!0}draw(t){return this.style.fillStyle=this.color.value(),this.style.strokeStyle=this.color.value(),this.style.lineWidth=this.lineWidth.value(),this.preDraw(t),t.drawLine(this.x.value(),this.y.value(),this.x2.value(),this.y2.value(),this.style),this.postDraw(t),!0}}class Y extends o{constructor(t='#ffff00'){super(),this.xAlign=this.XAlignOpt.Mid,this.yAlign=this.YAlignOpt.Mid,this.x.set(50),this.y.set(50),this.color.set(t)}widthInPix(){return 0}heightInPix(){return 0}draw(t){return this.style.fillStyle=this.color.value(),this.style.strokeStyle=this.color.value(),t.drawFillRect(this.x.value(),this.y.value(),4,4,this.style),!0}}class q extends o{constructor(t=9876,i='#008000'){super(),this.code=t,this.color.set(i),this.fontSize=new F(100),this.fontFamily=e.Calibri}update(t,i){return super.update(t,i),this.fontSize.update(t),!0}contentHeight(){if(null==this.charsWidth)throw new Error('init error');return this.charsWidth(String.fromCharCode(this.code),this.fontSize.value(),this.fontFamily)}contentWidth(){if(null==this.charsWidth)throw new Error('init error');return this.charsWidth(String.fromCharCode(this.code),this.fontSize.value(),this.fontFamily)}draw(t){return this.preDraw(t),this.style.fontSize=this.fontSize.value(),this.style.fillStyle=this.color.value(),this.style.strokeStyle=this.color.value(),t.drawIcon(this.code,this.contentX(),this.contentY(),this.style),this.postDraw(t),!0}}class J extends o{constructor(t='one two'){super(),this.x_local=0,this.incommingTextArray=t.split(' '),this.colorBackground=new nt('grey'),this.textArray=[];for(let t=0;t<this.incommingTextArray.length;t++){const i=this.incommingTextArray[t],e=new w(i);e.responsiveCoordinates=!1,e.responsiveDims=!1,e.responsivePadding=!1,e.border.set(1),e.width.set(30),e.colorBorder.set('hsl(200,100%,50%)'),e.paddingLeft.set(10),e.paddingRight.set(10),e.paddingTop.set(10),e.paddingBottom.set(10),this.textArray.push(e)}}init(t){super.init(t);for(let i=0;i<this.textArray.length;i++){const e=this.textArray[i];e.charsWidth=this.charsWidth,e.init(t)}return!0}update(t,i){this.colorBackground.update(t),super.update(t,i);for(let e=0;e<this.textArray.length;e++){this.textArray[e].update(t,i)}return!0}contentWidth(){if(null!==this.canvasWidth){let t=0;for(let i=0;i<this.textArray.length;i++){t+=this.textArray[i].compWidth()}return t}throw new Error('the component is not initialized yet')}contentHeight(){if(null!==this.canvasWidth){let t=0;for(let i=0;i<this.textArray.length;i++){const e=this.textArray[i];t<e.compHeight()&&(t=e.compHeight())}return t+this.paddingTop.value()+this.paddingBottom.value()}throw new Error('the component is not initialized yet')}setFontSize(t){for(let i=0;i<this.textArray.length;i++){this.textArray[i].width.set(t)}}setFontColor(t){for(let i=0;i<this.textArray.length;i++){this.textArray[i].color.set(t)}}getCell(t){return this.textArray[t]}draw(t){this.preDraw(t),this.style.fillStyle=this.color.value(),this.style.opacity=this.opacity.value(),this.style.strokeStyle=this.color.value();const i=this.yAligned();for(let e=0;e<this.textArray.length;e++){const s=this.textArray[e],r=this.xAligned()+this.x_local+this.paddingLeft.value(),h=i+this.paddingTop.value();s.x.set(r),s.y.set(h),s.draw(t),this.x_local+=s.compWidth()}return this.x_local=0,this.postDraw(t),!0}}class $ extends o{constructor(i,e,s,r,h){if(super(),this.leftExtraPix=0,this.topExtraPix=0,this.totalColumns=r,this.totalRows=h,this.sourceWidth=e,this.sourceHeight=s,this.width.set(this.sourceWidth),this.height.set(this.sourceHeight),this.responsiveDims=!1,this.responsivePadding=!1,this.row=new F(0),this.column=new F(0),this.img=new Image,this.img.src=i,null==this.img)throw new Error('image could not be found');document.body.appendChild(this.img),this.orignalWidth=this.img.clientWidth,this.orignalHeight=this.img.clientHeight,this.img.style.display='none',this.drawLayer=t.MiddleGround}init(t){if(super.init(t),null==this.canvasWidth)throw new Error('init error');if(null==this.canvasHeight)throw new Error('init error');return this.img.setAttribute('width',this.contentWidth().toString()),this.img.setAttribute('height',this.contentHeight().toString()),!0}update(t,i){return this.row.update(t),this.column.update(t),super.update(t,i),!0}draw(t){return this.preDraw(t),t.drawImageSrcDest(this.img,this.leftExtraPix+this.column.value()*this.sourceWidth,this.topExtraPix+this.row.value()*this.sourceHeight,this.sourceWidth,this.sourceHeight,this.xAligned(),this.yAligned(),this.contentWidth(),this.contentHeight()),this.postDraw(t),!0}gotoImage(t,i,e){i>this.totalRows||e>this.totalColumns||(this.row.goto(t,i),this.column.goto(t,e))}}class Z{static spriteSheet(t,i,e,s,r){return new $(t,i,e,s,r)}static icon(t=9876,i='#008000'){return new q(t,i)}static circle(t='red'){return new y(t)}static marker(t='red'){return new Y(t)}static pic(t,i=10,e=10){return new v(t,i,e)}static staticGrid(t=100,i=100,e='#efe1e1'){return new L(t,i,e)}static grid(t='grey',i=10,e=10){return new I(t,i,e)}static rect(t='#000000'){return new A(t)}static fillRect(t='#000000'){return new E(t)}static frameCounter(t='#000000'){return new g(t)}static particleSystem(t=10,i='#008000',e=50){return new f(t,i,e)}static text(t='',i='#000000'){return new C(t,i)}static rawText(t='',i='#000000'){return new w(t,i)}static line(t=0,i=0,e=20,s=20,r='#000000'){return new X(t,i,e,s,r)}static row(t='one two'){return new J(t)}}class j{constructor(t){!function(t){const i=document.getElementById('slider');if(null==i)throw new Error('slider error');const e=i;e.min='0',e.max=t.len(!1).toString(),e.value='0',setInterval((()=>{1==t.isRunning()&&(e.value=Math.ceil(t.getLastMsDelta()/1e3))}),500),e.addEventListener('input',(i=>{t.draw(1e3*i.target.value)}))}(t);const i=document.getElementById('start');if(null===i)throw new Error('start button not found');this.start=i,this.start.addEventListener('click',(i=>{t.start()}));const e=document.getElementById('stop');if(null===e)throw new Error('stop button not found');this.stop=e,this.stop.addEventListener('click',(i=>{t.stop(),slider.value=0,t.draw(0)}))}}function tt(t){let i=t/16;return Math.ceil(9*i)}function it(t){return t>100?100:t<0?0:t}class et{constructor(t,i=80){this.canvasId=t,this.canvas=function(t='bilza'){let i=document.getElementById(t);if(null==i){let i=document.createElement('canvas');if(document.getElementsByTagName('body')[0].appendChild(i),i.id=t,i.style.position='static',null==i)throw new Error('canvas not found');return i}{let e=i;if(e.id=t,e.style.position='static',null==e)throw new Error('canvas not found');return e}}(this.canvasId),this.dynamicCanvas(i,null),this.ctx=this.getNewCtx(),this.disableOpacity=!1}getNewCtx(){let t=this.canvas.getContext('2d');if(null==t)throw new Error('could not obtain drawing context');return t}drawBackground(t='blue'){return this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle}canvasWidth(){return this.canvas.width}canvasHeight(){return this.canvas.height}quadraticCurveTo(t,i,e,s){this.commitCtxData(s),this.beginPath(),this.moveTo(t.x,t.y),this.ctx.quadraticCurveTo(e.x,e.y,i.x,i.y),this.stroke()}restore(){this.ctx.restore()}save(){this.ctx.save()}drawImage(t,i,e,s,r){this.ctx.drawImage(t,i,e,s,r)}drawImageSrcDest(t,i,e,s,r,h,n,a,o){this.ctx.drawImage(t,i,e,s,r,h,n,a,o)}clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}charsWidth(t,i,e){this.ctx.save(),this.setFont(i,e);let s=this.ctx.measureText(t).width;return this.ctx.restore(),Math.ceil(s)}textWidth(t,i){this.ctx.save(),this.commitCtxData(i);let e=this.ctx.measureText(t).width;return this.ctx.restore(),Math.ceil(e)}drawLine(t,i,e,s,r){this.commitCtxData(r),this.ctx.beginPath(),this.ctx.moveTo(t,i),this.ctx.lineTo(e,s),this.ctx.stroke()}line(t,i,e,s){this.ctx.beginPath(),this.ctx.moveTo(t,i),this.ctx.lineTo(e,s),this.ctx.stroke()}beginPath(){this.ctx.beginPath()}closePath(){this.ctx.closePath()}moveTo(t,i){this.ctx.moveTo(t,i)}lineTo(t,i,e){this.commitCtxData(e),this.ctx.lineTo(t,i)}fill(t){this.commitCtxData(t),this.ctx.fill()}stroke(){this.ctx.stroke()}drawRect(t,i,e,s,r){this.commitCtxData(r),this.ctx.beginPath(),this.ctx.rect(t,i,e,s),this.ctx.stroke()}drawFillRect(t,i,e,s,r){this.commitCtxData(r),this.ctx.fillRect(t,i,e,s)}arcTo(t,i,e,s=20){this.commitCtxData(e),this.ctx.arcTo(t.x,t.y,i.x,i.y,s)}drawCircle(t=0,i=0,e=25,s=!1,r=0,h=2*Math.PI,n){this.commitCtxData(n),this.ctx.beginPath(),this.ctx.arc(t,i,e,r,h,!1),1==s&&this.ctx.fill(),this.ctx.stroke()}textBaseline(t){switch(t){case'top':this.ctx.textBaseline='top';break;case'middle':case'bottom':this.ctx.textBaseline='middle';break;case'alphabetic':this.ctx.textBaseline='alphabetic';break;case'hanging':this.ctx.textBaseline='hanging'}}drawText(t,i,e,s){this.commitCtxData(s),this.ctx.textBaseline='top',this.ctx.fillText(t,i,e)}drawIcon(t,i,e,s){this.commitCtxData(s),this.ctx.textBaseline='top',this.ctx.fillText(String.fromCharCode(t),i,e)}drawTextstroke(t,i,e,s){this.commitCtxData(s),this.ctx.textBaseline='top',this.ctx.strokeText(t,i,e)}commitCtxData(t){null!==t.lineCap&&(this.ctx.lineCap='round'),null!==t.opacity&&(1==this.disableOpacity?this.ctx.globalAlpha=1:this.ctx.globalAlpha=t.opacity/100),null!==t.shadowBlur&&(this.ctx.shadowBlur=t.shadowBlur),null!==t.shadowOffsetY&&(this.ctx.shadowOffsetY=t.shadowOffsetY),null!==t.shadowOffsetX&&(this.ctx.shadowOffsetX=t.shadowOffsetX),null!==t.lineWidth&&(this.ctx.lineWidth=t.lineWidth),null!==t.shadowColor&&(this.ctx.shadowColor=t.shadowColor),null!==t.strokeStyle&&(this.ctx.strokeStyle=t.strokeStyle),null!==t.fillStyle&&(this.ctx.fillStyle=t.fillStyle),null!==t.lineDash&&this.ctx.setLineDash(t.lineDash),this.setFont(t.fontSize,t.fontFamily)}setFont(t,i){let e=`${t}px ${i}`;this.ctx.font=e}xPerc(t){let i=this.setBwZeroNhundred(t);return Math.ceil(this.canvas.width/100*i)}pixToXPerc(t){const i=t/this.canvasWidth();return Math.ceil(100*i)}pixToYPerc(t){const i=t/this.canvasHeight();return Math.ceil(100*i)}yPerc(t){let i=this.setBwZeroNhundred(t);return this.canvas.height/100*i}setBwZeroNhundred(t){return t<0?0:t>100?100:t}dynCanvasWidth(t=80){return window.innerWidth/100*it(t)}dynCanvasHeight(t,i=null){return null!==i?window.innerHeight/100*it(i):tt(t)}resizeCanvas(t,i){this.canvas.width=t,this.canvas.height=i??tt(t)}dynamicCanvas(t=95,i=null){let e=this.dynCanvasWidth(t);return this.resizeCanvas(e,this.dynCanvasHeight(e,i)),!0}rotate(t,i=!1){const e=t*(Math.PI/180);0==i?this.ctx.rotate(e):this.ctx.rotate(-e)}translate(t,i){this.ctx.translate(t,i)}setTransform(t=1,i=0,e=0,s=1,r=0,h=0){this.ctx.setTransform(t,i,e,s,r,h)}}class st extends W{}class rt extends x{constructor(t,i){super(t,t+3e3),this.theValue=i,this.usedOnce=!1,this._ret_val=null}update(t){return super.update(t)==h.Running&&0==this.usedOnce?(this._ret_val=this.theValue,this.usedOnce=!0):this._ret_val=null,this.filterState}}class ht extends x{constructor(t,i,e=0){super(t,i),this.everyXFrame=e,this.delayCounter=0,this._ret_val=null}update(t){if(super.update(t),this.filterState==h.Running)if(this.delayCounter>=this.everyXFrame){this.delayCounter=0;const t=Math.floor(360*Math.random()),i=Math.floor(101*Math.random()),e=Math.floor(101*Math.random());this._ret_val=`hsl(${t},${i}%,${e}%)`}else this.delayCounter+=1;else this._ret_val=null;return this.filterState}}class nt extends W{goto(t,i){const e=new rt(t,i);this.filters.push(e)}random(t,i,e=0){const s=new ht(t,i,e);this.filters.push(s)}}class at extends x{constructor(t,i){super(t,t+3e3),this.theValue=i,this.usedOnce=!1,this._ret_val=null}update(t){return super.update(t)==h.Running&&0==this.usedOnce?(this._ret_val=this.theValue,this.usedOnce=!0):this._ret_val=null,this.filterState}}class ot extends W{goto(t,i){const e=new at(t,i);this.filters.push(e)}}class lt{static Icon(t=9876,i='#008000'){return new q(t,i)}}function ct(t=0,i=100,e=50){return`hsl(${t.toString()},${i.toString()}%,${e.toString()}%)`}(t=>{t[t.TeaCup=9749]='TeaCup',t[t.Danger=9760]='Danger',t[t.YinYang=9775]='YinYang',t[t.CrossSword=9876]='CrossSword',t[t.Heart=9829]='Heart',t[t.FleurDeLis=9884]='FleurDeLis',t[t.StopSign=9940]='StopSign',t[t.GolfGreen=9971]='GolfGreen',t[t.CheckMark=10003]='CheckMark',t[t.HeavyCheckMark=10004]='HeavyCheckMark',t[t.BallotX=10007]='BallotX',t[t.BLACK_SQUARE=9632]='BLACK_SQUARE',t[t.WHITE_SQUARE=9633]='WHITE_SQUARE',t[t.WHITE_SQUARE_WITH_ROUNDED_CORNERS=9634]='WHITE_SQUARE_WITH_ROUNDED_CORNERS',t[t.WHITE_SQUARE_CONTAINING_BLACK_SMALL_SQUARE=9635]='WHITE_SQUARE_CONTAINING_BLACK_SMALL_SQUARE',t[t.SQUARE_WITH_HORIZONTAL_FILL=9636]='SQUARE_WITH_HORIZONTAL_FILL',t[t.SQUARE_WITH_VERTICAL_FILL=9637]='SQUARE_WITH_VERTICAL_FILL',t[t.SQUARE_WITH_ORTHOGONAL_CROSSHATCH_FILL=9638]='SQUARE_WITH_ORTHOGONAL_CROSSHATCH_FILL',t[t.SQUARE_WITH_UPPER_LEFT_TO_LOWER_RIGHT_FILL=9639]='SQUARE_WITH_UPPER_LEFT_TO_LOWER_RIGHT_FILL',t[t.SQUARE_WITH_UPPER_RIGHT_TO_LOWER_LEFT_FILL=9640]='SQUARE_WITH_UPPER_RIGHT_TO_LOWER_LEFT_FILL',t[t.SQUARE_WITH_DIAGONAL_CROSSHATCH_FILL=9641]='SQUARE_WITH_DIAGONAL_CROSSHATCH_FILL',t[t.BLACK_SMALL_SQUARE_=9642]='BLACK_SMALL_SQUARE_',t[t.WHITE_SMALL_SQUARE_=9643]='WHITE_SMALL_SQUARE_',t[t.BLACK_RECTANGLE=9644]='BLACK_RECTANGLE',t[t.WHITE_RECTANGLE=9645]='WHITE_RECTANGLE',t[t.BLACK_VERTICAL_RECTANGLE=9646]='BLACK_VERTICAL_RECTANGLE',t[t.WHITE_VERTICAL_RECTANGLE=9647]='WHITE_VERTICAL_RECTANGLE',t[t.BLACK_PARALLELOGRAM=9648]='BLACK_PARALLELOGRAM',t[t.WHITE_PARALLELOGRAM=9649]='WHITE_PARALLELOGRAM',t[t.BLACK_UP_POINTING_TRIANGLE=9650]='BLACK_UP_POINTING_TRIANGLE',t[t.WHITE_UP_POINTING_TRIANGLE=9651]='WHITE_UP_POINTING_TRIANGLE',t[t.BLACK_UP_POINTING_SMALL_TRIANGLE=9652]='BLACK_UP_POINTING_SMALL_TRIANGLE',t[t.WHITE_UP_POINTING_SMALL_TRIANGLE=9653]='WHITE_UP_POINTING_SMALL_TRIANGLE',t[t.BLACK_RIGHT_POINTING_TRIANGLE=9654]='BLACK_RIGHT_POINTING_TRIANGLE',t[t.WHITE_RIGHT_POINTING_TRIANGLE=9655]='WHITE_RIGHT_POINTING_TRIANGLE',t[t.BLACK_RIGHT_POINTING_SMALL_TRIANGLE=9656]='BLACK_RIGHT_POINTING_SMALL_TRIANGLE',t[t.WHITE_RIGHT_POINTING_SMALL_TRIANGLE=9657]='WHITE_RIGHT_POINTING_SMALL_TRIANGLE',t[t.BLACK_RIGHT_POINTING_POINTER=9658]='BLACK_RIGHT_POINTING_POINTER',t[t.WHITE_RIGHT_POINTING_POINTER=9659]='WHITE_RIGHT_POINTING_POINTER',t[t.BLACK_DOWN_POINTING_TRIANGLE=9660]='BLACK_DOWN_POINTING_TRIANGLE',t[t.WHITE_DOWN_POINTING_TRIANGLE=9661]='WHITE_DOWN_POINTING_TRIANGLE',t[t.BLACK_DOWN_POINTING_SMALL_TRIANGLE=9662]='BLACK_DOWN_POINTING_SMALL_TRIANGLE',t[t.WHITE_DOWN_POINTING_SMALL_TRIANGLE=9663]='WHITE_DOWN_POINTING_SMALL_TRIANGLE',t[t.BLACK_LEFT_POINTING_TRIANGLE=9664]='BLACK_LEFT_POINTING_TRIANGLE',t[t.WHITE_LEFT_POINTING_TRIANGLE=9665]='WHITE_LEFT_POINTING_TRIANGLE',t[t.BLACK_LEFT_POINTING_SMALL_TRIANGLE=9666]='BLACK_LEFT_POINTING_SMALL_TRIANGLE',t[t.WHITE_LEFT_POINTING_SMALL_TRIANGLE=9667]='WHITE_LEFT_POINTING_SMALL_TRIANGLE',t[t.BLACK_LEFT_POINTING_POINTER=9668]='BLACK_LEFT_POINTING_POINTER',t[t.WHITE_LEFT_POINTING_POINTER=9669]='WHITE_LEFT_POINTING_POINTER',t[t.BLACK_DIAMOND=9670]='BLACK_DIAMOND',t[t.WHITE_DIAMOND=9671]='WHITE_DIAMOND',t[t.WHITE_DIAMOND_CONTAINING_BLACK_SMALL_DIAMOND=9672]='WHITE_DIAMOND_CONTAINING_BLACK_SMALL_DIAMOND',t[t.FISHEYE=9673]='FISHEYE',t[t.LOZENGE=9674]='LOZENGE',t[t.WHITE_CIRCLE=9675]='WHITE_CIRCLE',t[t.DOTTED_CIRCLE=9676]='DOTTED_CIRCLE',t[t.CIRCLE_WITH_VERTICAL_FILL=9677]='CIRCLE_WITH_VERTICAL_FILL',t[t.BULLSEYE=9678]='BULLSEYE',t[t.BLACK_CIRCLE=9679]='BLACK_CIRCLE',t[t.CIRCLE_WITH_LEFT_HALF_BLACK=9680]='CIRCLE_WITH_LEFT_HALF_BLACK',t[t.CIRCLE_WITH_RIGHT_HALF_BLACK=9681]='CIRCLE_WITH_RIGHT_HALF_BLACK',t[t.CIRCLE_WITH_LOWER_HALF_BLACK=9682]='CIRCLE_WITH_LOWER_HALF_BLACK',t[t.CIRCLE_WITH_UPPER_HALF_BLACK=9683]='CIRCLE_WITH_UPPER_HALF_BLACK',t[t.CIRCLE_WITH_UPPER_RIGHT_QUADRANT_BLACK=9684]='CIRCLE_WITH_UPPER_RIGHT_QUADRANT_BLACK',t[t.CIRCLE_WITH_ALL_BUT_UPPER_LEFT_QUADRANT_BLACK=9685]='CIRCLE_WITH_ALL_BUT_UPPER_LEFT_QUADRANT_BLACK',t[t.LEFT_HALF_BLACK_CIRCLE=9686]='LEFT_HALF_BLACK_CIRCLE',t[t.RIGHT_HALF_BLACK_CIRCLE=9687]='RIGHT_HALF_BLACK_CIRCLE',t[t.INVERSE_BULLET=9688]='INVERSE_BULLET',t[t.INVERSE_WHITE_CIRCLE=9689]='INVERSE_WHITE_CIRCLE',t[t.UPPER_HALF_INVERSE_WHITE_CIRCLE=9690]='UPPER_HALF_INVERSE_WHITE_CIRCLE',t[t.LOWER_HALF_INVERSE_WHITE_CIRCLE=9691]='LOWER_HALF_INVERSE_WHITE_CIRCLE',t[t.UPPER_LEFT_QUADRANT_CIRCULAR_ARC=9692]='UPPER_LEFT_QUADRANT_CIRCULAR_ARC',t[t.UPPER_RIGHT_QUADRANT_CIRCULAR_ARC=9693]='UPPER_RIGHT_QUADRANT_CIRCULAR_ARC',t[t.LOWER_RIGHT_QUADRANT_CIRCULAR_ARC=9694]='LOWER_RIGHT_QUADRANT_CIRCULAR_ARC',t[t.LOWER_LEFT_QUADRANT_CIRCULAR_ARC=9695]='LOWER_LEFT_QUADRANT_CIRCULAR_ARC',t[t.UPPER_HALF_CIRCLE=9696]='UPPER_HALF_CIRCLE',t[t.LOWER_HALF_CIRCLE=9697]='LOWER_HALF_CIRCLE',t[t.BLACK_LOWER_RIGHT_TRIANGLE=9698]='BLACK_LOWER_RIGHT_TRIANGLE',t[t.BLACK_LOWER_LEFT_TRIANGLE=9699]='BLACK_LOWER_LEFT_TRIANGLE',t[t.BLACK_UPPER_LEFT_TRIANGLE=9700]='BLACK_UPPER_LEFT_TRIANGLE',t[t.BLACK_UPPER_RIGHT_TRIANGLE=9701]='BLACK_UPPER_RIGHT_TRIANGLE',t[t.WHITE_BULLET=9702]='WHITE_BULLET',t[t.SQUARE_WITH_LEFT_HALF_BLACK=9703]='SQUARE_WITH_LEFT_HALF_BLACK',t[t.SQUARE_WITH_RIGHT_HALF_BLACK=9704]='SQUARE_WITH_RIGHT_HALF_BLACK',t[t.SQUARE_WITH_UPPER_LEFT_DIAGONAL_HALF_BLACK=9705]='SQUARE_WITH_UPPER_LEFT_DIAGONAL_HALF_BLACK',t[t.SQUARE_WITH_LOWER_RIGHT_DIAGONAL_HALF_BLACK=9706]='SQUARE_WITH_LOWER_RIGHT_DIAGONAL_HALF_BLACK',t[t.WHITE_SQUARE_WITH_VERTICAL_BISECTING_LINE=9707]='WHITE_SQUARE_WITH_VERTICAL_BISECTING_LINE',t[t.WHITE_UP_POINTING_TRIANGLE_WITH_DOT=9708]='WHITE_UP_POINTING_TRIANGLE_WITH_DOT',t[t.UP_POINTING_TRIANGLE_WITH_LEFT_HALF_BLACK=9709]='UP_POINTING_TRIANGLE_WITH_LEFT_HALF_BLACK',t[t.UP_POINTING_TRIANGLE_WITH_RIGHT_HALF_BLACK=9710]='UP_POINTING_TRIANGLE_WITH_RIGHT_HALF_BLACK',t[t.LARGE_CIRCLE=9711]='LARGE_CIRCLE',t[t.WHITE_SQUARE_WITH_UPPER_LEFT_QUADRANT=9712]='WHITE_SQUARE_WITH_UPPER_LEFT_QUADRANT',t[t.WHITE_SQUARE_WITH_LOWER_LEFT_QUADRANT=9713]='WHITE_SQUARE_WITH_LOWER_LEFT_QUADRANT',t[t.WHITE_SQUARE_WITH_LOWER_RIGHT_QUADRANT=9714]='WHITE_SQUARE_WITH_LOWER_RIGHT_QUADRANT',t[t.WHITE_SQUARE_WITH_UPPER_RIGHT_QUADRANT=9715]='WHITE_SQUARE_WITH_UPPER_RIGHT_QUADRANT',t[t.WHITE_CIRCLE_WITH_UPPER_LEFT_QUADRANT=9716]='WHITE_CIRCLE_WITH_UPPER_LEFT_QUADRANT',t[t.WHITE_CIRCLE_WITH_LOWER_LEFT_QUADRANT=9717]='WHITE_CIRCLE_WITH_LOWER_LEFT_QUADRANT',t[t.WHITE_CIRCLE_WITH_LOWER_RIGHT_QUADRANT=9718]='WHITE_CIRCLE_WITH_LOWER_RIGHT_QUADRANT',t[t.WHITE_CIRCLE_WITH_UPPER_RIGHT_QUADRANT=9719]='WHITE_CIRCLE_WITH_UPPER_RIGHT_QUADRANT',t[t.UPPER_LEFT_TRIANGLE=9720]='UPPER_LEFT_TRIANGLE',t[t.UPPER_RIGHT_TRIANGLE=9721]='UPPER_RIGHT_TRIANGLE',t[t.LOWER_LEFT_TRIANGLE=9722]='LOWER_LEFT_TRIANGLE',t[t.WHITE_MEDIUM_SQUARE=9723]='WHITE_MEDIUM_SQUARE',t[t.BLACK_MEDIUM_SQUARE=9724]='BLACK_MEDIUM_SQUARE',t[t.WHITE_MEDIUM_SMALL_SQUARE=9725]='WHITE_MEDIUM_SMALL_SQUARE',t[t.BLACK_MEDIUM_SMALL_SQUARE=9726]='BLACK_MEDIUM_SMALL_SQUARE',t[t.LOWER_RIGHT_TRIANGLE=9727]='LOWER_RIGHT_TRIANGLE'})(n||(n={}));class dt{constructor(){}static megatron(t='',i='#000000'){let e=new C(t,i);return e.xAlign=e.XAlignOpt.Mid,e.yAlign=e.YAlignOpt.Mid,e.showBackground.set(!0),e.border.set(3),e.colorBorder.set(i),e.paddingLeft.set(2),e.paddingRight.set(2),e.paddingTop.set(2),e.paddingBottom.set(2),e.x.set(50),e.y.set(50),e.width.set(80),e}static welcome(t='',i='#000000'){let e=new C(t,i);return e.xAlign=e.XAlignOpt.Mid,e.yAlign=e.YAlignOpt.Mid,e.showBackground.set(!0),e.border.set(3),e.colorBorder.set(i),e.paddingLeft.set(2),e.paddingRight.set(2),e.paddingTop.set(8),e.paddingBottom.set(8),e.x.set(50),e.y.set(50),e.width.set(50),e}static h1(t='',i='#000000'){let e=new C(t,i);return e.xAlign=e.XAlignOpt.Mid,e.yAlign=e.YAlignOpt.Top,e.showBackground.set(!0),e.border.set(1),e.colorBorder.set(i),e.paddingLeft.set(0),e.paddingRight.set(0),e.paddingTop.set(0),e.paddingBottom.set(0),e.x.set(50),e.y.set(2),e.height.set(15),e.width.set(60),e}static footNote(t='',i='#000000'){let e=new C(t,i);return e.xAlign=e.XAlignOpt.Right,e.yAlign=e.YAlignOpt.Bot,e.showBackground.set(!0),e.border.set(1),e.colorBorder.set(i),e.paddingLeft.set(0),e.paddingRight.set(0),e.paddingTop.set(0),e.paddingBottom.set(0),e.x.set(98),e.y.set(98),e.height.set(15),e.width.set(10),e}}class ut{static emoji(){return new $('../images/emoji.png',72,72,16,10)}static ghosts(){return new $('../images/ghosts.webp',665,810,3,2)}}export{st as AniBoolean,nt as AniColor,z as AniNoPerc,F as AniNumber,ot as AniString,o as BaseComponent,T as Bilza,Z as CompFactory,t as DrawLayer,lt as Experimental,e as FontFamily,et as Pack,ut as SpriteSheets,a as Style,dt as TextTempl,n as UTFIcons,j as Ui,s as XAlignOpt,r as YAlignOpt,T as default,ct as hsl};
